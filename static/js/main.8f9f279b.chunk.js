(this.webpackJsonpbefunge=this.webpackJsonpbefunge||[]).push([[0],{32:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var i=n(0),s=n.n(i),o=n(9),c=n.n(o),u=(n(32),n(4)),r=n(6),a=n(12),l=n(14),h=n(15),d=function(){function t(e,n){Object(l.a)(this,t),this.x=e,this.y=n}return Object(h.a)(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setToCopy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"negative",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"modulo",value:function(t){return this.x=(this.x%t.x+t.x)%t.x,this.y=(this.y%t.y+t.y)%t.y,this}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}}]),t}();function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e>0?Array(e).fill(t).map((function(t,e){return t+n*e})):[]}var f=n(25);function k(t){var e=Object(f.a)(t);return e.sort(),e}var y={Left:new d(-1,0),Right:new d(1,0),Up:new d(0,-1),Down:new d(0,1)};var p,b,j=n(7),x=n(21),g=n.n(x);!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Up=2]="Up",t[t.Down=3]="Down"}(b||(b={}));var m=(p={},Object(j.a)(p,b.Left,new d(-1,0)),Object(j.a)(p,b.Right,new d(1,0)),Object(j.a)(p,b.Up,new d(0,-1)),Object(j.a)(p,b.Down,new d(0,1)),p),O=function(){function t(e,n,i){Object(l.a)(this,t),this.render=i,this.cursor=new d(0,0),this.direction=b.Right,this.stack=[],this.output="",this.stringMode=!1,this.halted=!1,this.limits=void 0,this.code=void 0,this.walking=!1,this.running=!1,this.limits=new d(e,n),this.code=function(t,e,n){return Array(t).fill(!1).map((function(){return Array(e).fill(n)}))}(e,n," "),g()(this)}return Object(h.a)(t,[{key:"walk",value:function(){this.walking=!0,this.running=!1,function t(e){return function(){e.walking&&(e.step(),setTimeout(t(e),1))}}(this)()}},{key:"run",value:function(){this.walking=!1,this.running=!0,function t(e){return function(){for(var n=0;n<100;n++)e.running&&e.quickStep();e.running?setTimeout(t(e),1):e.render()}}(this)()}},{key:"pause",value:function(){this.walking=!1,this.running=!1}},{key:"reset",value:function(){this.cursor=new d(0,0),this.stack=[],this.output="",this.halted=!1,this.stringMode=!1,this.walking=!1,this.render()}},{key:"quickStep",value:function(){this.execute(this.code[this.cursor.x][this.cursor.y]),this.moveCursor()}},{key:"step",value:function(){this.execute(this.code[this.cursor.x][this.cursor.y]),this.moveCursor(),this.render()}},{key:"moveCursor",value:function(){this.cursor.add(m[this.direction]),this.cursor.modulo(this.limits)}},{key:"execute",value:function(t){this.stringMode&&this.stack.push(t.charCodeAt(0)),this.isValidCommand(t)?this[t]():this.throwUnrecognisedCommand(t,this.cursor)}},{key:"isValidCommand",value:function(t){return t in this}},{key:"throwUnrecognisedCommand",value:function(t,e){this.output+='\nError: Unrecognised command "'.concat(t,'" at ').concat(e.toString()),this.halt()}},{key:"halt",value:function(){this.halted=!0,this.walking=!1,this.running=!1}},{key:"0",value:function(){this.stack.push(0)}},{key:"1",value:function(){this.stack.push(1)}},{key:"2",value:function(){this.stack.push(2)}},{key:"3",value:function(){this.stack.push(3)}},{key:"4",value:function(){this.stack.push(4)}},{key:"5",value:function(){this.stack.push(5)}},{key:"6",value:function(){this.stack.push(6)}},{key:"7",value:function(){this.stack.push(7)}},{key:"8",value:function(){this.stack.push(8)}},{key:"9",value:function(){this.stack.push(9)}},{key:"+",value:function(){var t,e;this.stack.push((null!==(t=this.stack.pop())&&void 0!==t?t:0)+(null!==(e=this.stack.pop())&&void 0!==e?e:0))}},{key:"-",value:function(){var t,e;this.stack.push(-(null!==(t=this.stack.pop())&&void 0!==t?t:0)+(null!==(e=this.stack.pop())&&void 0!==e?e:0))}},{key:"/",value:function(){var t;this.stack.push(Math.floor(1/(null!==(t=this.stack.pop())&&void 0!==t?t:1)*(this.stack.pop()||1)))}},{key:"*",value:function(){var t,e;this.stack.push((null!==(t=this.stack.pop())&&void 0!==t?t:1)*(null!==(e=this.stack.pop())&&void 0!==e?e:1))}},{key:"%",value:function(){var t,e,n=null!==(t=this.stack.pop())&&void 0!==t?t:1,i=null!==(e=this.stack.pop())&&void 0!==e?e:1;this.stack.push(i%n)}},{key:"!",value:function(){this.stack.push(Number(!this.stack.pop()))}},{key:"`",value:function(){var t,e,n=null!==(t=this.stack.pop())&&void 0!==t?t:0,i=null!==(e=this.stack.pop())&&void 0!==e?e:0;this.stack.push(Number(n<i))}},{key:">",value:function(){this.direction=b.Right}},{key:"<",value:function(){this.direction=b.Left}},{key:"^",value:function(){this.direction=b.Up}},{key:"v",value:function(){this.direction=b.Down}},{key:"?",value:function(){this.direction=Math.floor(4*Math.random())}},{key:"_",value:function(){this.direction=this.stack.pop()?b.Left:b.Right}},{key:"|",value:function(){this.direction=this.stack.pop()?b.Up:b.Down}},{key:'"',value:function(){this.stringMode=!this.stringMode}},{key:":",value:function(){this.stack.push(this.stack[this.stack.length-1])}},{key:"\\",value:function(){var t=this.stack.pop(),e=this.stack.pop();void 0!==t&&this.stack.push(t),void 0!==e&&this.stack.push(e)}},{key:"$",value:function(){this.stack.pop()}},{key:"#",value:function(){this.moveCursor()}},{key:"g",value:function(){var t,e;this.stack.push(this.code[null!==(t=this.stack.pop())&&void 0!==t?t:0][null!==(e=this.stack.pop())&&void 0!==e?e:0].charCodeAt(0))}},{key:"p",value:function(){var t,e,n;this.code[null!==(t=this.stack.pop())&&void 0!==t?t:0][null!==(e=this.stack.pop())&&void 0!==e?e:0]=String.fromCharCode(null!==(n=this.stack.pop())&&void 0!==n?n:32)}},{key:".",value:function(){var t;this.output+=(null!==(t=this.stack.pop())&&void 0!==t?t:0).toString(10)}},{key:",",value:function(){var t=this.stack.pop();void 0!==t&&(this.output+=String.fromCharCode(t))}},{key:"@",value:function(){this.halt()}},{key:" ",value:function(){}}]),t}();function w(t,e){var n=Object(i.useState)(0)[1],s=Object(i.useCallback)((function(){n(Math.random())}),[]),o=Object(i.useRef)(new O(t,e,s)).current,c=function(t,e,n){var s=Object(i.useRef)(new d(0,0)).current,o=Object(i.useRef)(new d(0,0)).current,c=Object(i.useRef)(new d(1,0)).current,u=Object(i.useRef)("delete").current,r=Object(i.useCallback)((function(t){s.add(t),s.modulo(e),o.set(0,0)}),[]),l=Object(i.useCallback)((function(e){1!==e.key.length||e.ctrlKey||e.metaKey?!e.key.match(/^Arrow/)||e.ctrlKey||e.metaKey?"Backspace"===e.key&&(console.log(u),"backspace"===u?(r(c.clone().negative()),t[s.x][s.y]=" "):"delete"===u&&v()):(e.shiftKey?o.add(y[e.key.slice(5)]):(c.setToCopy(y[e.key.slice(5)]),r(c),e.preventDefault()),u="delete"):(t[s.x][s.y]=e.key,r(c),u="backspace"),n()}),[]),h=Object(i.useCallback)((function(e,n){t[e.x][e.y]=n(t[e.x][e.y])}),[]),v=Object(i.useCallback)((function(){for(var n=k([s.x,s.x+o.x]),i=Object(a.a)(n,2),c=i[0],u=i[1],r=k([s.y,s.y+o.y]),l=Object(a.a)(r,2),h=l[0],v=l[1],f=new d(0,0),y=h;y<=v;y++)for(var p=c;p<=u;p++)f.set(p,y).modulo(e),t[f.x][f.y]=" "}),[]),f=Object(i.useCallback)((function(i){return function(c){for(var u,r="",l=k([s.x,s.x+o.x]),v=Object(a.a)(l,2),f=v[0],y=v[1],p=k([s.y,s.y+o.y]),b=Object(a.a)(p,2),j=b[0],x=b[1],g=new d(0,0),m=j;m<=x;m++){for(var O=f;O<=y;O++)g.set(O,m).modulo(e),r+=t[g.x][g.y],i&&h(g,i);r+="\n"}null===(u=c.clipboardData)||void 0===u||u.setData("text/plain",r),c.preventDefault(),i&&n()}}),[]),p=Object(i.useCallback)(f((function(){return" "})),[]),b=Object(i.useCallback)(f(void 0),[]),j=Object(i.useCallback)((function(i){var o,c=null===(o=i.clipboardData)||void 0===o?void 0:o.getData("Text"),u=new d(s.x,s.y);null===c||void 0===c||c.split("").forEach((function(n){"\n"===n?(u.setX(s.x),u.setY(u.y+1),u.modulo(e)):(t[u.x][u.y]=n,u.setX(u.x+1),u.modulo(e))})),n()}),[]);Object(i.useEffect)((function(){return document.addEventListener("keydown",l),document.addEventListener("cut",p),document.addEventListener("copy",b),document.addEventListener("paste",j),function(){document.removeEventListener("keydown",l),document.removeEventListener("cut",p),document.removeEventListener("copy",b),document.removeEventListener("paste",j)}}),[]);var x=Object(i.useCallback)((function(t,e){return function(i){i.shiftKey?o.set(t-s.x,e-s.y):(s.set(t,e),o.set(0,0),u="delete",c.setToCopy(y.Right)),n()}}),[]),g=Object(i.useCallback)((function(t,e){return function(i){i.buttons%2===1&&(o.set(t-s.x,e-s.y),n())}}),[]);return{code:t,selection:s,selectionDelta:o,onMouseDown:x,onMouseOver:g}}(o.code,o.limits,s);return{code:c.code,selection:c.selection,selectionDelta:c.selectionDelta,onMouseDown:c.onMouseDown,onMouseOver:c.onMouseOver,befunge:o}}var C=n(5),R=n(26),D=n(66),M=n(1);function S(t){var e=t.label,n=t.onClick,i=Object(R.a)(t,["label","onClick"]);return Object(M.jsx)(D.a,Object(C.a)(Object(C.a)({variant:"contained",size:"small",disableElevation:!0,onClick:n},i),{},{children:e}))}var E,L,T=n(8),U=n.n(T),I={DARK:U()("#283134"),LIGHT:U()("#f7f9f9"),GREY:U()("#CCCCCC"),WRITING_CURSOR:U()("#CCEAFF"),EXECUTING_CURSOR:U()("#FFE0CC"),ACCENT:U()("#09b2eb")},G=r.a.div(E||(E=Object(u.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),A=I.LIGHT.toString(),K=I.GREY.toString(),N=I.WRITING_CURSOR.toString(),W=I.EXECUTING_CURSOR.toString();function H(t){var e=t.val,n=t.selected,i=t.cursored,s=t.onMouseDown,o=t.onMouseOver,c=n||i?n&&i?K:n?N:W:A;return Object(M.jsx)(B,{color:c,onMouseDown:s,onMouseOver:o,children:e})}var X,_,B=r.a.div(L||(L=Object(u.a)(["\n  width: 16px;\n  height: 16px;\n  background-color: ",";\n  border-right: 1px solid #bbbbbb;\n  border-bottom: 1px solid #bbbbbb;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n"])),(function(t){return t.color}));function F(t){var e=t.code,n=t.selection,s=t.selectionDelta,o=t.onMouseDown,c=t.onMouseOver,u=t.limits,r=t.cursor,a=Object(i.useCallback)(Y(n.x,s.x,u.x),[n.x,s.x]),l=Object(i.useCallback)(Y(n.y,s.y,u.y),[n.y,s.y]);return Object(M.jsx)("div",{style:{overflow:"hidden"},children:Object(M.jsx)("div",{style:{marginRight:-1,marginBottom:-1},children:v(0,u.y).map((function(t){return Object(M.jsx)(G,{children:v(0,u.x).map((function(n){return Object(M.jsx)(H,{val:e[n][t],selected:a(n)&&l(t),cursored:n===r.x&&t===r.y,onMouseDown:o(n,t),onMouseOver:c(n,t)},"".concat(n,",").concat(t))}))},t)}))})})}function Y(t,e,n){if(0===e)return function(e){return e===t};var i,s=t+e,o=((t+e)%(i=n)+i)%i;return e<0?o===s?function(n){return t+e<=n&&n<=t}:function(e){return e<=t||e>=o}:o===s?function(n){return t<=n&&n<=t+e}:function(e){return e<=o||e>=t}}function q(t){var e=t.stack,n=t.style;return Object(M.jsx)("div",{style:Object(C.a)({width:120,alignSelf:"stretch",backgroundColor:I.LIGHT.toString(),padding:8,overflow:"scroll",scrollbarWidth:"none"},n),children:e.slice().reverse().map((function(t,e){return Object(M.jsx)("div",{children:t},e)}))})}function z(t){var e=t.output,n=t.style;return Object(M.jsx)("div",{style:Object(C.a)({flexBasis:0,flexGrow:1,flexShrink:1,minWidth:0,alignSelf:"stretch",backgroundColor:I.LIGHT.toString(),padding:8,overflow:"scroll",scrollbarWidth:"none"},n),children:e})}function J(){var t=w(48,32),e=t.code,n=t.selection,i=t.selectionDelta,s=t.onMouseOver,o=t.onMouseDown,c=t.befunge;return Object(M.jsxs)(V,{children:[Object(M.jsx)(F,{code:e,selection:n,selectionDelta:i,onMouseOver:s,onMouseDown:o,limits:c.limits,cursor:c.cursor}),Object(M.jsxs)(G,{style:{marginTop:16,width:816,height:200},children:[Object(M.jsx)(q,{stack:c.stack}),Object(M.jsxs)(P,{style:{marginLeft:16},children:[Object(M.jsx)(S,{label:"Step",onClick:c.step}),Object(M.jsx)(S,{label:"Walk",onClick:c.walk,style:{marginTop:8}}),Object(M.jsx)(S,{label:"Run",onClick:c.run,style:{marginTop:8}}),Object(M.jsx)(S,{label:"Pause",onClick:c.pause,style:{marginTop:8}}),Object(M.jsx)(S,{label:"Reset",onClick:c.reset,style:{marginTop:8}})]}),Object(M.jsx)(z,{output:c.output,style:{marginLeft:16}})]})]})}var V=r.a.div(X||(X=Object(u.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n"]))),P=r.a.div(_||(_=Object(u.a)(["\n  align-self: stretch;\n  justify-content: space-between;\n  display: flex;\n  flex-direction: column;\n"])));var $=function(){return Object(M.jsx)("div",{style:{backgroundColor:I.DARK.toString(),display:"flex",minHeight:"100vh",padding:24,justifyContent:"center",alignItems:"center"},children:Object(M.jsx)(J,{})})};c.a.render(Object(M.jsx)(s.a.StrictMode,{children:Object(M.jsx)($,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.8f9f279b.chunk.js.map