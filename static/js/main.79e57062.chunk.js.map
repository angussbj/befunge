{"version":3,"sources":["logic/index.ts","utilities/Coordinate.ts","utilities/constArray2.ts","utilities/mapCharactersToNames.ts","utilities/modulo.ts","utilities/range.ts","utilities/sum.ts","utilities/useLocalStorageState.ts","logic/Befunge/index.ts","logic/Code.ts","logic/CodeEditor/CodeEditorOptions.ts","logic/CodeEditor/CodeEditor.ts","logic/Befunge/WalkingSpeed.ts","logic/Befunge/BefungeRunner.ts","logic/Befunge/CommandChar.ts","logic/Befunge/BefungeCore.ts","ui/Colors.ts","ui/useHover.ts","ui/Checkbox.tsx","ui/Hidden.tsx","ui/Row.tsx","ui/T.tsx","ui/TextField.tsx","ui/buttons/BaseButton.tsx","ui/buttons/Button.tsx","ui/buttons/IconButton.tsx","ui/buttons/MiniButton.tsx","ui/buttons/TextButton.tsx","ui/sidebars/Sidebar.tsx","ui/sidebars/SidebarTitle.tsx","ui/sidebars/SidebarSection.tsx","components/CodingSpace/Grid/Square.tsx","components/CodingSpace/Grid/Grid.tsx","components/CodingSpace/Grid/useBlink.ts","components/CodingSpace/Stack.tsx","components/CodingSpace/InputOutput/Input.tsx","components/CodingSpace/InputOutput/InputOutput.tsx","components/CodingSpace/ControlPanel/ExpandCollapseArrows.tsx","components/CodingSpace/ControlPanel/ControlPanelColumn.tsx","components/CodingSpace/ControlPanel/ExecutionControls.tsx","components/CodingSpace/ControlPanel/UnicodeCalculator.tsx","components/CodingSpace/ControlPanel/WalkingSpeedControl.tsx","components/CodingSpace/ControlPanel/ControlPanelRow.tsx","components/CodingSpace/ControlPanel/StateAndSpeed.tsx","components/CodingSpace/ControlPanel/EditorControls.tsx","components/CodingSpace/ControlPanel/ControlPanel.tsx","components/CodingSpace/CodingSpace.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/SquareBackground.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/befungeCommands.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/editorCommands.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/BefungeCommandRow.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/EditorCommandRow.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/InfoSidebarContent.tsx","components/InfoAndExamplesSidebars/ExampleSidebarContent/examples.tsx","components/InfoAndExamplesSidebars/ExampleSidebarContent/Example.tsx","components/InfoAndExamplesSidebars/ExampleSidebarContent/ExampleSidebarContent.tsx","components/InfoAndExamplesSidebars/InfoAndExamplesSidebars.tsx","components/Content.tsx","components/useGlobalBefungeState.ts","App.tsx","index.tsx"],"names":["Direction","Coordinate","x","y","this","other","k","horizontalDirection","DIRECTION_VECTOR","Right","Left","verticalDirection","Down","Up","Math","abs","majorVector","majorMax","minorVector","minorMax","constArray2","width","height","value","Array","fill","map","CHARACTER_NAMES","mapCharactersToNames","s","split","char","join","modulo","a","b","range","start","count","step","sum","numbers","reduce","partial","n","useLocalStorageState","storageKey","initialValue","useState","storedString","localStorage","getItem","JSON","parse","setValueState","useCallback","newValue","setItem","stringify","Code","code","resetPointWithEdits","resetPointWithoutEdits","breakpoints","clone","setToCopy","forEach","col","_element","undefined","cloneDeep","val","isResetable","withEdits","resetPoint","isEqual","CodeEditorOptions","useSelectionDirectionForCutCopyPaste","changeDirectionOnDirectionCharacters","CodeEditor","limits","executor","externalOnChange","selection","selectionDelta","direction","deleteMode","history","future","focus","hasFocus","options","autoBind","newFocusMethod","setHistoryPoint","reset","clearAll","paste","setTimeout","onChange","get","text","selectionForEach","cellAction","rowEndAction","directions","getMajorAndMinorDirections","push","createHistoryPoint","historyPointToGoBackTo","pop","revertToPoint","undo","futurePointToGoBackTo","redo","point","event","buttons","shiftKey","set","ctrlKey","metaKey","handleKeyboardShortcuts","key","length","handleEnteredCharacter","match","handleSelectionMovement","handleDeletion","clipboardData","setData","getSelectedText","preventDefault","clearSelection","getData","pasteCoords","newLineCoord","getDefaultIterationDirections","add","userPut","walkOrPause","runOrPause","slice","fillSelection","changeTypingDirectionIfNeeded","stepSelection","movementDirection","negative","directionVector","iterationCoord","minor","times","major","x0","min","y0","character","WalkingSpeed","render","delayIndex","delay","walkingDelays","canGoFaster","canGoSlower","BefungeRunner","core","walking","running","walkingSpeed","pause","run","walk","halted","makeResetable","requestingInput","stepOver","recur","slowStep","renderPeriodically","canStep","i","quickStep","cursorAtBreakpoint","cursor","input","acceptInput","copy","COMMAND_CHARS","BefungeCore","stack","output","stringMode","parseInt","charCodeAt","execute","getCursorCharacter","moveCursor","command","isValidCommand","throwUnrecognisedCommand","includes","toString","floor","Number","random","coord","equals","executionPut","String","fromCharCode","Colors","DARKEST","Color","DARKER","DARK","LIGHT","GREY","FOCUS","ACCENT_BLUE","ACCENT_ORANGE","SUPER_ACCENT","RED","BLUE","TRANSPARENT","alpha","useHover","setValue","ref","useRef","handleMouseOver","handleMouseOut","useEffect","node","current","addEventListener","removeEventListener","Checkbox","object","style","ariaLabel","renderHelper","setRenderHelper","hovered","color","fade","margin","checked","target","backgroundColor","icon","size","checkedIcon","aria-label","Hidden","children","overflow","clip","padding","border","position","Row","styled","div","T","unselectable","monospace","finalStyle","fontSize","fontFamily","UnselectableText","TextField","focusFirstRender","onSubmit","inputRef","className","e","onKeyDown","BaseButton","label","onClick","disabled","textStyle","textColor","minWidth","paddingLeft","paddingRight","borderRadius","toUpperCase","Button","rest","isLight","IconButton","MiniButton","marginBottom","maxWidth","minHeight","maxHeight","borderColor","TextButton","Sidebar","content","setOpen","open","pullRight","transitionTimeMs","visible","setVisible","isFirstRender","setIsFirstRender","sideMargin","timeoutRef","containerRef","clearTimeout","Container","transition","right","marginRight","left","marginLeft","top","SidebarTitle","SidebarSection","title","collapsible","startCollapsed","collapsed","setCollapsed","animateHeight","initialHeight","clientHeight","contentHeight","scrollHeight","marginTop","justifyContent","alignItems","FadeOut","UnMemoizedSquare","selectionOpacity","cursored","isBreakpoint","onMouseDown","onMouseOver","onDoubleClick","mix","Background","areEqual","prev","next","Square","React","memo","Grid","editor","focused","setFocused","setFocusMethod","isSelectedX","getSelectionCheckFunction","isSelectedY","enabled","blink","setBlink","interval","setInterval","clearInterval","useBlink","onFocus","onBlur","tabIndex","role","aria-live","aria-hidden","BlankCornerNumberBox","YNumberBox","XNumberBox","coordinate","delta","limit","modSum","Stack","flex","scrollbarWidth","reverse","index","Input","submitInput","inputType","setInput","parseInput","useMemo","charAt","replace","newVal","InputOutput","bottomMarkerRef","scrollingContainerRef","scrollTop","scrollIntoView","OutputContainer","OutputInnerScrollingContainer","InputContainer","fontWeight","ExpandCollapseArrows","columns","setColumns","showLeft","showRight","PositioningContainer","alignSelf","display","ControlPanelColumn","ExecutionControls","state","UnicodeCalculator","setChar","num","setNum","WalkingSpeedControl","goSlower","flexDirection","getSpeed","goFaster","ControlPanelRow","StateAndSpeed","DIRECTION_SYMBOL","getSelectedCharacter","EditorControls","setChangeDirectionOnDirectionCharacters","setUseSelectionDirectionForCutCopyPaste","ControlPanel","columnWidths","initialWidth","clientWidth","desiredWidth","OuterContainer","id","InnerContainer","gap","CodingSpace","flexShrink","Label","Column","flexGrow","SquareBackground","M","span","befungeCommands","description","customCommandStyle","editorCommands","saturate","BefungeCommandRow","commandComponent","EditorCommandRow","InfoSidebarContent","Title","href","examples","Example","navigator","clipboard","writeText","setCode","ExampleSidebarContent","exampleDetails","InfoAndExamplesSidebar","infoOpen","setInfoOpen","examplesOpen","setExamplesOpen","topRightAbsolute8px","topLeftAbsolute20px","Content","befungeState","document","onCut","onCopy","onPaste","cookieCode","useGlobalBefungeState","HorizontalScrollingContainer","CenteringContainer","App","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.79e57062.chunk.js","sourcesContent":["export * from \"./Befunge\";\nexport * from \"./Code\";\nexport * from \"./CodeEditor\";\nexport * from \"./GlobalBefungeState\";\n","export class Coordinate {\n  constructor(public x: number, public y: number) {}\n\n  set(x: number, y: number): Coordinate {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n\n  setToCopy(other: Coordinate): Coordinate {\n    this.x = other.x;\n    this.y = other.y;\n    return this;\n  }\n\n  setX(x: number): Coordinate {\n    this.x = x;\n    return this;\n  }\n\n  setY(y: number): Coordinate {\n    this.y = y;\n    return this;\n  }\n\n  add(other: Coordinate): Coordinate {\n    this.x += other.x;\n    this.y += other.y;\n    return this;\n  }\n\n  times(k: number): Coordinate {\n    this.x *= k;\n    this.y *= k;\n    return this;\n  }\n\n  negative(): Coordinate {\n    this.x = -this.x;\n    this.y = -this.y;\n    return this;\n  }\n\n  modulo(other: Coordinate): Coordinate {\n    this.x = ((this.x % other.x) + other.x) % other.x;\n    this.y = ((this.y % other.y) + other.y) % other.y;\n    return this;\n  }\n\n  equals(other: Coordinate): boolean {\n    return this.x === other.x && this.y === other.y;\n  }\n\n  clone(): Coordinate {\n    return new Coordinate(this.x, this.y);\n  }\n\n  toString(): string {\n    return `(${this.x}, ${this.y})`;\n  }\n\n  getMajorAndMinorDirections(): MajorMinorDirections {\n    const horizontalDirection =\n      this.x >= 0\n        ? DIRECTION_VECTOR[Direction.Right]\n        : DIRECTION_VECTOR[Direction.Left];\n    const verticalDirection =\n      this.y >= 0\n        ? DIRECTION_VECTOR[Direction.Down]\n        : DIRECTION_VECTOR[Direction.Up];\n    return Math.abs(this.x) >= Math.abs(this.y)\n      ? {\n          majorVector: horizontalDirection,\n          majorMax: Math.abs(this.x),\n          minorVector: verticalDirection,\n          minorMax: Math.abs(this.y),\n        }\n      : {\n          majorVector: verticalDirection,\n          majorMax: Math.abs(this.y),\n          minorVector: horizontalDirection,\n          minorMax: Math.abs(this.x),\n        };\n  }\n}\n\nexport interface MajorMinorDirections {\n  majorVector: Coordinate;\n  majorMax: number;\n  minorVector: Coordinate;\n  minorMax: number;\n}\n\nexport enum Direction {\n  Left,\n  Right,\n  Up,\n  Down,\n}\n\nexport const DIRECTION_VECTOR = {\n  [Direction.Left]: new Coordinate(-1, 0),\n  [Direction.Right]: new Coordinate(1, 0),\n  [Direction.Up]: new Coordinate(0, -1),\n  [Direction.Down]: new Coordinate(0, 1),\n};\n\nexport type DirectionName = keyof typeof Direction;\n","export function constArray2<T>(width: number, height: number, value: T): T[][] {\n  return Array(width)\n    .fill(false)\n    .map(() => Array(height).fill(value));\n}\n","const CHARACTER_NAMES = {\n  [\"+\"]: \"plus\",\n  [\"-\"]: \"minus\",\n  [\"*\"]: \"star\",\n  [\"/\"]: \"slash\",\n  [\"%\"]: \"percent\",\n  [\"`\"]: \"accent\",\n  [\"!\"]: \"exclamation\",\n  [\"?\"]: \"question\",\n  [\"^\"]: \"caret\",\n  [\">\"]: \"greater than\",\n  [\"<\"]: \"less than\",\n  [\"v\"]: \"V\",\n  [\"_\"]: \"underscore\",\n  [\"|\"]: \"pipe\",\n  ['\"']: \"double quote\",\n  [\":\"]: \"colon\",\n  [\"\\\\\"]: \"back slash\",\n  [\"$\"]: \"dollar\",\n  [\".\"]: \"dot\",\n  [\",\"]: \"comma\",\n  [\"&\"]: \"ampersand\",\n  [\"~\"]: \"tilde\",\n  [\"#\"]: \"hash\",\n  [\"g\"]: \"G\",\n  [\"p\"]: \"P\",\n  [\"@\"]: \"at\",\n  [\" \"]: \"space\",\n};\n\nexport function mapCharactersToNames(s: string): string {\n  return s\n    .split(\"\")\n    .map(\n      (char) => CHARACTER_NAMES[char as keyof typeof CHARACTER_NAMES] || char\n    )\n    .join(\" \");\n}\n","export function modulo(a: number, b: number): number {\n  return ((a % b) + b) % b;\n}\n","export function range(start: number, count: number, step = 1): number[] {\n  return count > 0\n    ? Array(count)\n        .fill(start)\n        .map((x, y) => x + step * y)\n    : [];\n}\n","export function sum(numbers: number[]): number {\n  return numbers.reduce((partial, n) => partial + n, 0);\n}\n","import { useCallback, useState } from \"react\";\n\nexport function useLocalStorageState<T>({\n  storageKey,\n  initialValue,\n}: {\n  storageKey: string;\n  initialValue: T;\n}): [T, (newValue: T) => void] {\n  const [value, setValueState] = useState<T>((): T => {\n    const storedString = localStorage.getItem(storageKey);\n    if (storedString === null) return initialValue;\n    return JSON.parse(storedString);\n  });\n\n  const setValue = useCallback((newValue: T) => {\n    setValueState(newValue);\n    localStorage.setItem(storageKey, JSON.stringify(newValue));\n  }, []);\n\n  return [value, setValue];\n}\n","export * from \"./BefungeRunner\";\nexport * from \"./BefungeCore\";\nexport * from \"./InputRequestStatus\";\n","import { cloneDeep, isEqual } from \"lodash\";\nimport { constArray2 } from \"utilities\";\n\nexport class Code {\n  public code: string[][];\n  protected resetPointWithEdits?: string[][];\n  protected resetPointWithoutEdits?: string[][];\n  public breakpoints: boolean[][];\n\n  constructor(private width: number, private height: number) {\n    this.code = constArray2(width, height, \" \");\n    this.breakpoints = constArray2(width, height, false);\n  }\n\n  public clone(): Code {\n    const clone = new Code(this.width, this.height);\n    clone.setToCopy(this);\n    return clone;\n  }\n\n  public set(code: string[][]): void {\n    this.code.forEach((col, x) =>\n      col.forEach((_element, y) => {\n        if (code[x]?.[y]) this.code[x][y] = code[x][y];\n      })\n    );\n    this.resetPointWithEdits = undefined;\n    this.resetPointWithoutEdits = undefined;\n  }\n\n  public setToCopy(other: Code): void {\n    this.code = cloneDeep(other.code);\n    this.resetPointWithEdits = cloneDeep(other.resetPointWithEdits);\n    this.resetPointWithoutEdits = cloneDeep(other.resetPointWithoutEdits);\n  }\n\n  public get(x: number, y: number): string {\n    return this.code[x][y];\n  }\n\n  public userPut(x: number, y: number, val: string): void {\n    this.code[x][y] = val;\n    if (this.resetPointWithEdits) this.resetPointWithEdits[x][y] = val;\n  }\n\n  public executionPut(x: number, y: number, val: string): void {\n    this.code[x][y] = val;\n  }\n\n  public makeResetable(): void {\n    if (!this.isResetable()) {\n      this.resetPointWithEdits = cloneDeep(this.code);\n      this.resetPointWithoutEdits = cloneDeep(this.code);\n    }\n  }\n\n  public reset(withEdits: boolean): void {\n    const resetPoint = withEdits\n      ? this.resetPointWithEdits\n      : this.resetPointWithoutEdits;\n    if (resetPoint) this.code = resetPoint;\n    this.resetPointWithEdits = undefined;\n    this.resetPointWithoutEdits = undefined;\n  }\n\n  public resetRequiresClarification(): boolean {\n    return !isEqual(this.resetPointWithEdits, this.resetPointWithoutEdits);\n  }\n\n  private isResetable(): boolean {\n    return !!this.resetPointWithEdits;\n  }\n}\n","export class CodeEditorOptions {\n  public useSelectionDirectionForCutCopyPaste =\n    localStorage.getItem(\"useSelectionDirectionForCutCopyPaste\") === \"true\";\n  public changeDirectionOnDirectionCharacters =\n    localStorage.getItem(\"changeDirectionOnDirectionCharacters\") === \"true\";\n\n  public setChangeDirectionOnDirectionCharacters(newValue: boolean): void {\n    this.changeDirectionOnDirectionCharacters = newValue;\n    localStorage.setItem(\n      \"changeDirectionOnDirectionCharacters\",\n      newValue ? \"true\" : \"false\"\n    );\n  }\n\n  public setUseSelectionDirectionForCutCopyPaste(newValue: boolean): void {\n    this.useSelectionDirectionForCutCopyPaste = newValue;\n    localStorage.setItem(\n      \"useSelectionDirectionForCutCopyPaste\",\n      newValue ? \"true\" : \"false\"\n    );\n  }\n}\n","import { MouseEvent } from \"react\";\nimport {\n  Coordinate,\n  Direction,\n  DIRECTION_VECTOR,\n  DirectionName,\n  MajorMinorDirections,\n} from \"utilities\";\nimport autoBind from \"auto-bind\";\nimport { Code } from \"../Code\";\nimport { BefungeRunner } from \"../Befunge\";\nimport { CodeEditorOptions } from \"./CodeEditorOptions\";\n\ntype DeleteMode = \"delete\" | \"backspace\";\n\ninterface CodeEditorHistoryPoint {\n  selection: Coordinate;\n  selectionDelta: Coordinate;\n  direction: Direction;\n  deleteMode: DeleteMode;\n}\n\nexport class CodeEditor {\n  public selection = new Coordinate(0, 0);\n  public selectionDelta = new Coordinate(0, 0);\n  public direction = Direction.Right;\n  private deleteMode: DeleteMode = \"delete\";\n  private history: CodeEditorHistoryPoint[] = [];\n  private future: CodeEditorHistoryPoint[] = [];\n\n  public focus?: () => void;\n  public hasFocus = false;\n  public options = new CodeEditorOptions();\n\n  constructor(\n    private code: Code,\n    private limits: Coordinate,\n    private executor: BefungeRunner,\n    private externalOnChange: (code: string) => void\n  ) {\n    autoBind(this);\n  }\n\n  private onChange(): void {\n    this.externalOnChange(JSON.stringify(this.code.code));\n  }\n\n  public setFocusMethod(newFocusMethod: () => void): void {\n    this.focus = newFocusMethod;\n  }\n\n  public setCode(code: string): void {\n    this.setHistoryPoint();\n    this.executor.reset();\n    this.selection = new Coordinate(0, 0);\n    this.selectionDelta = new Coordinate(0, 0);\n    this.clearAll();\n    this.paste(code);\n    setTimeout(this.onChange, 100);\n  }\n\n  public getSelectedCharacter(): string {\n    return this.code.get(this.selection.x, this.selection.y);\n  }\n\n  public getSelectedText(): string {\n    let text = \"\";\n    this.selectionForEach({\n      cellAction: (x: number, y: number): void => {\n        text += this.code.get(x, y);\n      },\n      rowEndAction: (): void => {\n        text += \"\\n\";\n      },\n      directions: this.options.useSelectionDirectionForCutCopyPaste\n        ? this.selectionDelta.getMajorAndMinorDirections()\n        : undefined,\n    });\n    return text;\n  }\n\n  public setHistoryPoint(): void {\n    this.history.push(this.createHistoryPoint());\n    this.future = [];\n    this.executor.setHistoryPoint();\n  }\n\n  public undo(): void {\n    const historyPointToGoBackTo = this.history.pop();\n    if (historyPointToGoBackTo) {\n      this.future.push(this.createHistoryPoint());\n      this.revertToPoint(historyPointToGoBackTo);\n      this.executor.undo();\n      this.onChange();\n    }\n  }\n\n  public redo(): void {\n    const futurePointToGoBackTo = this.future.pop();\n    if (futurePointToGoBackTo) {\n      this.history.push(this.createHistoryPoint());\n      this.revertToPoint(futurePointToGoBackTo);\n      this.executor.redo();\n      this.onChange();\n    }\n  }\n\n  private createHistoryPoint(): CodeEditorHistoryPoint {\n    return {\n      selection: this.selection.clone(),\n      selectionDelta: this.selectionDelta.clone(),\n      direction: this.direction,\n      deleteMode: this.deleteMode,\n    };\n  }\n\n  private revertToPoint(point?: CodeEditorHistoryPoint): void {\n    if (!point) return;\n    this.selection = point.selection;\n    this.selectionDelta = point.selectionDelta;\n    this.direction = point.direction;\n    this.deleteMode = point.deleteMode;\n  }\n\n  public onMouseDown(x: number, y: number): (event: MouseEvent) => void {\n    return (event: MouseEvent): void => {\n      if (event.buttons % 2 === 1) {\n        if (event.shiftKey) {\n          this.selectionDelta.set(x - this.selection.x, y - this.selection.y);\n        } else {\n          this.selection.set(x, y);\n          this.selectionDelta.set(0, 0);\n          this.deleteMode = \"delete\";\n          this.direction = Direction.Right;\n        }\n        this.onChange();\n      }\n    };\n  }\n\n  public onDoubleClick(x: number, y: number): () => void {\n    return (): void => {\n      this.code.breakpoints[x][y] = !this.code.breakpoints[x][y];\n      this.onChange();\n    };\n  }\n\n  public onMouseOver(x: number, y: number): (event: MouseEvent) => void {\n    return (event: MouseEvent): void => {\n      if (event.buttons % 2 === 1) {\n        this.selectionDelta.set(x - this.selection.x, y - this.selection.y);\n        this.onChange();\n      }\n    };\n  }\n\n  public onKeyDown(event: KeyboardEvent): void {\n    if (event.ctrlKey || event.metaKey) {\n      this.handleKeyboardShortcuts(event);\n    } else if (!this.hasFocus) {\n      return;\n    } else if (event.key.length === 1) {\n      this.handleEnteredCharacter(event);\n    } else if (event.key.match(/^Arrow/)) {\n      this.handleSelectionMovement(event);\n    } else if (event.key === \"Backspace\") {\n      this.handleDeletion();\n    }\n    this.onChange();\n  }\n\n  public onCut(event: ClipboardEvent): void {\n    if (!this.hasFocus) return;\n    this.setHistoryPoint();\n    event.clipboardData?.setData(\"text/plain\", this.getSelectedText());\n    event.preventDefault();\n    this.clearSelection();\n    this.onChange();\n  }\n\n  public onCopy(event: ClipboardEvent): void {\n    if (!this.hasFocus) return;\n    this.setHistoryPoint();\n    event.clipboardData?.setData(\"text/plain\", this.getSelectedText());\n    event.preventDefault();\n  }\n\n  public onPaste(event: ClipboardEvent): void {\n    if (!this.hasFocus) return;\n    this.setHistoryPoint();\n    const text = event.clipboardData?.getData(\"Text\");\n    if (text) this.paste(text);\n    this.onChange();\n  }\n\n  private paste(text: string): void {\n    const pasteCoords = this.selection.clone();\n    const newLineCoord = this.selection.clone();\n    const { majorVector, minorVector } = this.options\n      .useSelectionDirectionForCutCopyPaste\n      ? this.selectionDelta.getMajorAndMinorDirections()\n      : this.getDefaultIterationDirections();\n    text.split(\"\").forEach((char: string) => {\n      if (char === \"\\n\") {\n        newLineCoord.add(minorVector).modulo(this.limits);\n        pasteCoords.setToCopy(newLineCoord);\n      } else {\n        this.code.userPut(pasteCoords.x, pasteCoords.y, char);\n        pasteCoords.add(majorVector).modulo(this.limits);\n      }\n    });\n  }\n\n  // TOOD: should execution related keyboard interactions be handled somewhere else?\n  private handleKeyboardShortcuts(event: KeyboardEvent): void {\n    if (event.key === \"a\") {\n      this.selection.set(0, 0);\n      this.selectionDelta.setToCopy(this.limits).add(new Coordinate(-1, -1));\n      this.focus?.();\n    } else if (event.key === \"z\" && !event.shiftKey) {\n      this.undo();\n      this.focus?.();\n    } else if ((event.key === \"z\" && event.shiftKey) || event.key === \"y\") {\n      this.redo();\n      this.focus?.();\n    } else if (event.key === \"j\") {\n      this.executor.step();\n    } else if (event.key === \"k\") {\n      this.executor.walkOrPause();\n    } else if (event.key === \"l\") {\n      this.executor.runOrPause();\n    } else if (event.key === \";\") {\n      this.executor.reset();\n    } else if (event.key.match(/^Arrow/)) {\n      if (this.hasFocus)\n        this.direction = Direction[event.key.slice(5) as DirectionName];\n    } else {\n      return;\n    }\n    event.preventDefault();\n  }\n\n  private handleEnteredCharacter(event: KeyboardEvent): void {\n    this.setHistoryPoint();\n    this.fillSelection(event.key);\n    this.changeTypingDirectionIfNeeded(event.key);\n    this.stepSelection(DIRECTION_VECTOR[this.direction]);\n    this.deleteMode = \"backspace\";\n    event.preventDefault();\n  }\n\n  private handleSelectionMovement(event: KeyboardEvent): void {\n    const movementDirection = Direction[event.key.slice(5) as DirectionName];\n    if (event.shiftKey) {\n      this.selectionDelta.add(DIRECTION_VECTOR[movementDirection]);\n    } else {\n      this.stepSelection(DIRECTION_VECTOR[movementDirection]);\n      this.selectionDelta.set(0, 0);\n      event.preventDefault();\n    }\n    this.deleteMode = \"delete\";\n  }\n\n  private handleDeletion(): void {\n    this.setHistoryPoint();\n    if (this.deleteMode === \"backspace\") {\n      this.stepSelection(DIRECTION_VECTOR[this.direction].clone().negative());\n      this.clearSelection();\n    } else if (this.deleteMode === \"delete\") {\n      this.clearSelection();\n    }\n  }\n\n  private stepSelection(directionVector: Coordinate): void {\n    this.selection.add(directionVector).modulo(this.limits);\n  }\n\n  private clearSelection(): void {\n    this.fillSelection(\" \");\n  }\n\n  private clearAll(): void {\n    this.forEach({\n      cellAction: (x: number, y: number): void => {\n        this.code.userPut(x, y, \" \");\n      },\n    });\n  }\n\n  private fillSelection(char: string): void {\n    this.selectionForEach({\n      cellAction: (x: number, y: number): void => {\n        this.code.userPut(x, y, char);\n      },\n    });\n  }\n\n  private selectionForEach({\n    cellAction,\n    rowEndAction,\n    directions,\n  }: {\n    cellAction: (x: number, y: number) => void;\n    rowEndAction?: () => void;\n    directions?: MajorMinorDirections;\n  }): void {\n    const { start, majorVector, majorMax, minorVector, minorMax } = directions\n      ? { start: this.selection, ...directions }\n      : this.getDefaultIterationDirections();\n    const iterationCoord = start.clone();\n    for (let minor = 0; minor <= minorMax; minor++) {\n      iterationCoord.setToCopy(start);\n      iterationCoord.add(minorVector.clone().times(minor)).modulo(this.limits);\n      for (let major = 0; major <= majorMax; major++) {\n        cellAction(iterationCoord.x, iterationCoord.y);\n        iterationCoord.add(majorVector).modulo(this.limits);\n      }\n      rowEndAction?.();\n    }\n  }\n\n  private forEach({\n    cellAction,\n    rowEndAction,\n  }: {\n    cellAction: (x: number, y: number) => void;\n    rowEndAction?: () => void;\n  }): void {\n    for (let x = 0; x < this.limits.x; x++) {\n      for (let y = 0; y < this.limits.y; y++) {\n        cellAction(x, y);\n      }\n      rowEndAction?.();\n    }\n  }\n\n  private getDefaultIterationDirections(): {\n    start: Coordinate;\n  } & MajorMinorDirections {\n    const x0 = Math.min(\n      this.selection.x,\n      this.selection.x + this.selectionDelta.x\n    );\n    const y0 = Math.min(\n      this.selection.y,\n      this.selection.y + this.selectionDelta.y\n    );\n    return {\n      start: new Coordinate(x0, y0),\n      majorVector: DIRECTION_VECTOR[Direction.Right],\n      majorMax: Math.abs(this.selectionDelta.x),\n      minorVector: DIRECTION_VECTOR[Direction.Down],\n      minorMax: Math.abs(this.selectionDelta.y),\n    };\n  }\n\n  private changeTypingDirectionIfNeeded(character: string): void {\n    if (this.options.changeDirectionOnDirectionCharacters) {\n      if (character === \"<\") this.direction = Direction.Left;\n      if (character === \">\") this.direction = Direction.Right;\n      if (character === \"^\") this.direction = Direction.Up;\n      if (character === \"v\") this.direction = Direction.Down;\n    }\n  }\n}\n","import autoBind from \"auto-bind\";\n\nexport class WalkingSpeed {\n  private delayIndex = 2;\n  public delay = WalkingSpeed.walkingDelays[this.delayIndex];\n  private static walkingDelays = [1, 64, 256, 1024, 2048];\n\n  constructor(private render?: () => void) {\n    autoBind(this);\n  }\n\n  public goFaster(): void {\n    if (this.canGoFaster()) {\n      this.delayIndex -= 1;\n      this.delay = WalkingSpeed.walkingDelays[this.delayIndex];\n      this.render?.();\n    }\n  }\n\n  public goSlower(): void {\n    if (this.canGoSlower()) {\n      this.delayIndex += 1;\n      this.delay = WalkingSpeed.walkingDelays[this.delayIndex];\n      this.render?.();\n    }\n  }\n\n  public canGoSlower(): boolean {\n    return this.delayIndex < WalkingSpeed.walkingDelays.length - 1;\n  }\n\n  public canGoFaster(): boolean {\n    return this.delayIndex > 0;\n  }\n\n  public getSpeed(): number {\n    return WalkingSpeed.walkingDelays.length - this.delayIndex;\n  }\n}\n","import autoBind from \"auto-bind\";\nimport { BefungeCore } from \"./BefungeCore\";\nimport { Code } from \"../Code\";\nimport { Coordinate } from \"utilities\";\nimport { BefungeHistoryPoint } from \"./BefungeHistoryPoint\";\nimport { WalkingSpeed } from \"./WalkingSpeed\";\n\nexport const RUNNING_RENDER_PERIOD = 1000;\n\nexport class BefungeRunner {\n  public walking = false;\n  public running = false;\n  private history: BefungeHistoryPoint[] = [];\n  private future: BefungeHistoryPoint[] = [];\n  public walkingSpeed: WalkingSpeed;\n\n  constructor(\n    limits: Coordinate,\n    private code: Code,\n    private core: BefungeCore,\n    private render?: () => void\n  ) {\n    this.walkingSpeed = new WalkingSpeed(this.render);\n    autoBind(this);\n  }\n\n  public runOrPause(): void {\n    if (this.running) this.pause();\n    else this.run();\n  }\n\n  public walkOrPause(): void {\n    if (this.walking) this.pause();\n    else this.walk();\n  }\n\n  private walk(): void {\n    function recur(b: BefungeRunner): () => void {\n      return (): void => {\n        if (b.walking && !b.core.requestingInput) {\n          b.slowStep();\n          setTimeout(recur(b), b.walkingSpeed.delay);\n        }\n      };\n    }\n\n    if (this.core.halted) return;\n    this.code.makeResetable();\n    this.walking = true;\n    this.running = false;\n    if (!this.core.requestingInput) this.stepOver();\n    setTimeout(recur(this), this.walkingSpeed.delay);\n  }\n\n  private run(): void {\n    function recur(b: BefungeRunner): () => void {\n      return (): void => {\n        for (let i = 0; i < 1000; i++) {\n          if (b.running && b.core.canStep()) b.quickStep();\n        }\n        if (b.running && b.core.canStep()) setTimeout(recur(b), 1);\n      };\n    }\n\n    function renderPeriodically(b: BefungeRunner): () => void {\n      return (): void => {\n        if (b.running && b.core.canStep()) {\n          setTimeout(() => {\n            b.render?.();\n            renderPeriodically(b);\n          }, RUNNING_RENDER_PERIOD);\n        }\n      };\n    }\n\n    if (this.core.halted) return;\n    this.code.makeResetable();\n    this.walking = false;\n    this.running = true;\n    if (!this.core.requestingInput) this.stepOver();\n    renderPeriodically(this);\n    recur(this)();\n  }\n\n  private pause(): void {\n    this.walking = false;\n    this.running = false;\n    this.render?.();\n  }\n\n  public reset(): void {\n    this.walking = false;\n    this.running = false;\n    this.code.reset(true);\n    this.core.reset();\n    this.render?.();\n  }\n\n  public step(): void {\n    if (this.core.requestingInput) return;\n    this.code.makeResetable();\n    this.stepOver();\n  }\n\n  private quickStep(): void {\n    if (this.cursorAtBreakpoint()) this.pause();\n    else this.core.step();\n  }\n\n  private slowStep(): void {\n    if (this.cursorAtBreakpoint()) this.pause();\n    else {\n      this.core.step();\n      this.render?.();\n    }\n  }\n\n  private stepOver(): void {\n    this.core.step();\n    this.render?.();\n  }\n\n  private cursorAtBreakpoint(): boolean {\n    const { x, y } = this.core.cursor;\n    return this.code.breakpoints[x][y];\n  }\n\n  public acceptInput(input: string): void {\n    this.core.acceptInput(input);\n    this.render?.();\n    if (this.running) this.run();\n    if (this.walking) this.walk();\n  }\n\n  public setHistoryPoint(): void {\n    this.history.push(this.createHistoryPoint());\n    this.future = [];\n  }\n\n  public undo(): void {\n    this.future.push(this.createHistoryPoint());\n    const point = this.history.pop();\n    this.revertToPoint(point);\n  }\n\n  public redo(): void {\n    this.history.push(this.createHistoryPoint());\n    const point = this.future.pop();\n    this.revertToPoint(point);\n  }\n\n  private createHistoryPoint(): BefungeHistoryPoint {\n    return {\n      core: this.core.copy(),\n      walking: this.walking,\n      running: this.running,\n      code: this.code.clone(),\n    };\n  }\n\n  private revertToPoint(point?: BefungeHistoryPoint): void {\n    if (!point) return;\n    this.core.set(point.core);\n    this.walking = point.walking;\n    this.running = point.running;\n    this.code.setToCopy(point.code);\n  }\n}\n","export const COMMAND_CHARS = [\n  \"0\",\n  \"1\",\n  \"2\",\n  \"3\",\n  \"4\",\n  \"5\",\n  \"6\",\n  \"7\",\n  \"8\",\n  \"9\",\n  \"+\",\n  \"-\",\n  \"/\",\n  \"*\",\n  \"%\",\n  \"!\",\n  \"`\",\n  \">\",\n  \"<\",\n  \"^\",\n  \"v\",\n  \"?\",\n  \"_\",\n  \"|\",\n  '\"',\n  \":\",\n  \"\\\\\",\n  \"$\",\n  \"#\",\n  \"g\",\n  \"p\",\n  \"@\",\n  \".\",\n  \",\",\n  \"&\",\n  \"~\",\n  \" \",\n] as const;\n\nexport type CommandChar = typeof COMMAND_CHARS[number];\n","import autoBind from \"auto-bind\";\nimport { COMMAND_CHARS, CommandChar } from \"./CommandChar\";\nimport { Code } from \"../Code\";\nimport { cloneDeep } from \"lodash\";\nimport { Coordinate, Direction, DIRECTION_VECTOR } from \"utilities\";\nimport { BefungeCoreData } from \"./BefungeCoreData\";\nimport { InputRequestStatus } from \"./InputRequestStatus\";\n\nexport class BefungeCore {\n  public cursor: Coordinate = new Coordinate(0, 0);\n  public direction = Direction.Right;\n  public stack: number[] = [];\n  public output = \"\";\n  public stringMode = false;\n  public requestingInput: InputRequestStatus = false;\n  public halted = false;\n\n  constructor(private limits: Coordinate, private code: Code) {\n    autoBind(this);\n  }\n\n  public copy(): BefungeCoreData {\n    return {\n      cursor: this.cursor.clone(),\n      direction: this.direction,\n      stack: cloneDeep(this.stack),\n      output: this.output,\n      stringMode: this.stringMode,\n      halted: this.halted,\n    };\n  }\n\n  public set(point?: BefungeCoreData): void {\n    if (!point) return;\n    this.cursor.setToCopy(point.cursor);\n    this.direction = point.direction;\n    this.stack = point.stack;\n    this.output = point.output;\n    this.stringMode = point.stringMode;\n    this.halted = point.halted;\n  }\n\n  public reset(): void {\n    this.cursor = new Coordinate(0, 0);\n    this.direction = Direction.Right;\n    this.stack = [];\n    this.output = \"\";\n    this.stringMode = false;\n    this.requestingInput = false;\n    this.halted = false;\n  }\n\n  private moveCursor(): void {\n    this.cursor.add(DIRECTION_VECTOR[this.direction]);\n    this.cursor.modulo(this.limits);\n  }\n\n  public acceptInput(input: string): void {\n    if (input.length === 0) return;\n    if (\n      this.requestingInput === \"number\" ||\n      this.requestingInput === \"divideBy0\"\n    ) {\n      this.stack.push(parseInt(input, 10));\n    } else if (this.requestingInput === \"character\") {\n      this.stack.push(input.charCodeAt(0));\n    }\n    this.requestingInput = false;\n  }\n\n  public canStep(): boolean {\n    return !this.halted && !this.requestingInput;\n  }\n\n  public step(): void {\n    if (!this.halted) {\n      this.execute(this.getCursorCharacter());\n      this.moveCursor();\n    }\n  }\n\n  public getCursorCharacter(): string {\n    return this.code.get(this.cursor.x, this.cursor.y);\n  }\n\n  public execute(command: string): void {\n    if (this.stringMode && command !== '\"')\n      this.stack.push(command.charCodeAt(0));\n    else if (this.isValidCommand(command)) this[command]();\n    else this.throwUnrecognisedCommand(command, this.cursor);\n  }\n\n  private isValidCommand(command: string): command is CommandChar {\n    return COMMAND_CHARS.includes(command as CommandChar);\n  }\n\n  private throwUnrecognisedCommand(command: string, cursor: Coordinate): void {\n    this.output += `\\nError: Unrecognised command \"${command}\" at ${cursor.toString()}`;\n    this.halted = true;\n  }\n\n  // Instructions\n  private [\"0\"](): void {\n    this.stack.push(0);\n  }\n\n  private [\"1\"](): void {\n    this.stack.push(1);\n  }\n\n  private [\"2\"](): void {\n    this.stack.push(2);\n  }\n\n  private [\"3\"](): void {\n    this.stack.push(3);\n  }\n\n  private [\"4\"](): void {\n    this.stack.push(4);\n  }\n\n  private [\"5\"](): void {\n    this.stack.push(5);\n  }\n\n  private [\"6\"](): void {\n    this.stack.push(6);\n  }\n\n  private [\"7\"](): void {\n    this.stack.push(7);\n  }\n\n  private [\"8\"](): void {\n    this.stack.push(8);\n  }\n\n  private [\"9\"](): void {\n    this.stack.push(9);\n  }\n\n  private [\"+\"](): void {\n    this.stack.push((this.stack.pop() ?? 0) + (this.stack.pop() ?? 0));\n  }\n\n  private [\"-\"](): void {\n    this.stack.push(-(this.stack.pop() ?? 0) + (this.stack.pop() ?? 0));\n  }\n\n  private [\"/\"](): void {\n    const a = this.stack.pop() ?? 0;\n    const b = this.stack.pop() ?? 1;\n    if (a === 0) this.requestingInput = \"divideBy0\";\n    else this.stack.push(Math.floor(b / a));\n  }\n\n  private [\"*\"](): void {\n    this.stack.push((this.stack.pop() ?? 1) * (this.stack.pop() ?? 1));\n  }\n\n  private [\"%\"](): void {\n    const a = this.stack.pop() ?? 1;\n    const b = this.stack.pop() ?? 1;\n    this.stack.push(b % a);\n  }\n\n  private [\"!\"](): void {\n    this.stack.push(Number(!this.stack.pop()));\n  }\n\n  private [\"`\"](): void {\n    const a = this.stack.pop() ?? 0;\n    const b = this.stack.pop() ?? 0;\n    this.stack.push(Number(a < b));\n  }\n\n  private [\">\"](): void {\n    this.direction = Direction.Right;\n  }\n\n  private [\"<\"](): void {\n    this.direction = Direction.Left;\n  }\n\n  private [\"^\"](): void {\n    this.direction = Direction.Up;\n  }\n\n  private [\"v\"](): void {\n    this.direction = Direction.Down;\n  }\n\n  private [\"?\"](): void {\n    this.direction = Math.floor(Math.random() * 4);\n  }\n\n  private [\"_\"](): void {\n    this.direction = this.stack.pop() ? Direction.Left : Direction.Right;\n  }\n\n  private [\"|\"](): void {\n    this.direction = this.stack.pop() ? Direction.Up : Direction.Down;\n  }\n\n  private ['\"'](): void {\n    this.stringMode = !this.stringMode;\n  }\n\n  private [\":\"](): void {\n    this.stack.push(this.stack[this.stack.length - 1]);\n  }\n\n  private [\"\\\\\"](): void {\n    const a = this.stack.pop();\n    const b = this.stack.pop();\n    if (a !== undefined) this.stack.push(a);\n    if (b !== undefined) this.stack.push(b);\n  }\n\n  private [\"$\"](): void {\n    this.stack.pop();\n  }\n\n  private [\"#\"](): void {\n    this.moveCursor();\n  }\n\n  private [\"g\"](): void {\n    const y = this.stack.pop() ?? 0;\n    const x = this.stack.pop() ?? 0;\n    const coord = new Coordinate(x, y);\n    if (coord.clone().modulo(this.limits).equals(coord))\n      this.stack.push(this.code.get(x, y).charCodeAt(0));\n    else this.stack.push(0);\n  }\n\n  private [\"p\"](): void {\n    const y = this.stack.pop() ?? 0;\n    const x = this.stack.pop() ?? 0;\n    this.code.executionPut(x, y, String.fromCharCode(this.stack.pop() ?? 32)); // 32 is [space]\n  }\n\n  private [\".\"](): void {\n    this.output += (this.stack.pop() ?? 0).toString(10);\n  }\n\n  private [\",\"](): void {\n    const a = this.stack.pop();\n    if (a !== undefined) this.output += String.fromCharCode(a);\n  }\n\n  private [\"&\"](): void {\n    this.requestingInput = \"number\";\n  }\n\n  private [\"~\"](): void {\n    this.requestingInput = \"character\";\n  }\n\n  private [\"@\"](): void {\n    this.halted = true;\n  }\n\n  private [\" \"](): void {} // eslint-disable-line @typescript-eslint/no-empty-function\n}\n","import Color from \"color\";\n\nexport const Colors = {\n  DARKEST: Color(\"#0d1416\"),\n  DARKER: Color(\"#1d2426\"),\n  DARK: Color(\"#283134\"),\n  LIGHT: Color(\"#f7f9f9\"),\n  GREY: Color(\"#CCCCCC\"),\n  FOCUS: Color(\"#5577FF\"),\n  ACCENT_BLUE: Color(\"#5ed6ff\"),\n  ACCENT_ORANGE: Color(\"#FF875E\"),\n  SUPER_ACCENT: Color(\"#ff6e3d\"),\n  RED: Color(\"#FF0000\"),\n  BLUE: Color(\"#0000FF\"),\n  TRANSPARENT: Color(\"#000000\").alpha(0),\n};\n","import { useState, useRef, useEffect } from \"react\";\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function useHover(): [React.MutableRefObject<any>, boolean] {\n  const [value, setValue] = useState(false);\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const ref: any = useRef(null);\n\n  const handleMouseOver = (): void => setValue(true);\n  const handleMouseOut = (): void => setValue(false);\n\n  useEffect((): void | (() => void) => {\n    const node = ref.current;\n    if (node) {\n      node.addEventListener(\"mouseover\", handleMouseOver);\n      node.addEventListener(\"mouseout\", handleMouseOut);\n\n      return (): void => {\n        node.removeEventListener(\"mouseover\", handleMouseOver);\n        node.removeEventListener(\"mouseout\", handleMouseOut);\n      };\n    }\n  }, []);\n\n  return [ref, value];\n}\n","import React, { useState } from \"react\";\nimport { ImCheckboxChecked, ImCheckboxUnchecked } from \"react-icons/im\";\nimport MaterialUICheckbox from \"@material-ui/core/Checkbox\";\nimport { Colors } from \"./Colors\";\nimport { useHover } from \"./useHover\";\n\ninterface Props<T extends string> {\n  object: { [key in T]: boolean };\n  k: T;\n  onChange: (newValue: boolean) => void;\n  style?: React.CSSProperties;\n  ariaLabel?: string;\n}\n\nexport function Checkbox<T extends string>({\n  object,\n  k,\n  onChange,\n  style,\n  ariaLabel,\n}: Props<T>): React.ReactElement {\n  const [renderHelper, setRenderHelper] = useState(false);\n  const [ref, hovered] = useHover();\n  const color = Colors.ACCENT_BLUE.fade(hovered ? 0.2 : 0).toString();\n\n  return (\n    <div style={style} ref={ref}>\n      <div style={{ margin: -4 }}>\n        <MaterialUICheckbox\n          checked={object[k]}\n          onChange={(event): void => {\n            onChange(event.target.checked);\n            setRenderHelper(!renderHelper);\n          }}\n          style={{\n            color: Colors.ACCENT_BLUE.toString(),\n            backgroundColor: \"transparent\",\n          }}\n          icon={<ImCheckboxUnchecked size={11} color={color} />}\n          checkedIcon={<ImCheckboxChecked size={11} color={color} />}\n          aria-label={ariaLabel}\n        />\n      </div>\n    </div>\n  );\n}\n","import React, { ReactNode } from \"react\";\n\ninterface Props {\n  children?: ReactNode;\n}\n\nexport function Hidden({ children }: Props): React.ReactElement {\n  return (\n    <span\n      style={{\n        overflow: \"hidden\",\n        clip: \"rect(0 0 0 0)\",\n        height: 1,\n        width: 1,\n        margin: -1,\n        padding: 0,\n        border: 0,\n        position: \"absolute\",\n      }}\n    >\n      {children}\n    </span>\n  );\n}\n","import styled from \"styled-components\";\n\nexport const Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Colors } from \"./Colors\";\nimport Color from \"color\";\n\ninterface Props {\n  size?: \"small\" | \"tiny\";\n  color?: Color;\n  children: React.ReactNode;\n  unselectable?: boolean;\n  monospace?: boolean;\n  style?: React.CSSProperties;\n}\n\nexport function T({\n  size,\n  color,\n  unselectable,\n  monospace,\n  children,\n  style,\n}: Props): React.ReactElement {\n  const finalStyle = {\n    color: (color || Colors.LIGHT.fade(0.2)).toString(),\n    fontSize:\n      size === \"tiny\" ? 8 : size === \"small\" ? 11 : size === \"big\" ? 16 : 12,\n    fontFamily: monospace ? \"monospace\" : undefined,\n    ...style,\n  };\n\n  return unselectable ? (\n    <UnselectableText style={finalStyle}>{children}</UnselectableText>\n  ) : (\n    <div style={finalStyle}>{children}</div>\n  );\n}\n\nconst UnselectableText = styled.div`\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n`;\n","import React, { useEffect, useRef } from \"react\";\nimport \"./TextField.css\";\n\ninterface Props {\n  value: string | number;\n  onChange: (newVal: string) => void;\n  style: React.CSSProperties;\n  focusFirstRender?: boolean;\n  onSubmit?: () => void;\n  ariaLabel?: string;\n}\n\nexport function TextField({\n  value,\n  onChange,\n  style,\n  focusFirstRender,\n  onSubmit,\n  ariaLabel,\n}: Props): React.ReactElement {\n  const inputRef = useRef<HTMLInputElement>(null);\n  useEffect(() => {\n    if (focusFirstRender) inputRef.current?.focus();\n  }, []);\n\n  return (\n    <input\n      ref={inputRef}\n      value={value}\n      className=\"input\"\n      onChange={(e): void => {\n        onChange(e.target.value);\n      }}\n      onKeyDown={(e): void => {\n        if (e.key === \"Enter\") onSubmit?.();\n      }}\n      aria-label={ariaLabel}\n      style={style}\n    />\n  );\n}\n","import React from \"react\";\nimport { T } from \"../T\";\nimport Color from \"color\";\nimport { useHover } from \"../useHover\";\n\nexport interface ButtonProps {\n  label: string | React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  textStyle?: React.CSSProperties;\n  backgroundColor?: Color;\n  textColor: Color;\n  borderColor?: Color;\n  ariaLabel?: string;\n}\n\nexport function BaseButton({\n  label,\n  onClick,\n  disabled,\n  style,\n  textStyle,\n  backgroundColor,\n  textColor,\n  ariaLabel,\n}: ButtonProps): React.ReactElement {\n  const [ref, hovered] = useHover();\n  const fade = disabled ? 0.4 : hovered ? 0.15 : 0;\n\n  return (\n    <button\n      onClick={onClick}\n      style={{\n        minWidth: 60,\n        paddingLeft: 12,\n        paddingRight: 12,\n        height: 32,\n        borderRadius: 4,\n        border: \"none\",\n        cursor: disabled ? \"default\" : \"pointer\",\n        backgroundColor:\n          backgroundColor?.fade(fade).toString() || \"transparent\",\n        ...style,\n      }}\n      ref={ref}\n      aria-label={ariaLabel}\n    >\n      <T color={textColor.fade(fade)} style={textStyle}>\n        {typeof label === \"string\" ? label.toUpperCase() : label}\n      </T>\n    </button>\n  );\n}\n","import React from \"react\";\nimport { BaseButton } from \"./BaseButton\";\nimport Color from \"color\";\nimport { Colors } from \"../Colors\";\n\ninterface Props {\n  label: React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  color?: Color;\n}\n\nexport function Button({\n  color = Colors.LIGHT.fade(0.2),\n  ...rest\n}: Props): React.ReactElement {\n  return (\n    <BaseButton\n      backgroundColor={color || Colors.LIGHT.fade(0.2)}\n      textColor={color.isLight() ? Colors.DARKEST : Colors.LIGHT}\n      {...rest}\n    />\n  );\n}\n","import React from \"react\";\nimport { IconButton as MuiIconButton } from \"@material-ui/core\";\nimport { useHover } from \"../useHover\";\nimport Color from \"color\";\nimport { Colors } from \"../Colors\";\n\ninterface Props {\n  onClick: () => void;\n  color?: Color;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  children: React.ReactNode;\n  \"aria-label\"?: string;\n}\n\nexport function IconButton({\n  color = Colors.ACCENT_BLUE,\n  disabled,\n  style,\n  children,\n  ...rest\n}: Props): React.ReactElement {\n  const [ref, hovered] = useHover();\n  const fade = disabled ? 0.4 : hovered ? 0.15 : 0;\n\n  return (\n    <MuiIconButton\n      style={{\n        color: color?.fade(fade).toString(),\n        ...style,\n      }}\n      ref={ref}\n      disabled={disabled}\n      {...rest}\n    >\n      {children}\n    </MuiIconButton>\n  );\n}\n","import React from \"react\";\nimport { Colors } from \"../Colors\";\nimport Color from \"color\";\nimport { BaseButton } from \"./BaseButton\";\n\ninterface Props {\n  label: React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  color?: Color;\n  ariaLabel?: string;\n}\n\nexport function MiniButton({\n  label,\n  color = Colors.LIGHT.fade(0.2),\n  style,\n  ...rest\n}: Props): React.ReactElement {\n  return (\n    <BaseButton\n      label={<div style={{ marginBottom: 2.4 }}>{label}</div>}\n      style={{\n        minWidth: 16,\n        maxWidth: 16,\n        minHeight: 16,\n        maxHeight: 16,\n        padding: 0,\n        ...style,\n      }}\n      borderColor={color}\n      textColor={color}\n      {...rest}\n    />\n  );\n}\n","import React from \"react\";\nimport { Colors } from \"../Colors\";\nimport Color from \"color\";\nimport { BaseButton } from \"./BaseButton\";\n\ninterface Props {\n  label: React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  color?: Color;\n}\n\nexport function TextButton({\n  color = Colors.ACCENT_BLUE,\n  style,\n  ...rest\n}: Props): React.ReactElement {\n  return (\n    <BaseButton\n      style={{\n        minWidth: 16,\n        maxWidth: 16,\n        minHeight: 16,\n        maxHeight: 16,\n        padding: 0,\n        ...style,\n      }}\n      textColor={color}\n      textStyle={{ fontSize: 18 }}\n      {...rest}\n    />\n  );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport styled from \"styled-components\";\nimport { IconButton } from \"ui\";\nimport { Colors } from \"../Colors\";\n\ninterface Props {\n  content: React.ReactElement;\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  pullRight?: boolean;\n  width?: number;\n  padding?: number;\n  transitionTimeMs?: number;\n}\n\nexport function Sidebar({\n  content,\n  setOpen,\n  open,\n  pullRight,\n  width = 240,\n  padding = 24,\n  transitionTimeMs = 300,\n}: Props): React.ReactElement {\n  const [visible, setVisible] = useState(open);\n\n  const [isFirstRender, setIsFirstRender] = useState(true);\n  useEffect(() => setIsFirstRender(false), []);\n  const sideMargin = open && !isFirstRender ? 0 : -(width + 2 * padding);\n\n  const timeoutRef = useRef<ReturnType<typeof setTimeout>>();\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    if (open) {\n      setVisible(true);\n    } else {\n      timeoutRef.current = setTimeout(\n        () => setVisible(false),\n        transitionTimeMs\n      );\n    }\n  }, [open]);\n\n  return (\n    <Container\n      style={{\n        transition: `margin ${transitionTimeMs}ms`,\n        width,\n        padding,\n        ...(pullRight\n          ? { right: 0, marginRight: sideMargin }\n          : { left: 0, marginLeft: sideMargin }),\n      }}\n      ref={containerRef}\n    >\n      {visible && (\n        <>\n          <IconButton\n            aria-label=\"close-side-bar\"\n            style={{\n              position: \"absolute\",\n              top: 8,\n              right: 8,\n            }}\n            onClick={(): void => setOpen(false)}\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n          {content}\n        </>\n      )}\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  font-size: 12px;\n  overflow-y: auto;\n  color: ${Colors.LIGHT.fade(0.2).toString()};\n  background-color: ${Colors.DARKER.toString()};\n  z-index: 10;\n`;\n","import styled from \"styled-components\";\nimport { Colors } from \"../Colors\";\n\nexport const SidebarTitle = styled.div`\n  color: ${Colors.LIGHT.toString()};\n  font-size: 18px;\n`;\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { Colors } from \"../Colors\";\nimport { Row } from \"../Row\";\nimport { SidebarTitle } from \"./SidebarTitle\";\nimport styled from \"styled-components\";\nimport { IconButton } from \"ui\";\nimport { AiOutlineMinus, AiOutlinePlus } from \"react-icons/ai\";\n\ninterface Props {\n  title: string;\n  children: React.ReactNode;\n  collapsible?: boolean;\n  startCollapsed?: boolean;\n  transitionTimeMs?: number;\n}\n\nexport function SidebarSection({\n  title,\n  children,\n  collapsible = false,\n  startCollapsed = collapsible,\n  transitionTimeMs = 200,\n}: Props): React.ReactElement {\n  const [collapsed, setCollapsed] = useState(startCollapsed);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const timeoutRef = useRef<ReturnType<typeof setTimeout>>();\n\n  // TODO: Generify, tidy, and extract this\n  const animateHeight = useCallback((collapsed: boolean): void => {\n    if (!containerRef.current) return;\n    const initialHeight = containerRef.current.clientHeight;\n    const contentHeight = containerRef.current.scrollHeight;\n\n    containerRef.current.style.maxHeight = initialHeight + \"px\";\n    timeoutRef.current = setTimeout(() => {\n      if (!containerRef.current) return;\n      if (collapsed) {\n        containerRef.current.style.maxHeight = \"160px\";\n      } else {\n        containerRef.current.style.maxHeight = contentHeight + \"px\";\n        timeoutRef.current = setTimeout(() => {\n          if (containerRef.current) containerRef.current.style.maxHeight = \"\";\n        }, transitionTimeMs);\n      }\n    }, 1);\n  }, []);\n\n  useEffect(() => {\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    if (containerRef.current) animateHeight(collapsed);\n    else {\n      timeoutRef.current = setTimeout(() => animateHeight(collapsed), 1);\n    }\n  }, [collapsed]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (containerRef.current)\n        containerRef.current.style.transition = `max-height ${transitionTimeMs}ms`;\n    }, 100);\n  }, [transitionTimeMs]);\n\n  return (\n    <>\n      <div\n        style={{\n          overflow: \"hidden\",\n          position: \"relative\",\n          marginTop: 24,\n        }}\n        ref={containerRef}\n      >\n        <Row\n          style={{\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            marginBottom: 12,\n          }}\n        >\n          <SidebarTitle>{title}</SidebarTitle>\n          {collapsible && (\n            <IconButton\n              style={{ marginRight: -4 }}\n              onClick={(): void => setCollapsed(!collapsed)}\n            >\n              {collapsed ? (\n                <AiOutlinePlus size={12} />\n              ) : (\n                <AiOutlineMinus size={12} />\n              )}\n            </IconButton>\n          )}\n        </Row>\n        {children}\n        {collapsed && <FadeOut onClick={(): void => setCollapsed(false)} />}\n      </div>\n    </>\n  );\n}\n\nconst FadeOut = styled.div`\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 40px;\n  background: linear-gradient(transparent, ${Colors.DARKER.toString()});\n`;\n","import React, { MouseEvent } from \"react\";\nimport styled from \"styled-components\";\nimport { Colors } from \"ui\";\n\ninterface Props {\n  val: string;\n  selectionOpacity?: number | false;\n  cursored?: boolean;\n  isBreakpoint?: boolean;\n  onMouseDown?: (e: MouseEvent) => void;\n  onMouseOver?: (e: MouseEvent) => void;\n  onDoubleClick?: () => void;\n}\n\nfunction UnMemoizedSquare({\n  val,\n  selectionOpacity = false,\n  cursored,\n  isBreakpoint,\n  onMouseDown,\n  onMouseOver,\n  onDoubleClick,\n}: Props): React.ReactElement {\n  let color = Colors.TRANSPARENT;\n  if (selectionOpacity) color = color.mix(Colors.ACCENT_BLUE, selectionOpacity);\n  if (cursored) color = color.mix(Colors.ACCENT_ORANGE, 0.3);\n  if (isBreakpoint)\n    color = cursored ? color.mix(Colors.BLUE, 0.5) : color.mix(Colors.RED, 0.5);\n\n  return (\n    <Background\n      style={{ backgroundColor: color.toString() }}\n      onMouseDown={onMouseDown}\n      onMouseOver={onMouseOver}\n      onDoubleClick={onDoubleClick}\n    >\n      {val}\n    </Background>\n  );\n}\n\nconst Background = styled.div`\n  width: 14px;\n  height: 14px;\n  font-size: 12px;\n  font-family: monospace;\n  border-right: 1px solid #dddddd;\n  border-bottom: 1px solid #dddddd;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n`;\n\nfunction areEqual(prev: Props, next: Props): boolean {\n  return (\n    prev.val === next.val &&\n    prev.selectionOpacity === next.selectionOpacity &&\n    prev.cursored === next.cursored &&\n    prev.isBreakpoint === next.isBreakpoint\n  );\n}\n\nexport const Square = React.memo(UnMemoizedSquare, areEqual);\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { Colors, Hidden, Row, T } from \"ui\";\nimport { Square } from \"./Square\";\nimport { Coordinate, mapCharactersToNames, modulo, range } from \"utilities\";\nimport { Code, CodeEditor } from \"logic\";\nimport styled from \"styled-components\";\nimport { useBlink } from \"./useBlink\";\n\nexport function Grid({\n  code,\n  limits,\n  cursor,\n  editor: e,\n}: {\n  code: Code;\n  limits: Coordinate;\n  cursor: Coordinate;\n  editor: CodeEditor;\n}): React.ReactElement {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [focused, setFocused] = useState(false);\n  useEffect(() => {\n    containerRef.current?.focus();\n    e.setFocusMethod((): void => containerRef.current?.focus());\n  }, []);\n\n  const isSelectedX = useCallback(\n    getSelectionCheckFunction(\n      e.selection.x,\n      e.selectionDelta.x,\n      limits.x,\n      focused\n    ),\n    [e.selection.x, e.selectionDelta.x, limits.x, focused]\n  );\n\n  const isSelectedY = useCallback(\n    getSelectionCheckFunction(\n      e.selection.y,\n      e.selectionDelta.y,\n      limits.y,\n      focused\n    ),\n    [e.selection.y, e.selectionDelta.y, limits.y, focused]\n  );\n\n  const { blink } = useBlink(focused);\n  const selectionOpacity = blink ? 0.35 : 0.2;\n\n  return (\n    <Container\n      focused={focused}\n      ref={containerRef}\n      onFocus={(): void => {\n        e.hasFocus = true;\n        setFocused(true);\n      }}\n      onBlur={(): void => {\n        e.hasFocus = false;\n        setFocused(false);\n      }}\n      tabIndex={0}\n      role={\"textbox\"}\n      aria-live={\"assertive\"}\n      aria-label={\"Code grid\"}\n    >\n      <Hidden>{mapCharactersToNames(e.getSelectedText()) + \"selected\"}</Hidden>\n      {range(-1, limits.y + 1).map((y) => (\n        <Row\n          key={y}\n          style={{ justifyContent: \"flex-end\", minWidth: \"fit-content\" }}\n          aria-hidden={\"true\"}\n        >\n          {range(-1, limits.x + 1).map((x) =>\n            x === -1 && y === -1 ? (\n              <BlankCornerNumberBox key={\"-1,-1\"} />\n            ) : x === -1 ? (\n              <YNumberBox key={`${x},${y}`}>\n                <T size=\"tiny\" color={Colors.DARK.fade(0.4)}>\n                  {y}\n                </T>\n              </YNumberBox>\n            ) : y === -1 ? (\n              <XNumberBox key={`${x},${y}`}>\n                <T size=\"tiny\" color={Colors.DARK.fade(0.4)}>\n                  {x}\n                </T>\n              </XNumberBox>\n            ) : (\n              <Square\n                val={code.code[x][y]}\n                selectionOpacity={\n                  isSelectedX(x) && isSelectedY(y) && selectionOpacity\n                }\n                cursored={x === cursor.x && y === cursor.y}\n                isBreakpoint={code.breakpoints[x][y]}\n                onMouseDown={e.onMouseDown(x, y)}\n                onMouseOver={e.onMouseOver(x, y)}\n                onDoubleClick={e.onDoubleClick(x, y)}\n                key={`${x},${y}`}\n              />\n            )\n          )}\n        </Row>\n      ))}\n    </Container>\n  );\n}\n\nfunction getSelectionCheckFunction(\n  coordinate: number,\n  delta: number,\n  limit: number,\n  focused: boolean\n): (a: number) => boolean {\n  if (!focused) return (): boolean => false;\n  if (delta === 0) return (a: number): boolean => a === coordinate;\n  const sum = coordinate + delta;\n  const modSum = modulo(coordinate + delta, limit);\n  if (delta < 0) {\n    if (modSum === sum)\n      return (a: number): boolean => coordinate + delta <= a && a <= coordinate;\n    else return (a: number): boolean => a <= coordinate || a >= modSum;\n  } else {\n    if (modSum === sum)\n      return (a: number): boolean => coordinate <= a && a <= coordinate + delta;\n    else return (a: number): boolean => a <= modSum || a >= coordinate;\n  }\n}\n\nconst Container = styled.div<{ focused: boolean }>`\n  padding: 4px 8px 8px 4px;\n  background-color: ${Colors.LIGHT.toString()};\n  border-radius: 4px;\n  outline: 0 none !important;\n  ${({ focused }): string => {\n    return focused\n      ? `box-shadow: 0px 0px 0px 2px ${Colors.FOCUS.toString()}`\n      : \"\";\n  }};\n`;\n\nconst XNumberBox = styled.div`\n  width: 15px;\n  padding-bottom: 4px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n  border-bottom: 1px solid #dddddd;\n`;\n\nconst YNumberBox = styled.div`\n  height: 15px;\n  width: 12px;\n  padding-right: 4px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  border-right: 1px solid #dddddd;\n`;\n\nconst BlankCornerNumberBox = styled.div`\n  width: 13px;\n  height: 13px;\n`;\n","import { useEffect, useState } from \"react\";\n\nexport function useBlink(enabled?: boolean): { blink: boolean } {\n  const [blink, setBlink] = useState(false);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (enabled) setBlink((blink) => !blink);\n    }, 600);\n    return (): void => clearInterval(interval);\n  }, [enabled]);\n\n  return { blink };\n}\n","import React from \"react\";\nimport { Colors } from \"ui\";\n\ninterface Props {\n  stack: number[];\n  style?: React.CSSProperties;\n}\n\nexport function Stack({ stack, style }: Props): React.ReactElement {\n  return (\n    <div\n      style={{\n        width: 120,\n        flex: 1,\n        backgroundColor: Colors.LIGHT.toString(),\n        padding: 8,\n        overflow: \"scroll\",\n        scrollbarWidth: \"none\",\n        ...style,\n      }}\n    >\n      {stack\n        .slice()\n        .reverse()\n        .map((value, index) => (\n          <div key={index}>{value}</div>\n        ))}\n    </div>\n  );\n}\n","import React, { useCallback, useMemo, useState } from \"react\";\nimport { TextField, Button, Colors } from \"ui\";\n\ninterface Props {\n  submitInput: (input: string) => void;\n  inputType: \"number\" | \"character\";\n}\n\nexport function Input({ submitInput, inputType }: Props): React.ReactElement {\n  const [input, setInput] = useState(\"\");\n\n  const parseInput = useMemo(\n    () =>\n      inputType === \"character\"\n        ? (input: string): string => input.charAt(input.length - 1)\n        : inputType === \"number\"\n        ? (input: string): string => input.replace(/[^0-9]/, \"\")\n        : (input: string): string => input,\n    [inputType]\n  );\n\n  const onSubmit = useCallback((): void => {\n    submitInput(input);\n    setInput(\"\");\n  }, [input]);\n\n  return (\n    <>\n      <TextField\n        value={input}\n        onChange={(newVal): void => setInput(parseInput(newVal))}\n        style={{ width: 80 }}\n        focusFirstRender\n        onSubmit={onSubmit}\n      />\n      <Button\n        label={\"Submit\"}\n        onClick={onSubmit}\n        style={{ marginLeft: 8 }}\n        color={Colors.SUPER_ACCENT}\n      />\n    </>\n  );\n}\n","import React, { useEffect, useRef } from \"react\";\nimport { Colors, Hidden } from \"ui\";\nimport { InputRequestStatus } from \"logic\";\nimport styled from \"styled-components\";\nimport { Input } from \"./Input\";\n\ninterface Props {\n  output: string;\n  requestingInput: InputRequestStatus;\n  submitInput: (input: string) => void;\n  style?: React.CSSProperties;\n}\n\nexport function InputOutput({\n  output,\n  requestingInput,\n  submitInput,\n}: Props): React.ReactElement {\n  const bottomMarkerRef = useRef<HTMLDivElement>(null);\n  const scrollingContainerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const top = scrollingContainerRef.current?.scrollTop || 0; // scrolled distance from top\n    const height = scrollingContainerRef.current?.clientHeight || 0; // component height\n    const scrollHeight = scrollingContainerRef.current?.scrollHeight || 0; // total height of content\n    const nearBottom = scrollHeight - (top + height) < 20;\n    if (nearBottom) {\n      bottomMarkerRef.current?.scrollIntoView();\n    }\n  }, [output]);\n\n  return (\n    <>\n      <OutputContainer>\n        {!output && <Hidden>{\"No output yet\"}</Hidden>}\n        <OutputInnerScrollingContainer ref={scrollingContainerRef}>\n          {output.split(\"\\n\").map((x, index) => (\n            <div key={index}>{x}</div>\n          ))}\n          <div ref={bottomMarkerRef} />\n        </OutputInnerScrollingContainer>\n      </OutputContainer>\n      <InputContainer>\n        <div>\n          {requestingInput === \"character\" ? (\n            <div style={{ color: \"#000033\", fontWeight: 600 }}>\n              Please enter a character:{\" \"}\n              <Input submitInput={submitInput} inputType=\"character\" />\n            </div>\n          ) : requestingInput === \"number\" ? (\n            <div style={{ color: \"#000033\", fontWeight: 600 }}>\n              Please enter a number:{\" \"}\n              <Input submitInput={submitInput} inputType=\"number\" />\n            </div>\n          ) : requestingInput === \"divideBy0\" ? (\n            <div style={{ color: \"#000033\", fontWeight: 600 }}>\n              Division by 0. Please enter the result:{\" \"}\n              <Input submitInput={submitInput} inputType=\"number\" />\n            </div>\n          ) : (\n            <div style={{ color: Colors.DARK.fade(0.3).toString() }}>\n              No input needed\n            </div>\n          )}\n        </div>\n      </InputContainer>\n    </>\n  );\n}\n\nconst OutputContainer = styled.div`\n  flex: 1;\n  height: 0px;\n  display: flex;\n`;\n\nconst OutputInnerScrollingContainer = styled.div`\n  flex: 1;\n  width: 0px;\n  background-color: ${Colors.LIGHT.toString()};\n  overflow: scroll;\n  scrollbar-width: thin;\n  flex-direction: column;\n  padding: 8px;\n`;\n\nconst InputContainer = styled.div`\n  background-color: ${Colors.LIGHT.toString()};\n  border-top: 1px solid ${Colors.GREY.toString()};\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  height: 48px;\n`;\n","import { Colors, IconButton } from \"ui\";\nimport React from \"react\";\nimport { BsChevronCompactLeft, BsChevronCompactRight } from \"react-icons/bs\";\nimport styled from \"styled-components\";\n\nexport function ExpandCollapseArrows({\n  columns,\n  setColumns,\n}: {\n  columns: number;\n  setColumns: (newVal: number) => void;\n}): React.ReactElement {\n  const showLeft = columns > 1;\n  const showRight = columns < 3;\n\n  return (\n    <PositioningContainer>\n      <div\n        style={{\n          alignSelf: \"center\",\n          display: \"flex\",\n          backgroundColor: Colors.DARKEST.toString(),\n          paddingLeft: 2,\n          paddingRight: 2,\n          borderRadius: 4,\n        }}\n      >\n        <div\n          style={{\n            width: 8,\n            overflow: \"hidden\",\n          }}\n        >\n          {showLeft && (\n            <IconButton\n              aria-label=\"collapse-options\"\n              style={{\n                marginLeft: -20,\n                marginTop: -8,\n                marginBottom: -8,\n                backgroundColor: \"transparent\",\n              }}\n              onClick={(): void => setColumns(columns - 1)}\n            >\n              <BsChevronCompactLeft />\n            </IconButton>\n          )}\n        </div>\n\n        <div\n          style={{\n            width: 8,\n            overflow: \"hidden\",\n          }}\n        >\n          {showRight && (\n            <IconButton\n              aria-label=\"expand-options\"\n              style={{\n                marginLeft: -20,\n                marginTop: -8,\n                marginBottom: -8,\n                backgroundColor: \"transparent\",\n              }}\n              onClick={(): void => setColumns(columns + 1)}\n            >\n              <BsChevronCompactRight />\n            </IconButton>\n          )}\n        </div>\n      </div>\n    </PositioningContainer>\n  );\n}\n\nconst PositioningContainer = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 20px;\n  margin-right: -10px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n","import styled from \"styled-components\";\n\nexport const ControlPanelColumn = styled.div`\n  align-self: stretch;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`;\n","import React from \"react\";\nimport { Button } from \"ui\";\nimport { GlobalBefungeState } from \"logic\";\nimport { ControlPanelColumn } from \"./ControlPanelColumn\";\n\nexport function ExecutionControls({\n  state,\n  style,\n}: {\n  state: GlobalBefungeState;\n  style: React.CSSProperties;\n}): React.ReactElement {\n  const { core, executor } = state;\n\n  return (\n    <ControlPanelColumn style={style}>\n      <Button\n        label={\"Step\"}\n        onClick={executor.step}\n        disabled={!core.canStep()}\n      />\n      <Button\n        label={executor.walking ? \"Pause\" : \"Walk\"}\n        onClick={executor.walkOrPause}\n        style={{ marginTop: 8 }}\n        disabled={core.halted}\n      />\n      <Button\n        label={executor.running ? \"Pause\" : \"Run\"}\n        onClick={executor.runOrPause}\n        style={{ marginTop: 8 }}\n        disabled={core.halted}\n      />\n      <Button\n        label={\"Reset\"}\n        onClick={executor.reset}\n        style={{ marginTop: 8 }}\n      />\n    </ControlPanelColumn>\n  );\n}\n","import { Colors, Row, T, TextField } from \"ui\";\nimport React, { useState } from \"react\";\n\nexport function UnicodeCalculator(): React.ReactElement {\n  const [char, setChar] = useState(\"A\");\n  const [num, setNum] = useState(\"A\".charCodeAt(0).toString());\n\n  return (\n    <>\n      <Row style={{ flex: 1, justifyContent: \"center\", marginBottom: 6 }}>\n        <TextField\n          value={char}\n          onChange={(newVal): void => {\n            const input = newVal;\n            const value = input.charAt(input.length - 1);\n            setChar(value);\n            setNum(value ? value.charCodeAt(0).toString() : \"\");\n          }}\n          style={{\n            backgroundColor: Colors.DARKER.toString(),\n            color: Colors.LIGHT.toString(),\n            width: 11,\n          }}\n          ariaLabel={\"Character side of UTF-16 value translator\"}\n        />\n        <T size=\"small\" unselectable style={{ marginLeft: 16 }}>\n          α↔n\n        </T>\n        <TextField\n          value={num}\n          onChange={(newVal): void => {\n            const n = newVal.replace(/[^0-9]/, \"\");\n            setNum(n);\n            setChar(String.fromCharCode(parseInt(n)));\n          }}\n          style={{\n            backgroundColor: Colors.DARKER.toString(),\n            color: Colors.LIGHT.toString(),\n            width: 40,\n            marginLeft: 16,\n          }}\n          ariaLabel={\"Number side of UTF-16 value translator\"}\n        />\n      </Row>\n    </>\n  );\n}\n","import { MiniButton, Row, T } from \"ui\";\nimport React from \"react\";\nimport { BefungeRunner } from \"logic\";\n\nexport function WalkingSpeedControl({\n  executor,\n}: {\n  executor: BefungeRunner;\n}): React.ReactElement {\n  return (\n    <>\n      <T>Walking speed:</T>\n      <Row style={{ marginLeft: 8, justifyContent: \"space-between\" }}>\n        <MiniButton\n          label={\"-\"}\n          onClick={executor.walkingSpeed.goSlower}\n          disabled={!executor.walkingSpeed.canGoSlower()}\n          ariaLabel={\"Walking speed minus button\"}\n        />\n        <T\n          size=\"small\"\n          unselectable\n          style={{\n            width: 20,\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"center\",\n          }}\n        >\n          {executor.walkingSpeed.getSpeed()}\n        </T>\n        <MiniButton\n          label={\"+\"}\n          onClick={executor.walkingSpeed.goFaster}\n          disabled={!executor.walkingSpeed.canGoFaster()}\n          ariaLabel={\"Walking speed plus button\"}\n        />\n      </Row>\n    </>\n  );\n}\n","import styled from \"styled-components\";\nimport { Row } from \"ui\";\n\nexport const ControlPanelRow = styled(Row)`\n  align-self: stretch;\n  justify-content: space-between;\n  align-items: center;\n`;\n","import React from \"react\";\nimport { Colors, T } from \"ui\";\nimport { Direction } from \"utilities\";\nimport { GlobalBefungeState } from \"logic\";\nimport { UnicodeCalculator } from \"./UnicodeCalculator\";\nimport { WalkingSpeedControl } from \"./WalkingSpeedControl\";\nimport { ControlPanelRow } from \"./ControlPanelRow\";\nimport { ControlPanelColumn } from \"./ControlPanelColumn\";\n\nexport function StateAndSpeed({\n  state,\n  style,\n}: {\n  state: GlobalBefungeState;\n  style: React.CSSProperties;\n}): React.ReactElement {\n  const { editor, core, executor } = state;\n\n  return (\n    <ControlPanelColumn style={style}>\n      <ControlPanelRow>\n        <T size=\"small\">Code input direction:</T>\n        <T\n          size=\"small\"\n          style={{ marginLeft: 4, color: Colors.ACCENT_BLUE.toString() }}\n        >\n          {DIRECTION_SYMBOL[editor.direction]}\n        </T>\n      </ControlPanelRow>\n      <ControlPanelRow>\n        <T size=\"small\">Input cursor value:</T>\n        <T\n          size=\"small\"\n          style={{ marginLeft: 4, color: Colors.ACCENT_BLUE.toString() }}\n        >\n          {editor.getSelectedCharacter().charCodeAt(0)}\n        </T>\n      </ControlPanelRow>\n      <ControlPanelRow>\n        <T size=\"small\">Execution direction:</T>\n        <T\n          size=\"small\"\n          style={{ marginLeft: 4, color: Colors.ACCENT_ORANGE.toString() }}\n        >\n          {DIRECTION_SYMBOL[core.direction]}\n        </T>\n      </ControlPanelRow>\n      <ControlPanelRow>\n        <T size=\"small\">Execution cursor value:</T>\n        <T\n          size=\"small\"\n          style={{ marginLeft: 4, color: Colors.ACCENT_ORANGE.toString() }}\n        >\n          {core.getCursorCharacter().charCodeAt(0)}\n        </T>\n      </ControlPanelRow>\n      <ControlPanelRow>\n        <T size=\"small\">String mode enabled:</T>\n        <T size=\"small\" style={{ marginLeft: 4 }}>\n          {core.stringMode ? \"Yes\" : \"No\"}\n        </T>\n      </ControlPanelRow>\n      <ControlPanelRow style={{ marginTop: 2, marginBottom: 2 }}>\n        <WalkingSpeedControl executor={executor} />\n      </ControlPanelRow>\n      <T size=\"small\">UTF-16 value translator:</T>\n      <ControlPanelRow>\n        <UnicodeCalculator />\n      </ControlPanelRow>\n    </ControlPanelColumn>\n  );\n}\n\nconst DIRECTION_SYMBOL = {\n  [Direction.Left]: \"←\",\n  [Direction.Right]: \"→\",\n  [Direction.Up]: \"↑\",\n  [Direction.Down]: \"↓\",\n};\n","import React from \"react\";\nimport { Checkbox, T } from \"ui\";\nimport { GlobalBefungeState } from \"logic\";\nimport { ControlPanelColumn } from \"./ControlPanelColumn\";\nimport { ControlPanelRow } from \"./ControlPanelRow\";\n\nexport function EditorControls({\n  state,\n  style,\n}: {\n  state: GlobalBefungeState;\n  style: React.CSSProperties;\n}): React.ReactElement {\n  const { editor } = state;\n\n  return (\n    <ControlPanelColumn style={{ ...style, justifyContent: \"flex-start\" }}>\n      <ControlPanelRow>\n        <T size=\"small\">\n          Change input direction on{\" \"}\n          <span style={{ fontFamily: \"monospace\" }}>{\"<>^v\"}</span>:\n        </T>\n        <Checkbox\n          object={editor.options}\n          k={\"changeDirectionOnDirectionCharacters\"}\n          ariaLabel={\"Change input direction when typing >, <, ^, or v\"}\n          onChange={(newVal: boolean): void =>\n            editor.options.setChangeDirectionOnDirectionCharacters(newVal)\n          }\n          style={{ marginLeft: 4 }}\n        />\n      </ControlPanelRow>\n      <ControlPanelRow style={{ marginTop: 4 }}>\n        <T size=\"small\" style={{ width: 120 }}>\n          Cut/copy/paste in selection direction:\n        </T>\n        <Checkbox\n          object={editor.options}\n          k={\"useSelectionDirectionForCutCopyPaste\"}\n          ariaLabel={\n            \"Use direction of selection to determine the rotation and reflection of text when cutting, copying, and pasting\"\n          }\n          onChange={(newVal: boolean): void =>\n            editor.options.setUseSelectionDirectionForCutCopyPaste(newVal)\n          }\n          style={{ marginLeft: 4 }}\n        />\n      </ControlPanelRow>\n    </ControlPanelColumn>\n  );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Colors } from \"ui\";\nimport { sum, useLocalStorageState } from \"utilities\";\nimport { GlobalBefungeState } from \"logic\";\nimport { ExpandCollapseArrows } from \"./ExpandCollapseArrows\";\nimport { ExecutionControls } from \"./ExecutionControls\";\nimport { StateAndSpeed } from \"./StateAndSpeed\";\nimport { EditorControls } from \"./EditorControls\";\n\ninterface Props {\n  state: GlobalBefungeState;\n  transitionTimeMs?: number;\n}\n\n// TODO: Tidy this\nexport function ControlPanel({\n  state,\n  transitionTimeMs = 200,\n}: Props): React.ReactElement {\n  const [columns, setColumns] = useLocalStorageState({\n    storageKey: \"controlPanelColumns\",\n    initialValue: 2,\n  });\n  const [visible, setVisible] = useState(columns);\n  const timeoutRef = useRef<ReturnType<typeof setTimeout>>();\n\n  const containerRef = useRef<HTMLDivElement>(null);\n  const columnWidths = [60, 148, 148];\n  const padding = 12;\n  const gap = 16;\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const initialWidth = containerRef.current.clientWidth;\n    containerRef.current.style.width = initialWidth + \"px\";\n\n    const desiredWidth =\n      sum(columnWidths.slice(0, columns)) +\n      2 * padding +\n      (columns - 1) * gap +\n      4;\n    containerRef.current.style.width = desiredWidth + \"px\";\n  }, [columns]);\n\n  useEffect(() => {\n    if (timeoutRef.current) clearTimeout(timeoutRef.current);\n    if (columns > visible) setVisible(columns);\n    else {\n      timeoutRef.current = setTimeout(() => {\n        setVisible(columns);\n      }, transitionTimeMs);\n    }\n  }, [columns]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (containerRef.current)\n        containerRef.current.style.transition = `width ${transitionTimeMs}ms`;\n    }, 100);\n  }, [transitionTimeMs]);\n\n  return (\n    <OuterContainer ref={containerRef} id=\"control-panel\">\n      <InnerContainer style={{ padding, gap }}>\n        <ExecutionControls\n          state={state}\n          style={{ minWidth: columnWidths[0], maxWidth: columnWidths[0] }}\n        />\n        {visible > 1 && (\n          <StateAndSpeed\n            state={state}\n            style={{ minWidth: columnWidths[1], maxWidth: columnWidths[1] }}\n          />\n        )}\n        {visible > 2 && (\n          <EditorControls\n            state={state}\n            style={{ minWidth: columnWidths[2], maxWidth: columnWidths[2] }}\n          />\n        )}\n      </InnerContainer>\n      <ExpandCollapseArrows columns={columns} setColumns={setColumns} />\n    </OuterContainer>\n  );\n}\n\nconst OuterContainer = styled.div`\n  align-self: stretch;\n  position: relative;\n  flex: 1 !important;\n  background-color: ${Colors.DARKER.toString()};\n  shadow: -2px 2px 4px rgba(0, 0, 0, 0.3);\n`;\n\nconst InnerContainer = styled.div`\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  overflow: hidden;\n\n  display: flex;\n  flex-direction: row;\n`;\n","import React, { ReactElement } from \"react\";\nimport styled from \"styled-components\";\nimport { Colors, Row } from \"ui\";\nimport { GlobalBefungeState } from \"logic\";\nimport { Grid } from \"./Grid\";\nimport { Stack } from \"./Stack\";\nimport { InputOutput } from \"./InputOutput\";\nimport { ControlPanel } from \"./ControlPanel\";\n\n// TODO: Layout for narrow screens and mobile\nexport function CodingSpace({\n  state,\n}: {\n  state: GlobalBefungeState;\n}): ReactElement {\n  const { limits, code, core, executor, editor } = state;\n\n  return (\n    <Container style={{ flexShrink: 1 }}>\n      <Label>Code editor</Label>\n      <Grid code={code} limits={limits} cursor={core.cursor} editor={editor} />\n      <Row\n        style={{\n          marginTop: 16,\n          height: 220,\n          alignSelf: \"stretch\",\n        }}\n      >\n        <Column>\n          <Label>Stack</Label>\n          <Stack stack={core.stack} />\n        </Column>\n        <Column style={{ marginLeft: 16 }}>\n          <Label>Control panel</Label>\n          <ControlPanel state={state} />\n        </Column>\n        <Column style={{ marginLeft: 16, flexGrow: 1 }}>\n          <Label>Input + output</Label>\n          <InputOutput\n            output={core.output}\n            requestingInput={core.requestingInput}\n            submitInput={executor.acceptInput}\n          />\n        </Column>\n      </Row>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  max-width: fit-content;\n  flex-direction: column;\n`;\n\nconst Column = styled.div`\n  align-self: stretch;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Label = styled.label`\n  margin-bottom: 6px;\n  font-size: 11px;\n  color: ${Colors.LIGHT.fade(0.2).toString()};\n`;\n","import styled from \"styled-components\";\nimport { Colors } from \"ui\";\n\nexport const SquareBackground = styled.div`\n  width: 14px;\n  height: 14px;\n  font-size: 12px;\n  font-family: monospace;\n  background-color: ${Colors.LIGHT.toString()};\n  color: #000000;\n  border: 1px solid #bbbbbb;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n","import React from \"react\";\nimport { SquareBackground } from \"./SquareBackground\";\nimport styled from \"styled-components\";\n\nconst M = styled.span`\n  font-family: monospace;\n`;\n\nexport const befungeCommands = [\n  {\n    key: \"0\",\n\n    command: (\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          marginBottom: 8,\n        }}\n      >\n        <SquareBackground>0</SquareBackground>⋮\n        <SquareBackground>9</SquareBackground>\n      </div>\n    ),\n    description: (\n      <div style={{ marginTop: 8 }}>\n        Push the corresponding number onto the stack\n      </div>\n    ),\n    customCommandStyle: true,\n  },\n  {\n    key: \"+\",\n    command: \"+\",\n    description: (\n      <div>\n        Addition: pop two values <M>a</M> then <M>b</M>, then push the result of{\" \"}\n        <M>a + b</M>\n      </div>\n    ),\n  },\n  {\n    key: \"-\",\n    command: \"-\",\n    description: (\n      <div>\n        Subtraction: pop two values <M>a</M> then <M>b</M>, then push the result\n        of <M>b - a</M>\n      </div>\n    ),\n  },\n  {\n    key: \"*\",\n    command: \"*\",\n    description: (\n      <div>\n        Multiplication: pop two values <M>a</M> then <M>b</M>, then push the\n        result of <M>a * b</M>\n      </div>\n    ),\n  },\n  {\n    key: \"/\",\n    command: \"/\",\n    description: (\n      <div>\n        Integer division: pop two values <M>a</M> then <M>b</M>, then push the\n        result of <M>b / a</M>, rounded down. If a is zero, ask the user what\n        result they want.\n      </div>\n    ),\n  },\n  {\n    key: \"%\",\n    command: \"%\",\n    description: (\n      <div>\n        Modulo: pop two values <M>a</M> then <M>b</M>, then push the remainder\n        of the integer division of <M>b / a</M>.\n      </div>\n    ),\n  },\n  {\n    key: \"!\",\n    command: \"!\",\n    description: (\n      <div>\n        Not: pop a value. If the value is <M>0</M>, push <M>1</M>; otherwise,\n        push <M>0</M>.\n      </div>\n    ),\n  },\n  {\n    key: \"`\",\n    command: \"`\",\n    description: (\n      <div>\n        Comparison: pop two values <M>a</M> then <M>b</M>, then push <M>1</M> if{\" \"}\n        <M>b {\">\"} a</M>, otherwise <M>0</M>.\n      </div>\n    ),\n  },\n  { key: \">\", command: \">\", description: <div>Start moving right</div> },\n  { key: \"<\", command: \"<\", description: <div>Start moving left</div> },\n  { key: \"^\", command: \"^\", description: <div>Start moving up</div> },\n  { key: \"v\", command: \"v\", description: <div>Start moving down</div> },\n  {\n    key: \"?\",\n    command: \"?\",\n    description: <div>Start moving in a random cardinal direction</div>,\n  },\n  {\n    key: \"_\",\n    command: \"_\",\n    description: (\n      <div>\n        Horizontal if: pop a value; set direction to right if value is <M>0</M>,\n        set to left otherwise\n      </div>\n    ),\n  },\n  {\n    key: \"|\",\n    command: \"|\",\n    description: (\n      <div>\n        Vertical if: pop a value; set direction to down if value is <M>0</M>,\n        set to up otherwise\n      </div>\n    ),\n  },\n  {\n    key: '\"',\n    command: '\"',\n    description: (\n      <div>\n        Toggle string-mode: push each character&apos;s UTF-16 value all the way\n        up to the next <M>{'\"'}</M>\n      </div>\n    ),\n  },\n  { key: \":\", command: \":\", description: <div>Duplicate top stack value</div> },\n  { key: \"\\\\\", command: \"\\\\\", description: <div>Swap top stack values</div> },\n  {\n    key: \"$\",\n    command: \"$\",\n    description: <div>Pop (remove) top stack value and discard</div>,\n  },\n  {\n    key: \".\",\n    command: \".\",\n    description: (\n      <div>Integer output: pop top of stack and output it as an integer</div>\n    ),\n  },\n  {\n    key: \",\",\n    command: \",\",\n    description: (\n      <div>\n        Character output: pop top of stack and output its UTF-16 character\n      </div>\n    ),\n  },\n  {\n    key: \"&\",\n    command: \"&\",\n    description: (\n      <div>\n        Integer input: request an integer from the user and push it to the stack\n      </div>\n    ),\n  },\n  {\n    key: \"~\",\n    command: \"~\",\n    description: (\n      <div>\n        Character input: request a character from the user and push it to the\n        stack\n      </div>\n    ),\n  },\n  {\n    key: \"#\",\n    command: \"#\",\n    description: (\n      <div>\n        Bridge: jump over next command in the current direction of movement\n      </div>\n    ),\n  },\n  {\n    key: \"g\",\n    command: \"g\",\n    description: (\n      <div>\n        Get: a way to retrieve data in storage. Pop two values <M>y</M> then{\" \"}\n        <M>x</M>, then push the UTF-16 value of the character at that position\n        in the program. If <M>(x, y)</M> is out of bounds, push <M>0</M>\n      </div>\n    ),\n  },\n  {\n    key: \"p\",\n    command: \"p\",\n    description: (\n      <div>\n        Put: a way to store a value for later use. Pop three values <M>y</M>,\n        then <M>x</M>, then <M>v</M>, then change the character at the position{\" \"}\n        <M>(x, y)</M> in the program to the character with UTF-16 value <M>v</M>\n      </div>\n    ),\n  },\n  { key: \"@\", command: \"@\", description: <div>End program</div> },\n  {\n    key: \" \",\n    command: \" \",\n    description: (\n      <div>\n        No-op: does nothing. There is a space character in this location, which\n        has UTF-16 value 32\n      </div>\n    ),\n  },\n  {\n    key: \"blank 1\",\n    command: <div style={{ height: 12 }} />,\n    customCommandStyle: true,\n  },\n];\n","import React from \"react\";\nimport { Colors, T } from \"ui\";\nimport { HiCursorClick } from \"react-icons/hi\";\nimport { SquareBackground } from \"./SquareBackground\";\n\nexport const editorCommands = [\n  {\n    key: \"A\",\n    command: \"⌘ + A\",\n    description: \"Select all\",\n  },\n  {\n    key: \"X\",\n    command: \"⌘ + X\",\n    description: \"Cut\",\n  },\n  {\n    key: \"C\",\n    command: \"⌘ + C\",\n    description: \"Copy\",\n  },\n  {\n    key: \"V\",\n    command: \"⌘ + V\",\n    description: \"Paste\",\n  },\n  {\n    key: \"Z\",\n    command: \"⌘ + Z\",\n    description: \"Undo - also reverts any execution state to this point\",\n  },\n  {\n    key: \"Z+\",\n    command: \"⌘ + ⇧ + Z\",\n    description: \"Redo - also reverts any execution state to this point\",\n  },\n  {\n    key: \"J\",\n    command: \"⌘ + J\",\n    description: \"Step\",\n  },\n  {\n    key: \"K\",\n    command: \"⌘ + K\",\n    description: \"Walk or pause\",\n  },\n  {\n    key: \"L\",\n    command: \"⌘ + L\",\n    description: \"Run or pause\",\n  },\n  {\n    key: \";\",\n    command: \"⌘ + ;\",\n    description: \"Reset\",\n  },\n  {\n    key: \"DC\",\n    command: (\n      <T monospace>\n        <HiCursorClick />\n        ×2\n      </T>\n    ),\n    description: \"Set or remove breakpoint\",\n  },\n  {\n    key: \"Arrows\",\n    command: \"↑/↓/→/←\",\n    description: \"Move code input cursor\",\n  },\n  {\n    key: \"Arrows+\",\n    command: (\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n        }}\n      >\n        <T monospace>⇧ +</T>\n        <T monospace>↑/↓/→/←</T>\n      </div>\n    ),\n    description: \"Extend selection\",\n  },\n  {\n    key: \"execution cursor\",\n    command: (\n      <SquareBackground\n        style={{\n          backgroundColor: Colors.LIGHT.mix(Colors.ACCENT_ORANGE, 0.4)\n            .saturate(1)\n            .toString(),\n        }}\n      />\n    ),\n    description: (\n      <div>\n        Execution cursor: the orange highlight marks the next command to be\n        executed\n      </div>\n    ),\n    customCommandStyle: true,\n  },\n  {\n    key: \"typing cursor\",\n    command: (\n      <SquareBackground\n        style={{\n          backgroundColor: Colors.LIGHT.mix(Colors.ACCENT_BLUE, 0.4)\n            .saturate(1)\n            .toString(),\n        }}\n      />\n    ),\n    description: (\n      <div>\n        Code input cursor: the blue highlight marks the square(s) you edit when\n        you type\n      </div>\n    ),\n    customCommandStyle: true,\n  },\n  {\n    key: \"both cursors\",\n    command: (\n      <SquareBackground\n        style={{\n          backgroundColor: Colors.LIGHT.mix(Colors.ACCENT_BLUE, 0.4)\n            .mix(Colors.ACCENT_ORANGE, 0.4)\n            .toString(),\n        }}\n      />\n    ),\n    description: (\n      <div>\n        Both cursors: the execution and code input cursors are on top of each\n        other\n      </div>\n    ),\n    customCommandStyle: true,\n  },\n  {\n    key: \"breakpoint\",\n    command: (\n      <SquareBackground\n        style={{\n          backgroundColor: Colors.LIGHT.mix(Colors.RED, 0.5)\n            .mix(Colors.ACCENT_ORANGE, 0.4)\n            .toString(),\n        }}\n      />\n    ),\n    description: <div>Breakpoint: code execution will stop here</div>,\n    customCommandStyle: true,\n  },\n  {\n    key: \"breakpoint+\",\n    command: (\n      <SquareBackground\n        style={{\n          backgroundColor: Colors.LIGHT.mix(Colors.ACCENT_ORANGE, 0.3)\n            .mix(Colors.BLUE, 0.5)\n            .toString(),\n        }}\n      />\n    ),\n    description: (\n      <div>Active breakpoint: code execution is currently stopped here</div>\n    ),\n    customCommandStyle: true,\n  },\n];\n","import { Row } from \"ui\";\nimport React from \"react\";\nimport { SquareBackground } from \"./SquareBackground\";\n\ninterface Props {\n  command: React.ReactNode;\n  description?: React.ReactElement;\n  customCommandStyle?: boolean;\n  style: React.CSSProperties;\n}\n\nexport function BefungeCommandRow({\n  command,\n  description,\n  customCommandStyle,\n  style,\n}: Props): React.ReactElement {\n  const commandComponent = customCommandStyle ? (\n    command\n  ) : (\n    <SquareBackground style={{ marginTop: 0 }}>{command}</SquareBackground>\n  );\n\n  return (\n    <Row style={{ alignItems: \"flex-start\", ...style }}>\n      {commandComponent}\n      <div style={{ marginLeft: 12, flex: 1 }}>{description}</div>\n    </Row>\n  );\n}\n","import { Row, T } from \"ui\";\nimport React from \"react\";\n\ninterface Props {\n  command: React.ReactNode;\n  description?: React.ReactNode;\n  customCommandStyle?: boolean;\n  style: React.CSSProperties;\n}\n\nexport function EditorCommandRow({\n  command,\n  description,\n  customCommandStyle,\n  style,\n}: Props): React.ReactElement {\n  const commandComponent = customCommandStyle ? (\n    command\n  ) : (\n    <T monospace>{command}</T>\n  );\n\n  return (\n    <Row style={{ ...style }}>\n      <div style={{ width: 68, justifyContent: \"center\", display: \"flex\" }}>\n        {commandComponent}\n      </div>\n      <div style={{ marginLeft: 12, flex: 1 }}>{description}</div>\n    </Row>\n  );\n}\n","import { SidebarSection, Colors } from \"ui\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { befungeCommands } from \"./befungeCommands\";\nimport { editorCommands } from \"./editorCommands\";\nimport { BefungeCommandRow } from \"./BefungeCommandRow\";\nimport { EditorCommandRow } from \"./EditorCommandRow\";\n\nexport function InfoSidebarContent(): React.ReactElement {\n  return (\n    <>\n      <Title style={{ marginTop: 0 }}>Instructions</Title>\n      <p>\n        Try typing some commands into the text editor, then press step, walk, or\n        run to execute them.\n      </p>\n      <p>\n        You can also try out some example befunge programs from the examples\n        section, or copy-paste code in from other sources.\n      </p>\n      <SidebarSection title=\"Befunge commands\" collapsible>\n        {befungeCommands.map(\n          ({ command, description, customCommandStyle, key }) => (\n            <BefungeCommandRow\n              key={key}\n              style={{ marginTop: 6 }}\n              command={command}\n              description={description}\n              customCommandStyle={customCommandStyle}\n            />\n          )\n        )}\n      </SidebarSection>\n      <SidebarSection title=\"Editor\" collapsible>\n        {editorCommands.map(\n          ({ command, description, customCommandStyle, key }) => (\n            <EditorCommandRow\n              key={key}\n              style={{ marginTop: 6 }}\n              command={command}\n              description={description}\n              customCommandStyle={customCommandStyle}\n            />\n          )\n        )}\n        <p style={{ marginTop: 12 }}>\n          The control key works in place of the command key on Windows\n          computers.\n        </p>\n        <p>Input options can be found by expanding the control panel.</p>\n      </SidebarSection>\n      <SidebarSection title=\"About Befunge\">\n        <p>\n          Befunge is a programming language invented in 1993 by Chris Pressey.\n          For more information see the Befunge pages on{\" \"}\n          <a className=\"link\" href={\"https://en.wikipedia.org/wiki/Befunge\"}>\n            Wikipedia\n          </a>{\" \"}\n          or{\" \"}\n          <a className=\"link\" href={\"https://esolangs.org/wiki/Befunge\"}>\n            Esolangs\n          </a>\n          .\n        </p>\n      </SidebarSection>\n      <SidebarSection title=\"About this editor\">\n        This befunge interpreter was written by Angus Johnson. Please let me\n        know on{\" \"}\n        <a className=\"link\" href={\"https://github.com/angussbj/befunge/issues\"}>\n          Github\n        </a>{\" \"}\n        if you find any issues.\n      </SidebarSection>\n      <div\n        style={{\n          fontSize: 10,\n          marginTop: 16,\n          marginBottom: 16,\n          display: \"flex\",\n          justifyContent: \"flex-end\",\n          color: Colors.LIGHT.fade(0.4).toString(),\n        }}\n      >\n        © Angus Johnson 2021\n      </div>\n    </>\n  );\n}\n\nconst Title = styled.div`\n  margin-top: 24px;\n  margin-bottom: 12px;\n  color: ${Colors.LIGHT.toString()};\n  font-size: 18px;\n`;\n","import React from \"react\";\nimport { T } from \"ui\";\n\nexport const examples = [\n  {\n    label: \"Minimal hello world\",\n    description:\n      \"The characters are added to the stack using string-mode, then printed in reverse order.\",\n    code: '\"!dlrow ,olleH\",,,,,,,,,,,,,@',\n  },\n  {\n    label: \"UTF-16 hello world\",\n    description:\n      \"The UTF-16 values of the characters are put on the stack by doing arithmetic with single digit numbers, then printed in reverse order.\",\n    code: \" v>v>v>v>v>v>v \\n 5 5 5 4 5 5 9 \\n 6 7-7-2 7 7+8 \\n + +7+22 + +1* \\n 3*9*9*2*9*9*  \\n *:*:*:*4*9*:  \\n  * +3+*+3+ *  \\n  5 6+6*6+7 5  \\n  2 5 5 5 5 2  \\n >^>^>^>^>^>^>v\\n@,,,,,,,,,,,,,<\\n               \\n !dlrow ,olleH \\n\", // prettier-ignore\n  },\n  {\n    label: \"FizzBuzz\",\n    description:\n      \"The program asks for a numeric input, then prints all the numbers up to that input value, replacing multiples of 3 with 'Fizz', multiples of 5 with 'Buzz', and multiples of both 3 and 5 with 'FizzBuzz'\",\n    code: ' 52*:\"?timiL\",,,,,,,,&03p   v\\nv:_v#%3: _v#%5: _v#%*53:  +1<\\n>.#\"#>   #\"#>   #\"#> v> 25*,^\\n   z ,    z ,    z , :|      \\n   z ,    z ,    z , 1>@     \\n   i ,    u ,    u , +#      \\n   F ,    B ,    B , 0!      \\n   \"      \"      z , 3`      \\n   > ^    > ^    z , g       \\n                 i , >^      \\n                 F ,         \\n                 \"           \\n                 > ^         \\n',\n  },\n  {\n    label: \"Prime generator\",\n    description: (\n      <T>\n        Generates primes by checking, for each integer, if any of the primes\n        less than its square root divide it evenly. Fills most of the code grid\n        with primes.\n      </T>\n    ),\n    code: \"v                                                                               \\n7                                                                               \\n1                                                                               \\n0                                                                               \\np                                                                               \\n0                                                                               \\n2                                                                               \\n0                                                                               \\np                                                                               \\n                                                                                \\n2                                                                               \\n7                                                                               \\n0                                                                               \\np                                                                               \\n                                                                                \\n2                                                                               \\n.                                                                               \\n5                                                                               \\n5                                                                               \\n+                                                                               \\n,                                                                               \\n               >40gg%!#v_v          ++for12or34                      @>:: .55+,v\\n3              ^g03:   #<>350p460pv              >$150g0p60g0g1+:45*`| vpg02g01<\\n>730p040p >:30g40gg:*1-`|         >50g0g1+:89*7+`|             vp0g06< >      1+\\n^         ^#         +1<> 150p260p^              >50g0p        >50g3-#^_       #\\n\",\n  },\n  {\n    label: \"Emulator\",\n    description:\n      \"An emulator of a simple machine with 16 instructions, a maximum program length of 16, and 2? registers.\",\n    code: 'v aaaaaaaaaaaaaaaa Load:                                                        \\n  ip: a ^Memory^          ^^   <    v                                         < \\n< is: a a-p=0-15   v 0              <              Print: >55+%68*+,    v     ^ \\n  ar: a            >:96+`#^_:2+ &:69v                     ^,+*86<               \\n  r0: a            ^ +1p0\\\\+\"a\"_^#!`+<                           |:/+55:<        \\n  r1: a                                                   ^    $<               \\n                   Fetch:                                                       \\n>   61g\"a\"-::2+0g62p1+88+%2+0g63p62g\"a\"-7`1++88+%\"a\"+61p62g\"a\"-         #     v \\n :!#v_1-:!#v_1-:!#v_1-:!#v_1-:!#v_1-:!#v_1-:!#v_1-:!#v_1-:!#v_1-v  Execute:   > \\n    5      $      $      $      $      $      $      $      $   >      #    v   \\n^   5 0     1      2      3      4      5      6      7     >8$63g\"a\"- ^>       \\n    +                                                >\"**GNID**\",,,,,,,,^       \\n    ,                                         >65g\"a\"-1-88++88+%\"a\"+65p ^       \\n    @                                  >64g\"a\"-1-88++88+%\"a\"+64p>       ^       \\n                                >65g\"a\"-1+88+%\"a\"+65p>          ^               \\n                         >64g\"a\"-1+88+%\"a\"+64p>      ^     p46g0+2-\"a\"g36<      \\n                  >64g65g-88++88+%\"a\"+64p>    ^      p56g0+2-\"a\"g36<            \\n           >64g\"a\"-65g\"a\"-+88+%\"a\"+64p  >^     p0+2-\"a\"g36g46<                  \\n  +---------------+   >            >    ^p0+2-\"a\"g36g56<                        \\n  | 4917 Emulator |                |-\"a\"g46<                                    \\n  |Dougall Johnson|   ^p16g36<     <                                            \\n  |  12 Feb 2010  |          |-\"a\"g46<                                          \\n  +---------------+   ^   <  <     15    14    13    12    11    10     9       \\n@,,,,,,\"ERROR\"+55          <      -1_^#:-1_^#:-1_^#:-1_^#:-1_^#:-1_^#:-1_^#:<   \\n',\n  },\n] as const;\n","import React, { ReactElement } from \"react\";\nimport { Colors, IconButton, Row, T } from \"ui\";\nimport { BsBoxArrowInRight, BsFiles } from \"react-icons/bs\";\nimport { CodeEditor } from \"logic\";\n\ninterface Props {\n  label: string;\n  description?: string | ReactElement;\n  code: string;\n  editor: CodeEditor;\n  render: () => void;\n  style?: React.CSSProperties;\n}\n\nexport function Example({\n  label,\n  description,\n  editor,\n  code,\n  render,\n  style,\n}: Props): React.ReactElement {\n  return (\n    <div style={style}>\n      <Row style={{ justifyContent: \"space-between\" }}>\n        <T color={Colors.LIGHT}>{label}</T>\n        <Row>\n          <IconButton\n            onClick={(): void => {\n              navigator.clipboard.writeText(code);\n            }}\n          >\n            <BsFiles size={12} />\n          </IconButton>\n          <IconButton\n            style={{ marginLeft: -8 }}\n            onClick={(): void => {\n              editor.setCode(code);\n              render();\n            }}\n          >\n            <BsBoxArrowInRight size={14} />\n          </IconButton>\n        </Row>\n      </Row>\n      <T>{description}</T>\n    </div>\n  );\n}\n","import { SidebarTitle } from \"ui\";\nimport React from \"react\";\nimport { examples } from \"./examples\";\nimport { Example } from \"./Example\";\nimport { CodeEditor } from \"logic\";\n\nexport function ExampleSidebarContent({\n  editor,\n  render,\n}: {\n  editor: CodeEditor;\n  render: () => void;\n}): React.ReactElement {\n  return (\n    <>\n      <SidebarTitle style={{ marginTop: 0 }}>Examples</SidebarTitle>\n      {examples.map(({ ...exampleDetails }) => (\n        <Example\n          {...exampleDetails}\n          key={exampleDetails.label}\n          editor={editor}\n          render={render}\n          style={{ marginTop: 8 }}\n        />\n      ))}\n      <div style={{ marginTop: 32 }}>\n        <a className=\"link\" href=\"https://esolangs.org/wiki/Befunge#Examples\">\n          More examples\n        </a>\n      </div>\n    </>\n  );\n}\n","import React, { ReactNode } from \"react\";\nimport InfoOutlinedIcon from \"@material-ui/icons/InfoOutlined\";\nimport { IconButton, Sidebar, TextButton } from \"ui\";\nimport { useLocalStorageState } from \"utilities\";\nimport { CodeEditor } from \"logic\";\nimport { InfoSidebarContent } from \"./InfoSidebarContent\";\nimport { ExampleSidebarContent } from \"./ExampleSidebarContent\";\n\ninterface Props {\n  editor: CodeEditor;\n  render: () => void;\n  children?: ReactNode;\n}\n\nexport function InfoAndExamplesSidebar({\n  editor,\n  render,\n}: Props): React.ReactElement {\n  const [infoOpen, setInfoOpen] = useLocalStorageState({\n    storageKey: \"infoOpen\",\n    initialValue: true,\n  });\n\n  const [examplesOpen, setExamplesOpen] = useLocalStorageState({\n    storageKey: \"examplesOpen\",\n    initialValue: false,\n  });\n\n  return (\n    <>\n      <IconButton\n        style={topRightAbsolute8px}\n        onClick={(): void => setInfoOpen(!infoOpen)}\n      >\n        <InfoOutlinedIcon />\n      </IconButton>\n      <TextButton\n        label=\"Examples\"\n        style={topLeftAbsolute20px}\n        onClick={(): void => setExamplesOpen(!examplesOpen)}\n      />\n      <Sidebar\n        open={examplesOpen}\n        setOpen={setExamplesOpen}\n        content={<ExampleSidebarContent editor={editor} render={render} />}\n      />\n      <Sidebar\n        open={infoOpen}\n        setOpen={setInfoOpen}\n        content={<InfoSidebarContent />}\n        pullRight\n      />\n    </>\n  );\n}\n\nconst topLeftAbsolute20px = {\n  position: \"absolute\",\n  top: 20,\n  left: 20,\n} as const;\n\nconst topRightAbsolute8px = {\n  position: \"absolute\",\n  top: 8,\n  right: 8,\n} as const;\n","import React, { useCallback, useState } from \"react\";\nimport { CodingSpace } from \"./CodingSpace\";\nimport { useGlobalBefungeState } from \"./useGlobalBefungeState\";\nimport { InfoAndExamplesSidebar } from \"./InfoAndExamplesSidebars\";\nimport styled from \"styled-components\";\n\nexport function Content(): React.ReactElement {\n  const setRenderHelper = useState(false)[1];\n  const render = useCallback((): void => {\n    setRenderHelper((val) => !val);\n  }, []);\n\n  const befungeState = useGlobalBefungeState(render);\n\n  return (\n    <>\n      <InfoAndExamplesSidebar editor={befungeState.editor} render={render} />\n      <HorizontalScrollingContainer>\n        <CenteringContainer>\n          <CodingSpace state={befungeState} />\n        </CenteringContainer>\n      </HorizontalScrollingContainer>\n    </>\n  );\n}\n\nconst HorizontalScrollingContainer = styled.div`\n  box-sizing: border-box;\n  width: 100%;\n  min-height: fit-content;\n  height: 100vh;\n  overflow-x: auto;\n  overflow-y: visible;\n  padding: 48px 20px 20px 20px;\n`;\n\nconst CenteringContainer = styled.div`\n  display: flex;\n  min-width: 100%;\n  min-height: 100%;\n  width: fit-content;\n  height: fit-content;\n  align-items: center;\n  justify-content: center;\n`;\n","import { useCallback, useRef, useEffect } from \"react\";\nimport {\n  BefungeRunner,\n  BefungeCore,\n  Code,\n  CodeEditor,\n  GlobalBefungeState,\n} from \"logic\";\nimport { Coordinate } from \"utilities\";\n\nexport function useGlobalBefungeState(\n  render: () => void,\n  width = 80,\n  height = 25\n): GlobalBefungeState {\n  const onChange = useCallback((code?: string): void => {\n    if (code) localStorage.setItem(\"code\", code);\n    render();\n  }, []);\n\n  const limits = useRef(new Coordinate(width, height)).current;\n  const code = useRef(new Code(width, height)).current;\n  const core = useRef(new BefungeCore(limits, code)).current;\n  const executor = useRef(\n    new BefungeRunner(limits, code, core, onChange)\n  ).current;\n  const editor = useRef(\n    new CodeEditor(code, limits, executor, onChange)\n  ).current;\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", editor.onKeyDown);\n    document.addEventListener(\"cut\", editor.onCut);\n    document.addEventListener(\"copy\", editor.onCopy);\n    document.addEventListener(\"paste\", editor.onPaste);\n\n    // Load code from local storage\n    const cookieCode = localStorage.getItem(\"code\");\n    if (cookieCode) code.set(JSON.parse(cookieCode));\n\n    return (): void => {\n      document.removeEventListener(\"keydown\", editor.onKeyDown);\n      document.removeEventListener(\"cut\", editor.onCut);\n      document.removeEventListener(\"copy\", editor.onCopy);\n      document.removeEventListener(\"paste\", editor.onPaste);\n    };\n  }, []);\n\n  return { limits, code, core, editor, executor };\n}\n","import React from \"react\";\nimport { Content } from \"components\";\n\nfunction App(): React.ReactElement {\n  return <Content />;\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}