(this.webpackJsonpbefunge=this.webpackJsonpbefunge||[]).push([[0],{32:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var i=n(0),s=n.n(i),o=n(9),c=n.n(o),l=(n(32),n(4)),u=n(6),r=n(10),a=n(11),h=n(7),d=n(14),v=n.n(d),f=function(){function t(e,n){Object(r.a)(this,t),this.x=e,this.y=n}return Object(a.a)(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setToCopy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"negative",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"modulo",value:function(t){return this.x=(this.x%t.x+t.x)%t.x,this.y=(this.y%t.y+t.y)%t.y,this}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}}]),t}();function k(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e>0?Array(e).fill(t).map((function(t,e){return t+n*e})):[]}var y,p,b=n(25);function m(t){var e=Object(b.a)(t);return e.sort((function(t,e){return t-e})),e}!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Up=2]="Up",t[t.Down=3]="Down"}(p||(p={}));var g=(y={},Object(h.a)(y,p.Left,new f(-1,0)),Object(h.a)(y,p.Right,new f(1,0)),Object(h.a)(y,p.Up,new f(0,-1)),Object(h.a)(y,p.Down,new f(0,1)),y),x=function(){function t(e,n,i){Object(r.a)(this,t),this.render=i,this.cursor=new f(0,0),this.direction=p.Right,this.stack=[],this.output="",this.stringMode=!1,this.halted=!1,this.limits=void 0,this.code=void 0,this.walking=!1,this.running=!1,this.limits=new f(e,n),this.code=function(t,e,n){return Array(t).fill(!1).map((function(){return Array(e).fill(n)}))}(e,n," "),v()(this)}return Object(a.a)(t,[{key:"walk",value:function(){this.walking=!0,this.running=!1,function t(e){return function(){e.walking&&(e.step(),setTimeout(t(e),1))}}(this)()}},{key:"run",value:function(){this.walking=!1,this.running=!0,function t(e){return function(){for(var n=0;n<100;n++)e.running&&e.quickStep();e.running?setTimeout(t(e),1):e.render()}}(this)()}},{key:"pause",value:function(){this.walking=!1,this.running=!1}},{key:"reset",value:function(){this.cursor=new f(0,0),this.stack=[],this.output="",this.halted=!1,this.stringMode=!1,this.walking=!1,this.render()}},{key:"quickStep",value:function(){this.execute(this.code[this.cursor.x][this.cursor.y]),this.moveCursor()}},{key:"step",value:function(){this.execute(this.code[this.cursor.x][this.cursor.y]),this.moveCursor(),this.render()}},{key:"moveCursor",value:function(){this.cursor.add(g[this.direction]),this.cursor.modulo(this.limits)}},{key:"execute",value:function(t){this.stringMode&&this.stack.push(t.charCodeAt(0)),this.isValidCommand(t)?this[t]():this.throwUnrecognisedCommand(t,this.cursor)}},{key:"isValidCommand",value:function(t){return t in this}},{key:"throwUnrecognisedCommand",value:function(t,e){this.output+='\nError: Unrecognised command "'.concat(t,'" at ').concat(e.toString()),this.halt()}},{key:"halt",value:function(){this.halted=!0,this.walking=!1,this.running=!1}},{key:"0",value:function(){this.stack.push(0)}},{key:"1",value:function(){this.stack.push(1)}},{key:"2",value:function(){this.stack.push(2)}},{key:"3",value:function(){this.stack.push(3)}},{key:"4",value:function(){this.stack.push(4)}},{key:"5",value:function(){this.stack.push(5)}},{key:"6",value:function(){this.stack.push(6)}},{key:"7",value:function(){this.stack.push(7)}},{key:"8",value:function(){this.stack.push(8)}},{key:"9",value:function(){this.stack.push(9)}},{key:"+",value:function(){var t,e;this.stack.push((null!==(t=this.stack.pop())&&void 0!==t?t:0)+(null!==(e=this.stack.pop())&&void 0!==e?e:0))}},{key:"-",value:function(){var t,e;this.stack.push(-(null!==(t=this.stack.pop())&&void 0!==t?t:0)+(null!==(e=this.stack.pop())&&void 0!==e?e:0))}},{key:"/",value:function(){var t;this.stack.push(Math.floor(1/(null!==(t=this.stack.pop())&&void 0!==t?t:1)*(this.stack.pop()||1)))}},{key:"*",value:function(){var t,e;this.stack.push((null!==(t=this.stack.pop())&&void 0!==t?t:1)*(null!==(e=this.stack.pop())&&void 0!==e?e:1))}},{key:"%",value:function(){var t,e,n=null!==(t=this.stack.pop())&&void 0!==t?t:1,i=null!==(e=this.stack.pop())&&void 0!==e?e:1;this.stack.push(i%n)}},{key:"!",value:function(){this.stack.push(Number(!this.stack.pop()))}},{key:"`",value:function(){var t,e,n=null!==(t=this.stack.pop())&&void 0!==t?t:0,i=null!==(e=this.stack.pop())&&void 0!==e?e:0;this.stack.push(Number(n<i))}},{key:">",value:function(){this.direction=p.Right}},{key:"<",value:function(){this.direction=p.Left}},{key:"^",value:function(){this.direction=p.Up}},{key:"v",value:function(){this.direction=p.Down}},{key:"?",value:function(){this.direction=Math.floor(4*Math.random())}},{key:"_",value:function(){this.direction=this.stack.pop()?p.Left:p.Right}},{key:"|",value:function(){this.direction=this.stack.pop()?p.Up:p.Down}},{key:'"',value:function(){this.stringMode=!this.stringMode}},{key:":",value:function(){this.stack.push(this.stack[this.stack.length-1])}},{key:"\\",value:function(){var t=this.stack.pop(),e=this.stack.pop();void 0!==t&&this.stack.push(t),void 0!==e&&this.stack.push(e)}},{key:"$",value:function(){this.stack.pop()}},{key:"#",value:function(){this.moveCursor()}},{key:"g",value:function(){var t,e;this.stack.push(this.code[null!==(t=this.stack.pop())&&void 0!==t?t:0][null!==(e=this.stack.pop())&&void 0!==e?e:0].charCodeAt(0))}},{key:"p",value:function(){var t,e,n;this.code[null!==(t=this.stack.pop())&&void 0!==t?t:0][null!==(e=this.stack.pop())&&void 0!==e?e:0]=String.fromCharCode(null!==(n=this.stack.pop())&&void 0!==n?n:32)}},{key:".",value:function(){var t;this.output+=(null!==(t=this.stack.pop())&&void 0!==t?t:0).toString(10)}},{key:",",value:function(){var t=this.stack.pop();void 0!==t&&(this.output+=String.fromCharCode(t))}},{key:"@",value:function(){this.halt()}},{key:" ",value:function(){}}]),t}(),j=n(18),w={Left:new f(-1,0),Right:new f(1,0),Up:new f(0,-1),Down:new f(0,1)},O=function(){function t(e,n,i){Object(r.a)(this,t),this.code=e,this.limits=n,this.render=i,this.selection=new f(0,0),this.selectionDelta=new f(0,0),this.direction=w.Right.clone(),this.deleteMode="delete",v()(this)}return Object(a.a)(t,[{key:"onMouseDown",value:function(t,e){var n=this;return function(i){i.shiftKey?n.selectionDelta.set(t-n.selection.x,e-n.selection.y):(n.selection.set(t,e),n.selectionDelta.set(0,0),n.deleteMode="delete",n.direction.setToCopy(w.Right)),n.render()}}},{key:"onMouseOver",value:function(t,e){var n=this;return function(i){i.buttons%2===1&&(n.selectionDelta.set(t-n.selection.x,e-n.selection.y),n.render())}}},{key:"onKeyDown",value:function(t){t.ctrlKey||t.metaKey?"a"===t.key&&(this.selection.set(0,0),this.selectionDelta.setToCopy(this.limits).add(new f(-1,-1))):1!==t.key.length||t.ctrlKey||t.metaKey?!t.key.match(/^Arrow/)||t.ctrlKey||t.metaKey?"Backspace"===t.key&&this.handleDeletion():this.handleSelectionMovement(t):this.handleEnteredCharacter(t),this.render()}},{key:"onCut",value:function(t){this.onCopy(t),this.clearSelection()}},{key:"onCopy",value:function(t){var e,n=this,i="";this.selectionForEach({cellAction:function(t,e){i+=n.code[t][e]},rowEndAction:function(){i+="\n"}}),null===(e=t.clipboardData)||void 0===e||e.setData("text/plain",i),t.preventDefault()}},{key:"onPaste",value:function(t){var e,n=this,i=null===(e=t.clipboardData)||void 0===e?void 0:e.getData("Text"),s=new f(this.selection.x,this.selection.y);null===i||void 0===i||i.split("").forEach((function(t){"\n"===t?s.set(n.selection.x,s.y+1).modulo(n.limits):(n.code[s.x][s.y]=t,s.setX(s.x+1).modulo(n.limits))})),this.render()}},{key:"handleEnteredCharacter",value:function(t){this.fillSelection(t.key),this.stepSelection(this.direction),this.deleteMode="backspace",t.preventDefault()}},{key:"handleSelectionMovement",value:function(t){t.shiftKey?this.selectionDelta.add(w[t.key.slice(5)]):(this.direction.setToCopy(w[t.key.slice(5)]),this.stepSelection(this.direction),this.selectionDelta.set(0,0),t.preventDefault()),this.deleteMode="delete"}},{key:"handleDeletion",value:function(){"backspace"===this.deleteMode?(this.stepSelection(this.direction.clone().negative()),this.code[this.selection.x][this.selection.y]=" "):"delete"===this.deleteMode&&this.clearSelection()}},{key:"stepSelection",value:function(t){this.selection.add(t).modulo(this.limits)}},{key:"clearSelection",value:function(){this.fillSelection(" ")}},{key:"fillSelection",value:function(t){var e=this;this.selectionForEach({cellAction:function(n,i){e.code[n][i]=t}})}},{key:"selectionForEach",value:function(t){for(var e=t.cellAction,n=t.rowEndAction,i=m([this.selection.x,this.selection.x+this.selectionDelta.x]),s=Object(j.a)(i,2),o=s[0],c=s[1],l=m([this.selection.y,this.selection.y+this.selectionDelta.y]),u=Object(j.a)(l,2),r=u[0],a=u[1],h=new f(0,0),d=r;d<=a;d++){for(var v=o;v<=c;v++)h.set(v,d).modulo(this.limits),e(h.x,h.y);null===n||void 0===n||n()}}}]),t}();var C=n(5),D=n(26),S=n(66),E=n(1);function M(t){var e=t.label,n=t.onClick,i=Object(D.a)(t,["label","onClick"]);return Object(E.jsx)(S.a,Object(C.a)(Object(C.a)({variant:"contained",size:"small",disableElevation:!0,onClick:n},i),{},{children:e}))}var R,T,L=n(8),A=n.n(L),U={DARK:A()("#283134"),LIGHT:A()("#f7f9f9"),GREY:A()("#CCCCCC"),WRITING_CURSOR:A()("#CCEAFF"),EXECUTING_CURSOR:A()("#FFE0CC"),ACCENT:A()("#09b2eb")},K=u.a.div(R||(R=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),I=U.LIGHT.toString(),G=U.GREY.toString(),F=U.WRITING_CURSOR.toString(),N=U.EXECUTING_CURSOR.toString();function W(t){var e=t.val,n=t.selected,i=t.cursored,s=t.onMouseDown,o=t.onMouseOver,c=n||i?n&&i?G:n?F:N:I;return Object(E.jsx)(B,{color:c,onMouseDown:s,onMouseOver:o,children:e})}var H,_,B=u.a.div(T||(T=Object(l.a)(["\n  width: 16px;\n  height: 16px;\n  background-color: ",";\n  border-right: 1px solid #bbbbbb;\n  border-bottom: 1px solid #bbbbbb;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n"])),(function(t){return t.color}));function P(t){var e=t.code,n=t.cursor,s=t.editor,o=Object(i.useCallback)(X(s.selection.x,s.selectionDelta.x,s.limits.x),[s.selection.x,s.selectionDelta.x,s.limits.x]),c=Object(i.useCallback)(X(s.selection.y,s.selectionDelta.y,s.limits.y),[s.selection.y,s.selectionDelta.y,s.limits.y]);return Object(E.jsx)("div",{style:{overflow:"hidden"},children:Object(E.jsx)("div",{style:{marginRight:-1,marginBottom:-1},children:k(0,s.limits.y).map((function(t){return Object(E.jsx)(K,{children:k(0,s.limits.x).map((function(i){return Object(E.jsx)(W,{val:e[i][t],selected:o(i)&&c(t),cursored:i===n.x&&t===n.y,onMouseDown:s.onMouseDown(i,t),onMouseOver:s.onMouseOver(i,t)},"".concat(i,",").concat(t))}))},t)}))})})}function X(t,e,n){if(0===e)return function(e){return e===t};var i,s=t+e,o=((t+e)%(i=n)+i)%i;return e<0?o===s?function(n){return t+e<=n&&n<=t}:function(e){return e<=t||e>=o}:o===s?function(n){return t<=n&&n<=t+e}:function(e){return e<=o||e>=t}}function Y(t){var e=t.stack,n=t.style;return Object(E.jsx)("div",{style:Object(C.a)({width:120,alignSelf:"stretch",backgroundColor:U.LIGHT.toString(),padding:8,overflow:"scroll",scrollbarWidth:"none"},n),children:e.slice().reverse().map((function(t,e){return Object(E.jsx)("div",{children:t},e)}))})}function q(t){var e=t.output,n=t.style;return Object(E.jsx)("div",{style:Object(C.a)({flexBasis:0,flexGrow:1,flexShrink:1,minWidth:0,alignSelf:"stretch",backgroundColor:U.LIGHT.toString(),padding:8,overflow:"scroll",scrollbarWidth:"none"},n),children:e})}function z(){var t=function(t,e){var n=Object(i.useState)(0)[1],s=Object(i.useCallback)((function(){n(Math.random())}),[]),o=Object(i.useRef)(new x(t,e,s)).current,c=Object(i.useRef)(new O(o.code,o.limits,s)).current;return Object(i.useEffect)((function(){return document.addEventListener("keydown",c.onKeyDown),document.addEventListener("cut",c.onCut),document.addEventListener("copy",c.onCopy),document.addEventListener("paste",c.onPaste),function(){document.removeEventListener("keydown",c.onKeyDown),document.removeEventListener("cut",c.onCut),document.removeEventListener("copy",c.onCopy),document.removeEventListener("paste",c.onPaste)}}),[]),{editor:c,befunge:o}}(48,32),e=t.editor,n=t.befunge;return Object(E.jsxs)(J,{children:[Object(E.jsx)(P,{code:n.code,cursor:n.cursor,editor:e}),Object(E.jsxs)(K,{style:{marginTop:16,width:816,height:200},children:[Object(E.jsx)(Y,{stack:n.stack}),Object(E.jsxs)(V,{style:{marginLeft:16},children:[Object(E.jsx)(M,{label:"Step",onClick:n.step}),Object(E.jsx)(M,{label:"Walk",onClick:n.walk,style:{marginTop:8}}),Object(E.jsx)(M,{label:"Run",onClick:n.run,style:{marginTop:8}}),Object(E.jsx)(M,{label:"Pause",onClick:n.pause,style:{marginTop:8}}),Object(E.jsx)(M,{label:"Reset",onClick:n.reset,style:{marginTop:8}})]}),Object(E.jsx)(q,{output:n.output,style:{marginLeft:16}})]})]})}var J=u.a.div(H||(H=Object(l.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n"]))),V=u.a.div(_||(_=Object(l.a)(["\n  align-self: stretch;\n  justify-content: space-between;\n  display: flex;\n  flex-direction: column;\n"])));var $=function(){return Object(E.jsx)("div",{style:{backgroundColor:U.DARK.toString(),display:"flex",minHeight:"100vh",padding:24,justifyContent:"center",alignItems:"center"},children:Object(E.jsx)(z,{})})};c.a.render(Object(E.jsx)(s.a.StrictMode,{children:Object(E.jsx)($,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.3b8422f6.chunk.js.map