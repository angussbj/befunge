(this.webpackJsonpbefunge=this.webpackJsonpbefunge||[]).push([[0],{69:function(t,e,i){},91:function(t,e,i){"use strict";i.r(e);var n=i(0),s=i.n(n),o=i(8),c=i.n(o),r=(i(69),i(12)),u=i(13),l=i(16),h=i(17),a=i(22),d=i(33),v=i.n(d),y=function(){function t(e,i){Object(l.a)(this,t),this.x=e,this.y=i}return Object(h.a)(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setToCopy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"negative",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"modulo",value:function(t){return this.x=(this.x%t.x+t.x)%t.x,this.y=(this.y%t.y+t.y)%t.y,this}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}}]),t}();function f(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e>0?Array(e).fill(t).map((function(t,e){return t+i*e})):[]}var p=i(58);function k(t){var e=Object(p.a)(t);return e.sort((function(t,e){return t-e})),e}var b,g,j=i(15),m=function(){function t(e,i){Object(l.a)(this,t),this.width=e,this.height=i,this.code=void 0,this.resetPointWithEdits=void 0,this.resetPointWithoutEdits=void 0,this.code=function(t,e,i){return Array(t).fill(!1).map((function(){return Array(e).fill(i)}))}(e,i," ")}return Object(h.a)(t,[{key:"clone",value:function(){var e=new t(this.width,this.height);return e.setToCopy(this),e}},{key:"setToCopy",value:function(t){this.code=Object(j.cloneDeep)(t.code),this.resetPointWithEdits=Object(j.cloneDeep)(t.resetPointWithEdits),this.resetPointWithoutEdits=Object(j.cloneDeep)(t.resetPointWithoutEdits)}},{key:"get",value:function(t,e){return this.code[t][e]}},{key:"userPut",value:function(t,e,i){this.code[t][e]=i,this.resetPointWithEdits&&(this.resetPointWithEdits[t][e]=i)}},{key:"executionPut",value:function(t,e,i){this.code[t][e]=i}},{key:"makeResetable",value:function(){this.isResetable()||(this.resetPointWithEdits=Object(j.cloneDeep)(this.code),this.resetPointWithoutEdits=Object(j.cloneDeep)(this.code))}},{key:"reset",value:function(t){var e=t?this.resetPointWithEdits:this.resetPointWithoutEdits;e&&(this.code=e),this.resetPointWithEdits=void 0,this.resetPointWithoutEdits=void 0}},{key:"resetRequiresClarification",value:function(){return!Object(j.isEqual)(this.resetPointWithEdits,this.resetPointWithoutEdits)}},{key:"isResetable",value:function(){return!!this.resetPointWithEdits}}]),t}();!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Up=2]="Up",t[t.Down=3]="Down"}(g||(g={}));var x=(b={},Object(a.a)(b,g.Left,new y(-1,0)),Object(a.a)(b,g.Right,new y(1,0)),Object(a.a)(b,g.Up,new y(0,-1)),Object(a.a)(b,g.Down,new y(0,1)),b),O=function(){function t(e,i,n){Object(l.a)(this,t),this.render=n,this.cursor=new y(0,0),this.direction=g.Right,this.stack=[],this.output="",this.stringMode=!1,this.halted=!1,this.limits=void 0,this.code=void 0,this.walking=!1,this.running=!1,this.requestingInput=!1,this.history=[],this.future=[],this.limits=new y(e,i),this.code=new m(e,i),v()(this)}return Object(h.a)(t,[{key:"setHistoryPoint",value:function(){this.history.push(this.createHistoryPoint()),this.future=[]}},{key:"undo",value:function(){this.future.push(this.createHistoryPoint());var t=this.history.pop();this.revertToPoint(t)}},{key:"redo",value:function(){this.history.push(this.createHistoryPoint());var t=this.future.pop();this.revertToPoint(t)}},{key:"createHistoryPoint",value:function(){return{cursor:this.cursor.clone(),direction:this.direction,stack:Object(j.cloneDeep)(this.stack),output:this.output,stringMode:this.stringMode,halted:this.halted,code:this.code.clone(),walking:this.walking,running:this.running}}},{key:"revertToPoint",value:function(t){t&&(this.cursor.setToCopy(t.cursor),this.direction=t.direction,this.stack=Object(j.cloneDeep)(t.stack),this.output=t.output,this.stringMode=t.stringMode,this.halted=t.halted,this.code.setToCopy(t.code),this.walking=t.walking,this.running=t.running)}},{key:"moveCursor",value:function(){this.cursor.add(x[this.direction]),this.cursor.modulo(this.limits)}},{key:"acceptInput",value:function(t){0!==t.length&&("number"===this.requestingInput?this.stack.push(parseInt(t,10)):"character"===this.requestingInput&&this.stack.push(t.charCodeAt(0)),this.requestingInput=!1,this.render())}},{key:"walk",value:function(){this.code.makeResetable(),this.walking=!0,this.running=!1,function t(e){return function(){e.walking&&!e.requestingInput&&(e.slowStep(),setTimeout(t(e),1))}}(this)()}},{key:"run",value:function(){this.code.makeResetable(),this.walking=!1,this.running=!0,function t(e){return function(){for(var i=0;i<100;i++)e.running&&!e.requestingInput&&e.quickStep();e.running&&!e.requestingInput?setTimeout(t(e),1):e.render()}}(this)()}},{key:"pause",value:function(){this.walking=!1,this.running=!1}},{key:"reset",value:function(){this.cursor=new y(0,0),this.stack=[],this.output="",this.halted=!1,this.stringMode=!1,this.walking=!1,this.code.reset(!0),this.render()}},{key:"step",value:function(){this.halted||this.requestingInput||(this.code.makeResetable(),this.slowStep())}},{key:"quickStep",value:function(){this.execute(this.code.get(this.cursor.x,this.cursor.y)),this.moveCursor()}},{key:"slowStep",value:function(){this.execute(this.code.get(this.cursor.x,this.cursor.y)),this.moveCursor(),this.render()}},{key:"execute",value:function(t){this.stringMode&&this.stack.push(t.charCodeAt(0)),this.isValidCommand(t)?this[t]():this.throwUnrecognisedCommand(t,this.cursor)}},{key:"isValidCommand",value:function(t){return t in this}},{key:"throwUnrecognisedCommand",value:function(t,e){this.output+='\nError: Unrecognised command "'.concat(t,'" at ').concat(e.toString()),this.halt()}},{key:"halt",value:function(){this.halted=!0,this.walking=!1,this.running=!1}},{key:"0",value:function(){this.stack.push(0)}},{key:"1",value:function(){this.stack.push(1)}},{key:"2",value:function(){this.stack.push(2)}},{key:"3",value:function(){this.stack.push(3)}},{key:"4",value:function(){this.stack.push(4)}},{key:"5",value:function(){this.stack.push(5)}},{key:"6",value:function(){this.stack.push(6)}},{key:"7",value:function(){this.stack.push(7)}},{key:"8",value:function(){this.stack.push(8)}},{key:"9",value:function(){this.stack.push(9)}},{key:"+",value:function(){var t,e;this.stack.push((null!==(t=this.stack.pop())&&void 0!==t?t:0)+(null!==(e=this.stack.pop())&&void 0!==e?e:0))}},{key:"-",value:function(){var t,e;this.stack.push(-(null!==(t=this.stack.pop())&&void 0!==t?t:0)+(null!==(e=this.stack.pop())&&void 0!==e?e:0))}},{key:"/",value:function(){var t;this.stack.push(Math.floor(1/(null!==(t=this.stack.pop())&&void 0!==t?t:1)*(this.stack.pop()||1)))}},{key:"*",value:function(){var t,e;this.stack.push((null!==(t=this.stack.pop())&&void 0!==t?t:1)*(null!==(e=this.stack.pop())&&void 0!==e?e:1))}},{key:"%",value:function(){var t,e,i=null!==(t=this.stack.pop())&&void 0!==t?t:1,n=null!==(e=this.stack.pop())&&void 0!==e?e:1;this.stack.push(n%i)}},{key:"!",value:function(){this.stack.push(Number(!this.stack.pop()))}},{key:"`",value:function(){var t,e,i=null!==(t=this.stack.pop())&&void 0!==t?t:0,n=null!==(e=this.stack.pop())&&void 0!==e?e:0;this.stack.push(Number(i<n))}},{key:">",value:function(){this.direction=g.Right}},{key:"<",value:function(){this.direction=g.Left}},{key:"^",value:function(){this.direction=g.Up}},{key:"v",value:function(){this.direction=g.Down}},{key:"?",value:function(){this.direction=Math.floor(4*Math.random())}},{key:"_",value:function(){this.direction=this.stack.pop()?g.Left:g.Right}},{key:"|",value:function(){this.direction=this.stack.pop()?g.Up:g.Down}},{key:'"',value:function(){this.stringMode=!this.stringMode}},{key:":",value:function(){this.stack.push(this.stack[this.stack.length-1])}},{key:"\\",value:function(){var t=this.stack.pop(),e=this.stack.pop();void 0!==t&&this.stack.push(t),void 0!==e&&this.stack.push(e)}},{key:"$",value:function(){this.stack.pop()}},{key:"#",value:function(){this.moveCursor()}},{key:"g",value:function(){var t,e;this.stack.push(this.code.get(null!==(t=this.stack.pop())&&void 0!==t?t:0,null!==(e=this.stack.pop())&&void 0!==e?e:0).charCodeAt(0))}},{key:"p",value:function(){var t,e,i;this.code.executionPut(null!==(t=this.stack.pop())&&void 0!==t?t:0,null!==(e=this.stack.pop())&&void 0!==e?e:0,String.fromCharCode(null!==(i=this.stack.pop())&&void 0!==i?i:32))}},{key:".",value:function(){var t;this.output+=(null!==(t=this.stack.pop())&&void 0!==t?t:0).toString(10)}},{key:",",value:function(){var t=this.stack.pop();void 0!==t&&(this.output+=String.fromCharCode(t))}},{key:"&",value:function(){this.requestingInput="number"}},{key:"~",value:function(){this.requestingInput="character"}},{key:"@",value:function(){this.halt()}},{key:" ",value:function(){}}]),t}(),w=i(32),C={Left:new y(-1,0),Right:new y(1,0),Up:new y(0,-1),Down:new y(0,1)},D=function(){function t(e,i){Object(l.a)(this,t),this.executor=e,this.render=i,this.selection=new y(0,0),this.selectionDelta=new y(0,0),this.direction=C.Right.clone(),this.deleteMode="delete",this.history=[],this.future=[],this.code=void 0,this.limits=void 0,this.code=e.code,this.limits=e.limits,v()(this)}return Object(h.a)(t,[{key:"setHistoryPoint",value:function(){this.history.push(this.createHistoryPoint()),this.future=[],this.executor.setHistoryPoint()}},{key:"undo",value:function(){this.future.push(this.createHistoryPoint()),this.revertToPoint(this.history.pop()),this.executor.undo(),this.render()}},{key:"redo",value:function(){this.history.push(this.createHistoryPoint()),this.revertToPoint(this.future.pop()),this.executor.redo(),this.render()}},{key:"createHistoryPoint",value:function(){return{selection:this.selection.clone(),selectionDelta:this.selectionDelta.clone(),direction:this.direction.clone(),deleteMode:this.deleteMode}}},{key:"revertToPoint",value:function(t){t&&(this.selection=t.selection,this.selectionDelta=t.selectionDelta,this.direction=t.direction,this.deleteMode=t.deleteMode)}},{key:"onMouseDown",value:function(t,e){var i=this;return function(n){n.shiftKey?i.selectionDelta.set(t-i.selection.x,e-i.selection.y):(i.selection.set(t,e),i.selectionDelta.set(0,0),i.deleteMode="delete",i.direction.setToCopy(C.Right)),i.render()}}},{key:"onMouseOver",value:function(t,e){var i=this;return function(n){n.buttons%2===1&&(i.selectionDelta.set(t-i.selection.x,e-i.selection.y),i.render())}}},{key:"onKeyDown",value:function(t){this.executor.requestingInput||(t.ctrlKey||t.metaKey?this.handleKeyboardShortcuts(t):1!==t.key.length||t.ctrlKey||t.metaKey?!t.key.match(/^Arrow/)||t.ctrlKey||t.metaKey?"Backspace"===t.key&&this.handleDeletion():this.handleSelectionMovement(t):this.handleEnteredCharacter(t),this.render())}},{key:"onCut",value:function(t){this.setHistoryPoint(),this.onCopy(t),this.clearSelection()}},{key:"onCopy",value:function(t){var e,i=this;this.setHistoryPoint();var n="";this.selectionForEach({cellAction:function(t,e){n+=i.code.get(t,e)},rowEndAction:function(){n+="\n"}}),null===(e=t.clipboardData)||void 0===e||e.setData("text/plain",n),t.preventDefault()}},{key:"onPaste",value:function(t){var e,i=this;this.setHistoryPoint();var n=null===(e=t.clipboardData)||void 0===e?void 0:e.getData("Text"),s=new y(this.selection.x,this.selection.y);null===n||void 0===n||n.split("").forEach((function(t){"\n"===t?s.set(i.selection.x,s.y+1).modulo(i.limits):(i.code.userPut(s.x,s.y,t),s.setX(s.x+1).modulo(i.limits))})),this.render()}},{key:"handleKeyboardShortcuts",value:function(t){if("a"===t.key)this.selection.set(0,0),this.selectionDelta.setToCopy(this.limits).add(new y(-1,-1));else if("z"!==t.key||t.shiftKey){if(!("z"===t.key&&t.shiftKey||"y"===t.key))return;this.redo()}else this.undo();t.preventDefault()}},{key:"handleEnteredCharacter",value:function(t){this.setHistoryPoint(),this.fillSelection(t.key),this.stepSelection(this.direction),this.deleteMode="backspace",t.preventDefault()}},{key:"handleSelectionMovement",value:function(t){t.shiftKey?this.selectionDelta.add(C[t.key.slice(5)]):(this.direction.setToCopy(C[t.key.slice(5)]),this.stepSelection(this.direction),this.selectionDelta.set(0,0),t.preventDefault()),this.deleteMode="delete"}},{key:"handleDeletion",value:function(){this.setHistoryPoint(),"backspace"===this.deleteMode?(this.stepSelection(this.direction.clone().negative()),this.code.userPut(this.selection.x,this.selection.y," ")):"delete"===this.deleteMode&&this.clearSelection()}},{key:"stepSelection",value:function(t){this.selection.add(t).modulo(this.limits)}},{key:"clearSelection",value:function(){this.fillSelection(" ")}},{key:"fillSelection",value:function(t){var e=this;this.selectionForEach({cellAction:function(i,n){e.code.userPut(i,n,t)}})}},{key:"selectionForEach",value:function(t){for(var e=t.cellAction,i=t.rowEndAction,n=k([this.selection.x,this.selection.x+this.selectionDelta.x]),s=Object(w.a)(n,2),o=s[0],c=s[1],r=k([this.selection.y,this.selection.y+this.selectionDelta.y]),u=Object(w.a)(r,2),l=u[0],h=u[1],a=new y(0,0),d=l;d<=h;d++){for(var v=o;v<=c;v++)a.set(v,d).modulo(this.limits),e(a.x,a.y);null===i||void 0===i||i()}}}]),t}();var P=i(29),E=i(59),S=i(124),R=i(4);function M(t){var e=t.label,i=t.onClick,n=Object(E.a)(t,["label","onClick"]);return Object(R.jsx)(S.a,Object(P.a)(Object(P.a)({variant:"contained",size:"small",disableElevation:!0,onClick:i},n),{},{children:e}))}var I,T,L=i(23),W=i.n(L),H={DARK:W()("#283134"),LIGHT:W()("#f7f9f9"),GREY:W()("#CCCCCC"),WRITING_CURSOR:W()("#CCEAFF"),EXECUTING_CURSOR:W()("#FFE0CC"),ACCENT:W()("#09b2eb")},q=u.a.div(I||(I=Object(r.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),K=H.LIGHT.toString(),A=H.GREY.toString(),U=H.WRITING_CURSOR.toString(),G=H.EXECUTING_CURSOR.toString();function F(t){var e=t.val,i=t.selected,n=t.cursored,s=t.onMouseDown,o=t.onMouseOver,c=i||n?i&&n?A:i?U:G:K;return Object(R.jsx)(N,{color:c,onMouseDown:s,onMouseOver:o,children:e})}var N=u.a.div(T||(T=Object(r.a)(["\n  width: 14px;\n  height: 14px;\n  font-size: 12px;\n  background-color: ",";\n  border-right: 1px solid #bbbbbb;\n  border-bottom: 1px solid #bbbbbb;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n"])),(function(t){return t.color}));function z(t){var e=t.code,i=t.cursor,s=t.editor,o=Object(n.useCallback)(_(s.selection.x,s.selectionDelta.x,s.limits.x),[s.selection.x,s.selectionDelta.x,s.limits.x]),c=Object(n.useCallback)(_(s.selection.y,s.selectionDelta.y,s.limits.y),[s.selection.y,s.selectionDelta.y,s.limits.y]);return Object(R.jsx)("div",{style:{overflow:"hidden"},children:Object(R.jsx)("div",{style:{marginRight:-1,marginBottom:-1},children:f(0,s.limits.y).map((function(t){return Object(R.jsx)(q,{children:f(0,s.limits.x).map((function(n){return Object(R.jsx)(F,{val:e[n][t],selected:o(n)&&c(t),cursored:n===i.x&&t===i.y,onMouseDown:s.onMouseDown(n,t),onMouseOver:s.onMouseOver(n,t)},"".concat(n,",").concat(t))}))},t)}))})})}function _(t,e,i){if(0===e)return function(e){return e===t};var n,s=t+e,o=((t+e)%(n=i)+n)%n;return e<0?o===s?function(i){return t+e<=i&&i<=t}:function(e){return e<=t||e>=o}:o===s?function(i){return t<=i&&i<=t+e}:function(e){return e<=o||e>=t}}function X(t){var e=t.stack,i=t.style;return Object(R.jsx)("div",{style:Object(P.a)({width:120,alignSelf:"stretch",backgroundColor:H.LIGHT.toString(),padding:8,overflow:"scroll",scrollbarWidth:"none"},i),children:e.slice().reverse().map((function(t,e){return Object(R.jsx)("div",{children:t},e)}))})}var Y,B,J,V=i(123);function $(t){var e=t.submitInput,i=Object(n.useState)(""),s=Object(w.a)(i,2),o=s[0],c=s[1];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(V.a,{value:o,onChange:function(t){c(t.target.value)},style:{marginLeft:8,width:80,height:12},size:"small"}),Object(R.jsx)(M,{label:"Submit",onClick:function(){e(o),c("")},style:{marginLeft:8},color:"secondary",disableElevation:!1})]})}function Q(t){var e=t.output,i=t.requestingInput,n=t.submitInput,s=t.style;return Object(R.jsxs)(et,{style:s,children:[Object(R.jsx)(it,{children:e}),Object(R.jsx)(nt,{children:Object(R.jsx)("div",{children:"character"===i?Object(R.jsxs)("div",{style:{color:"#000033",fontWeight:600},children:["Please enter a character: ",Object(R.jsx)($,{submitInput:n})]}):"number"===i?Object(R.jsxs)("div",{style:{color:"#000033",fontWeight:600},children:["Please enter a number: ",Object(R.jsx)($,{submitInput:n})]}):Object(R.jsx)("div",{style:{color:H.DARK.fade(.3).toString()},children:"No input needed"})})})]})}var Z,tt,et=u.a.div(Y||(Y=Object(r.a)(["\n  flex: 1;\n  align-self: stretch;\n  display: flex;\n  flex-direction: column;\n"]))),it=u.a.div(B||(B=Object(r.a)(["\n  flex: 1;\n  background-color: ",";\n  overflow: scroll;\n  scrollbar-width: none;\n  padding: 8;\n"])),H.LIGHT.toString()),nt=u.a.div(J||(J=Object(r.a)(["\n  background-color: ",";\n  border-top: 1px solid ",";\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  height: 48px;\n"])),H.LIGHT.toString(),H.GREY.toString());function st(){var t=function(t,e){var i=Object(n.useState)(0)[1],s=Object(n.useCallback)((function(){i(Math.random())}),[]),o=Object(n.useRef)(new O(t,e,s)).current,c=Object(n.useRef)(new D(o,s)).current;return Object(n.useEffect)((function(){return document.addEventListener("keydown",c.onKeyDown),document.addEventListener("cut",c.onCut),document.addEventListener("copy",c.onCopy),document.addEventListener("paste",c.onPaste),function(){document.removeEventListener("keydown",c.onKeyDown),document.removeEventListener("cut",c.onCut),document.removeEventListener("copy",c.onCopy),document.removeEventListener("paste",c.onPaste)}}),[]),{editor:c,befunge:o}}(80,25),e=t.editor,i=t.befunge;return Object(R.jsxs)(ot,{children:[Object(R.jsx)(z,{code:i.code.code,cursor:i.cursor,editor:e}),Object(R.jsxs)(q,{style:{marginTop:16,width:1200,height:200},children:[Object(R.jsx)(X,{stack:i.stack}),Object(R.jsxs)(ct,{style:{marginLeft:16},children:[Object(R.jsx)(M,{label:"Step",onClick:i.step}),Object(R.jsx)(M,{label:"Walk",onClick:i.walk,style:{marginTop:8}}),Object(R.jsx)(M,{label:"Run",onClick:i.run,style:{marginTop:8}}),Object(R.jsx)(M,{label:"Pause",onClick:i.pause,style:{marginTop:8}}),Object(R.jsx)(M,{label:"Reset",onClick:i.reset,style:{marginTop:8}})]}),Object(R.jsx)(Q,{output:i.output,requestingInput:i.requestingInput,submitInput:i.acceptInput,style:{marginLeft:16}})]})]})}var ot=u.a.div(Z||(Z=Object(r.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n"]))),ct=u.a.div(tt||(tt=Object(r.a)(["\n  align-self: stretch;\n  justify-content: space-between;\n  display: flex;\n  flex-direction: column;\n"])));var rt=function(){return Object(R.jsx)("div",{style:{backgroundColor:H.DARK.toString(),display:"flex",minHeight:"100vh",padding:24,justifyContent:"center",alignItems:"center"},children:Object(R.jsx)(st,{})})};c.a.render(Object(R.jsx)(s.a.StrictMode,{children:Object(R.jsx)(rt,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.04e7ca9c.chunk.js.map