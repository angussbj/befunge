{"version":3,"sources":["ui/Colors.ts","ui/T.tsx","ui/useHover.ts","ui/buttons/BaseButton.tsx","ui/buttons/Button.tsx","ui/buttons/IconButton.tsx","ui/buttons/MiniButton.tsx","ui/buttons/TextButton.tsx","ui/Checkbox.tsx","ui/Row.tsx","ui/SidebarTitle.tsx","ui/SidebarSection.tsx","ui/TextField.tsx","ui/Sidebar.tsx","ui/Sidebars.tsx","components/CodingSpace/Grid/Square.tsx","components/CodingSpace/Grid/Grid.tsx","components/CodingSpace/Grid/useBlink.ts","components/CodingSpace/Stack.tsx","components/CodingSpace/InputOutput/Input.tsx","components/CodingSpace/InputOutput/InputOutput.tsx","components/CodingSpace/ControlPanel/ExpandCollapseArrows.tsx","components/CodingSpace/ControlPanel/ControlPanelColumn.tsx","components/CodingSpace/ControlPanel/ExecutionControls.tsx","components/CodingSpace/ControlPanel/UnicodeCalculator.tsx","components/CodingSpace/ControlPanel/WalkingSpeedControl.tsx","components/CodingSpace/ControlPanel/ControlPanelRow.tsx","components/CodingSpace/ControlPanel/StateAndSpeed.tsx","components/CodingSpace/ControlPanel/EditorControls.tsx","components/CodingSpace/ControlPanel/ControlPanel.tsx","components/CodingSpace/CodingSpace.tsx","ui/CenteredScreenContentContainer.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/SquareBackground.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/befungeCommands.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/editorCommands.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/BefungeCommandRow.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/EditorCommandRow.tsx","components/InfoAndExamplesSidebars/InfoSidebarContent/InfoSidebarContent.tsx","components/InfoAndExamplesSidebars/ExampleSidebarContent/examples.tsx","components/InfoAndExamplesSidebars/ExampleSidebarContent/Example.tsx","components/InfoAndExamplesSidebars/ExampleSidebarContent/ExampleSidebarContent.tsx","components/InfoAndExamplesSidebars/InfoAndExamplesSidebars.tsx","App.tsx","components/useGlobalBefungeState.ts","index.tsx","logic/index.ts","utilities/Coordinate.ts","utilities/constArray2.ts","utilities/modulo.ts","utilities/range.ts","utilities/useLocalStorageState.ts","logic/Befunge/index.ts","logic/Befunge/BefungeRunner.ts","logic/Code.ts","logic/CodeEditor/CodeEditorOptions.ts","logic/CodeEditor/CodeEditor.ts","logic/Befunge/CommandChar.ts","logic/Befunge/BefungeCore.ts"],"names":["Colors","DARKEST","Color","DARKER","DARK","LIGHT","GREY","FOCUS","ACCENT_BLUE","ACCENT_ORANGE","SUPER_ACCENT","RED","BLUE","TRANSPARENT","alpha","T","size","color","unselectable","monospace","children","style","finalStyle","fade","toString","fontSize","fontFamily","undefined","UnselectableText","styled","div","useHover","useState","value","setValue","ref","useRef","handleMouseOver","handleMouseOut","useEffect","node","current","addEventListener","removeEventListener","BaseButton","label","onClick","disabled","textStyle","backgroundColor","textColor","hovered","minWidth","paddingLeft","paddingRight","height","borderRadius","border","cursor","toUpperCase","Button","rest","isLight","IconButton","MiniButton","marginBottom","maxWidth","minHeight","maxHeight","padding","borderColor","TextButton","Checkbox","object","k","onChange","renderHelper","setRenderHelper","margin","checked","event","target","disableRipple","icon","checkedIcon","Row","SidebarTitle","SidebarSection","title","collapsible","startCollapsed","collapsed","setCollapsed","overflow","position","marginTop","justifyContent","alignItems","marginRight","FadeOut","TextField","focusFirstRender","onSubmit","inputRef","focus","className","e","onKeyDown","key","Sidebar","content","page","onSetOpen","sidebar","Container","aria-label","top","right","styles","background","display","overlay","bottom","Sidebars","leftContent","rightContent","leftOpen","rightOpen","onSetLeftOpen","onSetRightOpen","open","pullRight","UnMemoizedSquare","val","selectionOpacity","cursored","isBreakpoint","onMouseDown","onMouseOver","onDoubleClick","mix","Background","areEqual","prev","next","Square","React","memo","Grid","code","limits","editor","containerRef","focused","setFocused","setFocusMethod","isSelectedX","useCallback","getSelectionCheckFunction","selection","x","selectionDelta","isSelectedY","y","enabled","blink","setBlink","interval","setInterval","clearInterval","useBlink","onFocus","hasFocus","onBlur","tabIndex","range","map","YNumberBox","XNumberBox","breakpoints","coordinate","delta","limit","a","sum","modSum","modulo","Stack","stack","width","flex","scrollbarWidth","slice","reverse","index","Input","submitInput","inputType","input","setInput","parseInput","useMemo","charAt","length","replace","newVal","marginLeft","InputOutput","output","requestingInput","bottomMarkerRef","scrollingContainerRef","scrollTop","clientHeight","scrollHeight","scrollIntoView","behavior","OutputContainer","OutputInnerScrollingContainer","split","InputContainer","fontWeight","ExpandCollapseArrows","columns","setColumns","showLeft","showRight","alignSelf","ControlPanelColumn","ExecutionControls","state","core","executor","step","canStep","walking","pause","walk","halted","running","run","reset","UnicodeCalculator","char","setChar","charCodeAt","num","setNum","n","String","fromCharCode","parseInt","WalkingSpeedControl","increaseWalkingDelay","walkingDelayIndex","flexDirection","decreaseWalkingDelay","ControlPanelRow","StateAndSpeed","DIRECTION_SYMBOL","direction","getSelectedCharacter","getCursorCharacter","stringMode","Direction","Left","Right","Up","Down","EditorControls","options","setChangeDirectionOnDirectionCharacters","setUseSelectionDirectionForCutCopyPaste","ControlPanel","useLocalStorageState","storageKey","initialValue","CodingSpace","Label","Column","flexGrow","acceptInput","CenteredScreenContentContainer","SquareBackground","M","text","B","befungeCommands","command","description","customCommandStyle","editorCommands","saturate","BefungeCommandRow","commandComponent","EditorCommandRow","InfoSidebarContent","Title","href","examples","Example","render","navigator","clipboard","writeText","setCode","ExampleSidebarContent","exampleDetails","InfoAndExamplesSidebar","infoOpen","setInfoOpen","examplesOpen","setExamplesOpen","topRightAbsolute8px","topLeftAbsolute20px","left","App","befungeState","localStorage","setItem","Coordinate","Code","BefungeCore","BefungeRunner","CodeEditor","document","onCut","onCopy","onPaste","cookieCode","getItem","set","JSON","parse","useGlobalBefungeState","ReactDOM","StrictMode","getElementById","this","other","horizontalDirection","DIRECTION_VECTOR","verticalDirection","Math","abs","majorVector","majorMax","minorVector","minorMax","constArray2","Array","fill","b","start","count","storedString","setValueState","newValue","stringify","walkingDelay","walkingDelays","history","future","autoBind","makeResetable","stepOver","setTimeout","recur","slowStep","renderPeriodically","i","quickStep","cursorAtBreakpoint","push","createHistoryPoint","point","pop","revertToPoint","copy","clone","setToCopy","resetPointWithEdits","resetPointWithoutEdits","forEach","col","_element","cloneDeep","isResetable","withEdits","resetPoint","isEqual","CodeEditorOptions","useSelectionDirectionForCutCopyPaste","changeDirectionOnDirectionCharacters","externalOnChange","deleteMode","newFocusMethod","setHistoryPoint","clearAll","paste","get","historyPointToGoBackTo","undo","futurePointToGoBackTo","redo","buttons","shiftKey","ctrlKey","metaKey","handleKeyboardShortcuts","handleEnteredCharacter","match","handleSelectionMovement","handleDeletion","clearSelection","textToCopy","selectionForEach","cellAction","rowEndAction","directions","getMajorAndMinorDirections","clipboardData","setData","preventDefault","getData","pasteCoords","newLineCoord","getDefaultIterationDirections","add","userPut","walkOrPause","runOrPause","fillSelection","changeTypingDirectionIfNeeded","stepSelection","movementDirection","negative","directionVector","iterationCoord","minor","times","major","x0","min","y0","character","COMMAND_CHARS","execute","moveCursor","isValidCommand","throwUnrecognisedCommand","includes","floor","Number","random","coord","equals","executionPut"],"mappings":"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","file":"static/js/main.1d17289c.chunk.js","sourcesContent":["import Color from \"color\";\n\nexport const Colors = {\n  DARKEST: Color(\"#0d1416\"),\n  DARKER: Color(\"#1d2426\"),\n  DARK: Color(\"#283134\"),\n  LIGHT: Color(\"#f7f9f9\"),\n  GREY: Color(\"#CCCCCC\"),\n  FOCUS: Color(\"#5577FF\"),\n  ACCENT_BLUE: Color(\"#5ed6ff\"),\n  ACCENT_ORANGE: Color(\"#FF875E\"),\n  SUPER_ACCENT: Color(\"#ff6e3d\"),\n  RED: Color(\"#FF0000\"),\n  BLUE: Color(\"#0000FF\"),\n  TRANSPARENT: Color(\"#000000\").alpha(0),\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Colors } from \"./Colors\";\nimport Color from \"color\";\n\ninterface Props {\n  size?: \"small\" | \"tiny\";\n  color?: Color;\n  children: React.ReactNode;\n  unselectable?: boolean;\n  monospace?: boolean;\n  style?: React.CSSProperties;\n}\n\nexport function T({\n  size,\n  color,\n  unselectable,\n  monospace,\n  children,\n  style,\n}: Props): React.ReactElement {\n  const finalStyle = {\n    color: (color || Colors.LIGHT.fade(0.2)).toString(),\n    fontSize:\n      size === \"tiny\" ? 8 : size === \"small\" ? 11 : size === \"big\" ? 16 : 12,\n    fontFamily: monospace ? \"monospace\" : undefined,\n    ...style,\n  };\n\n  return unselectable ? (\n    <UnselectableText style={finalStyle}>{children}</UnselectableText>\n  ) : (\n    <div style={finalStyle}>{children}</div>\n  );\n}\n\nconst UnselectableText = styled.div`\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n`;\n","import { useState, useRef, useEffect } from \"react\";\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function useHover(): [React.MutableRefObject<any>, boolean] {\n  const [value, setValue] = useState(false);\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const ref: any = useRef(null);\n\n  const handleMouseOver = (): void => setValue(true);\n  const handleMouseOut = (): void => setValue(false);\n\n  useEffect((): void | (() => void) => {\n    const node = ref.current;\n    if (node) {\n      node.addEventListener(\"mouseover\", handleMouseOver);\n      node.addEventListener(\"mouseout\", handleMouseOut);\n\n      return (): void => {\n        node.removeEventListener(\"mouseover\", handleMouseOver);\n        node.removeEventListener(\"mouseout\", handleMouseOut);\n      };\n    }\n  }, []);\n\n  return [ref, value];\n}\n","import React from \"react\";\nimport { T } from \"../T\";\nimport Color from \"color\";\nimport { useHover } from \"../useHover\";\n\nexport interface ButtonProps {\n  label: string | React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  textStyle?: React.CSSProperties;\n  backgroundColor?: Color;\n  textColor: Color;\n  borderColor?: Color;\n}\n\nexport function BaseButton({\n  label,\n  onClick,\n  disabled,\n  style,\n  textStyle,\n  backgroundColor,\n  textColor,\n}: ButtonProps): React.ReactElement {\n  const [ref, hovered] = useHover();\n  const fade = disabled ? 0.4 : hovered ? 0.15 : 0;\n\n  return (\n    <button\n      onClick={onClick}\n      style={{\n        minWidth: 60,\n        paddingLeft: 12,\n        paddingRight: 12,\n        height: 32,\n        borderRadius: 4,\n        border: \"none\",\n        cursor: disabled ? \"default\" : \"pointer\",\n        backgroundColor:\n          backgroundColor?.fade(fade).toString() || \"transparent\",\n        ...style,\n      }}\n      ref={ref}\n    >\n      <T color={textColor.fade(fade)} style={textStyle}>\n        {typeof label === \"string\" ? label.toUpperCase() : label}\n      </T>\n    </button>\n  );\n}\n","import React from \"react\";\nimport { BaseButton } from \"./BaseButton\";\nimport Color from \"color\";\nimport { Colors } from \"../Colors\";\n\ninterface Props {\n  label: React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  color?: Color;\n}\n\nexport function Button({\n  color = Colors.LIGHT.fade(0.2),\n  ...rest\n}: Props): React.ReactElement {\n  return (\n    <BaseButton\n      backgroundColor={color || Colors.LIGHT.fade(0.2)}\n      textColor={color.isLight() ? Colors.DARKEST : Colors.LIGHT}\n      {...rest}\n    />\n  );\n}\n","import React from \"react\";\nimport { IconButton as MuiIconButton } from \"@material-ui/core\";\nimport { useHover } from \"../useHover\";\nimport Color from \"color\";\nimport { Colors } from \"../Colors\";\n\ninterface Props {\n  onClick: () => void;\n  color?: Color;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  children: React.ReactNode;\n  \"aria-label\"?: string;\n}\n\nexport function IconButton({\n  color = Colors.ACCENT_BLUE,\n  disabled,\n  style,\n  children,\n  ...rest\n}: Props): React.ReactElement {\n  const [ref, hovered] = useHover();\n  const fade = disabled ? 0.4 : hovered ? 0.15 : 0;\n\n  return (\n    <MuiIconButton\n      style={{\n        color: color?.fade(fade).toString(),\n        ...style,\n      }}\n      ref={ref}\n      disabled={disabled}\n      {...rest}\n    >\n      {children}\n    </MuiIconButton>\n  );\n}\n","import React from \"react\";\nimport { Colors } from \"../Colors\";\nimport Color from \"color\";\nimport { BaseButton } from \"./BaseButton\";\n\ninterface Props {\n  label: React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  color?: Color;\n}\n\nexport function MiniButton({\n  label,\n  color = Colors.LIGHT.fade(0.2),\n  style,\n  ...rest\n}: Props): React.ReactElement {\n  return (\n    <BaseButton\n      label={<div style={{ marginBottom: 2.4 }}>{label}</div>}\n      style={{\n        minWidth: 16,\n        maxWidth: 16,\n        minHeight: 16,\n        maxHeight: 16,\n        padding: 0,\n        ...style,\n      }}\n      borderColor={color}\n      textColor={color}\n      {...rest}\n    />\n  );\n}\n","import React from \"react\";\nimport { Colors } from \"../Colors\";\nimport Color from \"color\";\nimport { BaseButton } from \"./BaseButton\";\n\ninterface Props {\n  label: React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  color?: Color;\n}\n\nexport function TextButton({\n  color = Colors.ACCENT_BLUE,\n  style,\n  ...rest\n}: Props): React.ReactElement {\n  return (\n    <BaseButton\n      style={{\n        minWidth: 16,\n        maxWidth: 16,\n        minHeight: 16,\n        maxHeight: 16,\n        padding: 0,\n        ...style,\n      }}\n      textColor={color}\n      textStyle={{ fontSize: 18 }}\n      {...rest}\n    />\n  );\n}\n","import React, { useState } from \"react\";\nimport { ImCheckboxChecked, ImCheckboxUnchecked } from \"react-icons/im\";\nimport MaterialUICheckbox from \"@material-ui/core/Checkbox\";\nimport { Colors } from \"./Colors\";\nimport { useHover } from \"./useHover\";\n\ninterface Props<T extends string> {\n  object: { [key in T]: boolean };\n  k: T;\n  onChange: (newValue: boolean) => void;\n  style?: React.CSSProperties;\n}\n\nexport function Checkbox<T extends string>({\n  object,\n  k,\n  onChange,\n  style,\n}: Props<T>): React.ReactElement {\n  const [renderHelper, setRenderHelper] = useState(false);\n  const [ref, hovered] = useHover();\n  const color = Colors.ACCENT_BLUE.fade(hovered ? 0.2 : 0).toString();\n\n  return (\n    <div style={style} ref={ref}>\n      <div style={{ margin: -4 }}>\n        <MaterialUICheckbox\n          checked={object[k]}\n          onChange={(event): void => {\n            onChange(event.target.checked);\n            setRenderHelper(!renderHelper);\n          }}\n          style={{ backgroundColor: \"transparent\" }}\n          disableRipple\n          icon={<ImCheckboxUnchecked size={11} color={color} />}\n          checkedIcon={<ImCheckboxChecked size={11} color={color} />}\n        />\n      </div>\n    </div>\n  );\n}\n","import styled from \"styled-components\";\n\nexport const Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n","import styled from \"styled-components\";\nimport { Colors } from \"./Colors\";\n\nexport const SidebarTitle = styled.div`\n  color: ${Colors.LIGHT.toString()};\n  font-size: 18px;\n`;\n","import React, { useState } from \"react\";\nimport { Colors } from \"./Colors\";\nimport { Row } from \"./Row\";\nimport { SidebarTitle } from \"./SidebarTitle\";\nimport styled from \"styled-components\";\nimport { IconButton } from \"ui\";\nimport { AiOutlinePlus, AiOutlineMinus } from \"react-icons/ai\";\n\ninterface Props {\n  title: string;\n  children: React.ReactNode;\n  collapsible?: boolean;\n  startCollapsed?: boolean;\n}\n\nexport function SidebarSection({\n  title,\n  children,\n  collapsible = false,\n  startCollapsed = collapsible,\n}: Props): React.ReactElement {\n  const [collapsed, setCollapsed] = useState(startCollapsed);\n\n  return (\n    <>\n      <div\n        style={{\n          maxHeight: collapsed ? 160 : undefined,\n          overflow: \"hidden\",\n          position: \"relative\",\n          marginTop: 24,\n        }}\n      >\n        <Row\n          style={{\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            marginBottom: 12,\n          }}\n        >\n          <SidebarTitle>{title}</SidebarTitle>\n          {collapsible && (\n            <IconButton\n              style={{ marginRight: -4 }}\n              onClick={(): void => setCollapsed(!collapsed)}\n            >\n              {collapsed ? (\n                <AiOutlinePlus size={12} />\n              ) : (\n                <AiOutlineMinus size={12} />\n              )}\n            </IconButton>\n          )}\n        </Row>\n        {children}\n        {collapsed && <FadeOut onClick={(): void => setCollapsed(false)} />}\n      </div>\n    </>\n  );\n}\n\nconst FadeOut = styled.div`\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 40px;\n  background: linear-gradient(transparent, ${Colors.DARKER.toString()});\n`;\n","import React, { useEffect, useRef } from \"react\";\nimport \"./TextField.css\";\n\ninterface Props {\n  value: string | number;\n  onChange: (newVal: string) => void;\n  style: React.CSSProperties;\n  focusFirstRender?: boolean;\n  onSubmit?: () => void;\n}\n\nexport function TextField({\n  value,\n  onChange,\n  style,\n  focusFirstRender,\n  onSubmit,\n}: Props): React.ReactElement {\n  const inputRef = useRef<HTMLInputElement>(null);\n  useEffect(() => {\n    if (focusFirstRender) inputRef.current?.focus();\n  }, []);\n\n  return (\n    <input\n      ref={inputRef}\n      value={value}\n      className=\"input\"\n      onChange={(e): void => {\n        onChange(e.target.value);\n      }}\n      onKeyDown={(e): void => {\n        if (e.key === \"Enter\") onSubmit?.();\n      }}\n      style={style}\n    />\n  );\n}\n","import React from \"react\";\nimport { Colors } from \"./Colors\";\nimport ReactSidebar from \"react-sidebar\";\nimport { IconButton } from \"ui\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport styled from \"styled-components\";\n\ninterface Props {\n  content: React.ReactElement;\n  page: React.ReactElement;\n  open: boolean;\n  onSetOpen: (open: boolean) => void;\n  pullRight?: boolean;\n}\n\nexport function Sidebar({\n  content,\n  page,\n  onSetOpen,\n  ...rest\n}: Props): React.ReactElement {\n  return (\n    <ReactSidebar\n      sidebar={\n        <Container>\n          <IconButton\n            aria-label=\"close-side-bar\"\n            style={{\n              position: \"absolute\",\n              top: 8,\n              right: 8,\n            }}\n            onClick={(): void => onSetOpen(false)}\n          >\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n          {content}\n        </Container>\n      }\n      styles={{\n        sidebar: { background: Colors.DARKER.toString() },\n        content: { display: \"flex\" },\n        overlay: { bottom: undefined, top: undefined },\n      }}\n      onSetOpen={onSetOpen}\n      {...rest}\n    >\n      {page}\n    </ReactSidebar>\n  );\n}\n\nconst Container = styled.div`\n  padding: 24px;\n  width: 240px;\n  font-size: 12px;\n  color: ${Colors.LIGHT.fade(0.2).toString()};\n`;\n","import React from \"react\";\nimport { Sidebar } from \"ui\";\n\ninterface Props {\n  leftContent: React.ReactElement;\n  rightContent: React.ReactElement;\n  page: React.ReactElement;\n  leftOpen: boolean;\n  rightOpen: boolean;\n  onSetLeftOpen: (open: boolean) => void;\n  onSetRightOpen: (open: boolean) => void;\n}\n\nexport function Sidebars({\n  leftContent,\n  rightContent,\n  page,\n  leftOpen,\n  rightOpen,\n  onSetLeftOpen,\n  onSetRightOpen,\n}: Props): React.ReactElement {\n  return (\n    <Sidebar\n      open={leftOpen}\n      onSetOpen={onSetLeftOpen}\n      content={leftContent}\n      page={\n        <Sidebar\n          pullRight\n          open={rightOpen}\n          onSetOpen={onSetRightOpen}\n          content={rightContent}\n          page={page}\n        />\n      }\n    />\n  );\n}\n","import React, { MouseEvent } from \"react\";\nimport styled from \"styled-components\";\nimport { Colors } from \"ui\";\n\ninterface Props {\n  val: string;\n  selectionOpacity?: number | false;\n  cursored?: boolean;\n  isBreakpoint?: boolean;\n  onMouseDown?: (e: MouseEvent) => void;\n  onMouseOver?: (e: MouseEvent) => void;\n  onDoubleClick?: () => void;\n}\n\nfunction UnMemoizedSquare({\n  val,\n  selectionOpacity = false,\n  cursored,\n  isBreakpoint,\n  onMouseDown,\n  onMouseOver,\n  onDoubleClick,\n}: Props): React.ReactElement {\n  let color = Colors.TRANSPARENT;\n  if (selectionOpacity) color = color.mix(Colors.ACCENT_BLUE, selectionOpacity);\n  if (cursored) color = color.mix(Colors.ACCENT_ORANGE, 0.3);\n  if (isBreakpoint)\n    color = cursored ? color.mix(Colors.BLUE, 0.5) : color.mix(Colors.RED, 0.5);\n\n  return (\n    <Background\n      style={{ backgroundColor: color.toString() }}\n      onMouseDown={onMouseDown}\n      onMouseOver={onMouseOver}\n      onDoubleClick={onDoubleClick}\n    >\n      {val}\n    </Background>\n  );\n}\n\nconst Background = styled.div`\n  width: 14px;\n  height: 14px;\n  font-size: 12px;\n  font-family: monospace;\n  border-right: 1px solid #dddddd;\n  border-bottom: 1px solid #dddddd;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n`;\n\nfunction areEqual(prev: Props, next: Props): boolean {\n  return (\n    prev.val === next.val &&\n    prev.selectionOpacity === next.selectionOpacity &&\n    prev.cursored === next.cursored &&\n    prev.isBreakpoint === next.isBreakpoint\n  );\n}\nexport const Square = React.memo(UnMemoizedSquare, areEqual);\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { Colors, Row, T } from \"ui\";\nimport { Square } from \"./Square\";\nimport { Coordinate, modulo, range } from \"utilities\";\nimport { Code, CodeEditor } from \"logic\";\nimport styled from \"styled-components\";\nimport { useBlink } from \"./useBlink\";\n\nexport function Grid({\n  code,\n  limits,\n  cursor,\n  editor: e,\n}: {\n  code: Code;\n  limits: Coordinate;\n  cursor: Coordinate;\n  editor: CodeEditor;\n}): React.ReactElement {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [focused, setFocused] = useState(false);\n  useEffect(() => {\n    containerRef.current?.focus();\n    e.setFocusMethod((): void => containerRef.current?.focus());\n  }, []);\n\n  const isSelectedX = useCallback(\n    getSelectionCheckFunction(\n      e.selection.x,\n      e.selectionDelta.x,\n      limits.x,\n      focused\n    ),\n    [e.selection.x, e.selectionDelta.x, limits.x, focused]\n  );\n\n  const isSelectedY = useCallback(\n    getSelectionCheckFunction(\n      e.selection.y,\n      e.selectionDelta.y,\n      limits.y,\n      focused\n    ),\n    [e.selection.y, e.selectionDelta.y, limits.y, focused]\n  );\n\n  const { blink } = useBlink(focused);\n  const selectionOpacity = blink ? 0.35 : 0.2;\n\n  return (\n    <Container\n      focused={focused}\n      ref={containerRef}\n      onFocus={(): void => {\n        e.hasFocus = true;\n        setFocused(true);\n      }}\n      onBlur={(): void => {\n        e.hasFocus = false;\n        setFocused(false);\n      }}\n      tabIndex={0}\n    >\n      {range(-1, limits.y + 1).map((y) => (\n        <Row key={y} style={{ justifyContent: \"flex-end\" }}>\n          {range(-1, limits.x + 1).map((x) =>\n            x === -1 && y === -1 ? null : x === -1 ? (\n              <YNumberBox key={`${x},${y}`}>\n                <T size=\"tiny\" color={Colors.DARK.fade(0.4)}>\n                  {y}\n                </T>\n              </YNumberBox>\n            ) : y === -1 ? (\n              <XNumberBox key={`${x},${y}`}>\n                <T size=\"tiny\" color={Colors.DARK.fade(0.4)}>\n                  {x}\n                </T>\n              </XNumberBox>\n            ) : (\n              <Square\n                val={code.code[x][y]}\n                selectionOpacity={\n                  isSelectedX(x) && isSelectedY(y) && selectionOpacity\n                }\n                cursored={x === cursor.x && y === cursor.y}\n                isBreakpoint={code.breakpoints[x][y]}\n                onMouseDown={e.onMouseDown(x, y)}\n                onMouseOver={e.onMouseOver(x, y)}\n                onDoubleClick={e.onDoubleClick(x, y)}\n                key={`${x},${y}`}\n              />\n            )\n          )}\n        </Row>\n      ))}\n    </Container>\n  );\n}\n\nfunction getSelectionCheckFunction(\n  coordinate: number,\n  delta: number,\n  limit: number,\n  focused: boolean\n): (a: number) => boolean {\n  if (!focused) return (): boolean => false;\n  if (delta === 0) return (a: number): boolean => a === coordinate;\n  const sum = coordinate + delta;\n  const modSum = modulo(coordinate + delta, limit);\n  if (delta < 0) {\n    if (modSum === sum)\n      return (a: number): boolean => coordinate + delta <= a && a <= coordinate;\n    else return (a: number): boolean => a <= coordinate || a >= modSum;\n  } else {\n    if (modSum === sum)\n      return (a: number): boolean => coordinate <= a && a <= coordinate + delta;\n    else return (a: number): boolean => a <= modSum || a >= coordinate;\n  }\n}\n\nconst Container = styled.div<{ focused: boolean }>`\n  padding-right: 8px;\n  padding-bottom: 8px;\n  padding-left: 4px;\n  padding-top: 4px;\n  background-color: ${Colors.LIGHT.toString()};\n  border-radius: 4px;\n  outline: 0 none !important;\n  ${({ focused }): string => {\n    return focused\n      ? `box-shadow: 0px 0px 0px 2px ${Colors.FOCUS.toString()}`\n      : \"\";\n  }};\n`;\n\nconst XNumberBox = styled.div`\n  width: 15px;\n  padding-bottom: 4px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n  border-bottom: 1px solid #dddddd;\n`;\n\nconst YNumberBox = styled.div`\n  height: 15px;\n  padding-right: 4px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  border-right: 1px solid #dddddd;\n`;\n","import { useEffect, useState } from \"react\";\n\nexport function useBlink(enabled?: boolean): { blink: boolean } {\n  const [blink, setBlink] = useState(false);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (enabled) setBlink((blink) => !blink);\n    }, 600);\n    return (): void => clearInterval(interval);\n  }, [enabled]);\n\n  return { blink };\n}\n","import React from \"react\";\nimport { Colors } from \"ui\";\n\ninterface Props {\n  stack: number[];\n  style?: React.CSSProperties;\n}\n\nexport function Stack({ stack, style }: Props): React.ReactElement {\n  return (\n    <div\n      style={{\n        width: 120,\n        flex: 1,\n        backgroundColor: Colors.LIGHT.toString(),\n        padding: 8,\n        overflow: \"scroll\",\n        scrollbarWidth: \"none\",\n        ...style,\n      }}\n    >\n      {stack\n        .slice()\n        .reverse()\n        .map((value, index) => (\n          <div key={index}>{value}</div>\n        ))}\n    </div>\n  );\n}\n","import React, { useCallback, useMemo, useState } from \"react\";\nimport { TextField, Button, Colors } from \"ui\";\n\ninterface Props {\n  submitInput: (input: string) => void;\n  inputType: \"number\" | \"character\";\n}\n\nexport function Input({ submitInput, inputType }: Props): React.ReactElement {\n  const [input, setInput] = useState(\"\");\n\n  const parseInput = useMemo(\n    () =>\n      inputType === \"character\"\n        ? (input: string): string => input.charAt(input.length - 1)\n        : inputType === \"number\"\n        ? (input: string): string => input.replace(/[^0-9]/, \"\")\n        : (input: string): string => input,\n    [inputType]\n  );\n\n  const onSubmit = useCallback((): void => {\n    submitInput(input);\n    setInput(\"\");\n  }, [input]);\n\n  return (\n    <>\n      <TextField\n        value={input}\n        onChange={(newVal): void => setInput(parseInput(newVal))}\n        style={{ width: 80 }}\n        focusFirstRender\n        onSubmit={onSubmit}\n      />\n      <Button\n        label={\"Submit\"}\n        onClick={onSubmit}\n        style={{ marginLeft: 8 }}\n        color={Colors.SUPER_ACCENT}\n      />\n    </>\n  );\n}\n","import React, { useEffect, useRef } from \"react\";\nimport { Colors } from \"ui\";\nimport { InputRequestStatus } from \"logic\";\nimport styled from \"styled-components\";\nimport { Input } from \"./Input\";\n\ninterface Props {\n  output: string;\n  requestingInput: InputRequestStatus;\n  submitInput: (input: string) => void;\n  style?: React.CSSProperties;\n}\n\nexport function InputOutput({\n  output,\n  requestingInput,\n  submitInput,\n}: Props): React.ReactElement {\n  const bottomMarkerRef = useRef<HTMLDivElement>(null);\n  const scrollingContainerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const top = scrollingContainerRef.current?.scrollTop || 0; // scrolled distance from top\n    const height = scrollingContainerRef.current?.clientHeight || 0; // component height\n    const scrollHeight = scrollingContainerRef.current?.scrollHeight || 0; // total height of content\n    const nearBottom = scrollHeight - (top + height) < 20;\n    if (nearBottom) {\n      bottomMarkerRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }, [output]);\n\n  return (\n    <>\n      <OutputContainer>\n        <OutputInnerScrollingContainer ref={scrollingContainerRef}>\n          {output.split(\"\\n\").map((x, index) => (\n            <div key={index}>{x}</div>\n          ))}\n          <div ref={bottomMarkerRef} />\n        </OutputInnerScrollingContainer>\n      </OutputContainer>\n      <InputContainer>\n        <div>\n          {requestingInput === \"character\" ? (\n            <div style={{ color: \"#000033\", fontWeight: 600 }}>\n              Please enter a character:{\" \"}\n              <Input submitInput={submitInput} inputType=\"character\" />\n            </div>\n          ) : requestingInput === \"number\" ? (\n            <div style={{ color: \"#000033\", fontWeight: 600 }}>\n              Please enter a number:{\" \"}\n              <Input submitInput={submitInput} inputType=\"number\" />\n            </div>\n          ) : requestingInput === \"divideBy0\" ? (\n            <div style={{ color: \"#000033\", fontWeight: 600 }}>\n              Division by 0. Please enter the result:{\" \"}\n              <Input submitInput={submitInput} inputType=\"number\" />\n            </div>\n          ) : (\n            <div style={{ color: Colors.DARK.fade(0.3).toString() }}>\n              No input needed\n            </div>\n          )}\n        </div>\n      </InputContainer>\n    </>\n  );\n}\n\nconst OutputContainer = styled.div`\n  flex: 1;\n  height: 0px;\n  display: flex;\n`;\n\nconst OutputInnerScrollingContainer = styled.div`\n  flex: 1;\n  width: 0px;\n  background-color: ${Colors.LIGHT.toString()};\n  overflow: scroll;\n  scrollbar-width: thin;\n  flex-direction: column;\n  padding: 8px;\n`;\n\nconst InputContainer = styled.div`\n  background-color: ${Colors.LIGHT.toString()};\n  border-top: 1px solid ${Colors.GREY.toString()};\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  height: 48px;\n`;\n","import { Colors } from \"ui\";\nimport React from \"react\";\nimport { BsChevronCompactLeft, BsChevronCompactRight } from \"react-icons/bs\";\nimport { IconButton } from \"ui\";\n\nexport function ExpandCollapseArrows({\n  columns,\n  setColumns,\n}: {\n  columns: number;\n  setColumns: (newVal: number) => void;\n}): React.ReactElement {\n  const showLeft = columns > 1;\n  const showRight = columns < 3;\n\n  return (\n    <div\n      style={{\n        alignSelf: \"center\",\n        marginRight: -20,\n        display: \"flex\",\n        marginLeft: columns >= 2 ? 12 : 4,\n        backgroundColor: Colors.DARKEST.toString(),\n        paddingLeft: 2,\n        paddingRight: 2,\n        borderRadius: 4,\n      }}\n    >\n      <div\n        style={{\n          width: 8,\n          overflow: \"hidden\",\n        }}\n      >\n        {showLeft && (\n          <IconButton\n            aria-label=\"collapse-options\"\n            style={{\n              marginLeft: -20,\n              marginTop: -8,\n              marginBottom: -8,\n              backgroundColor: \"transparent\",\n            }}\n            onClick={(): void => setColumns(columns - 1)}\n          >\n            <BsChevronCompactLeft />\n          </IconButton>\n        )}\n      </div>\n\n      <div\n        style={{\n          width: 8,\n          overflow: \"hidden\",\n        }}\n      >\n        {showRight && (\n          <IconButton\n            aria-label=\"expand-options\"\n            style={{\n              marginLeft: -20,\n              marginTop: -8,\n              marginBottom: -8,\n              backgroundColor: \"transparent\",\n            }}\n            onClick={(): void => setColumns(columns + 1)}\n          >\n            <BsChevronCompactRight />\n          </IconButton>\n        )}\n      </div>\n    </div>\n  );\n}\n","import styled from \"styled-components\";\n\nexport const ControlPanelColumn = styled.div`\n  align-self: stretch;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`;\n","import React from \"react\";\nimport { Button } from \"ui\";\nimport { GlobalBefungeState } from \"logic\";\nimport { ControlPanelColumn } from \"./ControlPanelColumn\";\n\nexport function ExecutionControls({\n  state,\n}: {\n  state: GlobalBefungeState;\n}): React.ReactElement {\n  const { core, executor } = state;\n\n  return (\n    <ControlPanelColumn>\n      <Button label={\"Step\"} onClick={core.step} disabled={!core.canStep()} />\n      <Button\n        label={executor.walking ? \"Pause\" : \"Walk\"}\n        onClick={executor.walking ? executor.pause : executor.walk}\n        style={{ marginTop: 8 }}\n        disabled={core.halted}\n      />\n      <Button\n        label={executor.running ? \"Pause\" : \"Run\"}\n        onClick={executor.running ? executor.pause : executor.run}\n        style={{ marginTop: 8 }}\n        disabled={core.halted}\n      />\n      <Button\n        label={\"Reset\"}\n        onClick={executor.reset}\n        style={{ marginTop: 8 }}\n      />\n    </ControlPanelColumn>\n  );\n}\n","import { Colors, Row, T, TextField } from \"ui\";\nimport React, { useState } from \"react\";\n\nexport function UnicodeCalculator(): React.ReactElement {\n  const [char, setChar] = useState(\"A\");\n  const [num, setNum] = useState(\"A\".charCodeAt(0).toString());\n\n  return (\n    <>\n      <Row style={{ flex: 1, justifyContent: \"center\", marginBottom: 6 }}>\n        <TextField\n          value={char}\n          onChange={(newVal): void => {\n            const input = newVal;\n            const value = input.charAt(input.length - 1);\n            setChar(value);\n            setNum(value ? value.charCodeAt(0).toString() : \"\");\n          }}\n          style={{\n            backgroundColor: Colors.DARKER.toString(),\n            color: Colors.LIGHT.toString(),\n            width: 11,\n          }}\n        />\n        <T size=\"small\" unselectable style={{ marginLeft: 16 }}>\n          n\n        </T>\n        <TextField\n          value={num}\n          onChange={(newVal): void => {\n            const n = newVal.replace(/[^0-9]/, \"\");\n            setNum(n);\n            setChar(String.fromCharCode(parseInt(n)));\n          }}\n          style={{\n            backgroundColor: Colors.DARKER.toString(),\n            color: Colors.LIGHT.toString(),\n            width: 40,\n            marginLeft: 16,\n          }}\n        />\n      </Row>\n    </>\n  );\n}\n","import { Row, T, MiniButton } from \"ui\";\nimport React from \"react\";\nimport { BefungeRunner } from \"logic\";\n\nexport function WalkingSpeedControl({\n  executor,\n}: {\n  executor: BefungeRunner;\n}): React.ReactElement {\n  return (\n    <>\n      <T>Walking speed:</T>\n      <Row style={{ marginLeft: 8, justifyContent: \"space-between\" }}>\n        <MiniButton\n          label={\"-\"}\n          onClick={executor.increaseWalkingDelay}\n          disabled={executor.walkingDelayIndex >= 4}\n        />\n        <T\n          size=\"small\"\n          unselectable\n          style={{\n            width: 20,\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"center\",\n          }}\n        >\n          {5 - executor.walkingDelayIndex}\n        </T>\n        <MiniButton\n          label={\"+\"}\n          onClick={executor.decreaseWalkingDelay}\n          disabled={executor.walkingDelayIndex <= 0}\n        />\n      </Row>\n    </>\n  );\n}\n","import styled from \"styled-components\";\nimport { Row } from \"ui\";\n\nexport const ControlPanelRow = styled(Row)`\n  align-self: stretch;\n  justify-content: space-between;\n  align-items: center;\n`;\n","import React from \"react\";\nimport { Colors, T } from \"ui\";\nimport { Direction } from \"utilities\";\nimport { GlobalBefungeState } from \"logic\";\nimport { UnicodeCalculator } from \"./UnicodeCalculator\";\nimport { WalkingSpeedControl } from \"./WalkingSpeedControl\";\nimport { ControlPanelRow } from \"./ControlPanelRow\";\nimport { ControlPanelColumn } from \"./ControlPanelColumn\";\n\nexport function StateAndSpeed({\n  state,\n}: {\n  state: GlobalBefungeState;\n}): React.ReactElement {\n  const { editor, core, executor } = state;\n\n  return (\n    <ControlPanelColumn style={{ marginLeft: 16 }}>\n      <ControlPanelRow>\n        <T size=\"small\">Code input direction:</T>\n        <T\n          size=\"small\"\n          style={{ marginLeft: 4, color: Colors.ACCENT_BLUE.toString() }}\n        >\n          {DIRECTION_SYMBOL[editor.direction]}\n        </T>\n      </ControlPanelRow>\n      <ControlPanelRow>\n        <T size=\"small\">Input cursor value:</T>\n        <T\n          size=\"small\"\n          style={{ marginLeft: 4, color: Colors.ACCENT_BLUE.toString() }}\n        >\n          {editor.getSelectedCharacter().charCodeAt(0)}\n        </T>\n      </ControlPanelRow>\n      <ControlPanelRow>\n        <T size=\"small\">Execution direction:</T>\n        <T\n          size=\"small\"\n          style={{ marginLeft: 4, color: Colors.ACCENT_ORANGE.toString() }}\n        >\n          {DIRECTION_SYMBOL[core.direction]}\n        </T>\n      </ControlPanelRow>\n      <ControlPanelRow>\n        <T size=\"small\">Execution cursor value:</T>\n        <T\n          size=\"small\"\n          style={{ marginLeft: 4, color: Colors.ACCENT_ORANGE.toString() }}\n        >\n          {core.getCursorCharacter().charCodeAt(0)}\n        </T>\n      </ControlPanelRow>\n      <ControlPanelRow>\n        <T size=\"small\">String mode enabled:</T>\n        <T size=\"small\" style={{ marginLeft: 4 }}>\n          {core.stringMode ? \"Yes\" : \"No\"}\n        </T>\n      </ControlPanelRow>\n      <ControlPanelRow style={{ marginTop: 2, marginBottom: 2 }}>\n        <WalkingSpeedControl executor={executor} />\n      </ControlPanelRow>\n      <T size=\"small\">UTF-16 value translator:</T>\n      <ControlPanelRow>\n        <UnicodeCalculator />\n      </ControlPanelRow>\n    </ControlPanelColumn>\n  );\n}\n\nconst DIRECTION_SYMBOL = {\n  [Direction.Left]: \"\",\n  [Direction.Right]: \"\",\n  [Direction.Up]: \"\",\n  [Direction.Down]: \"\",\n};\n","import React from \"react\";\nimport { Checkbox, T } from \"ui\";\nimport { GlobalBefungeState } from \"logic\";\nimport { ControlPanelColumn } from \"./ControlPanelColumn\";\nimport { ControlPanelRow } from \"./ControlPanelRow\";\n\nexport function EditorControls({\n  state,\n}: {\n  state: GlobalBefungeState;\n}): React.ReactElement {\n  const { editor } = state;\n\n  return (\n    <ControlPanelColumn\n      style={{ marginLeft: 16, justifyContent: \"flex-start\" }}\n    >\n      <ControlPanelRow>\n        <T size=\"small\" style={{ width: 120 }}>\n          Change input direction on{\" \"}\n          <span style={{ fontFamily: \"monospace\" }}>{\"<>^v\"}</span>:\n        </T>\n        <Checkbox\n          object={editor.options}\n          k={\"changeDirectionOnDirectionCharacters\"}\n          onChange={(newVal: boolean): void =>\n            editor.options.setChangeDirectionOnDirectionCharacters(newVal)\n          }\n          style={{ marginLeft: 4 }}\n        />\n      </ControlPanelRow>\n      <ControlPanelRow style={{ marginTop: 4 }}>\n        <T size=\"small\" style={{ width: 120 }}>\n          Cut/copy/paste in selection direction:\n        </T>\n        <Checkbox\n          object={editor.options}\n          k={\"useSelectionDirectionForCutCopyPaste\"}\n          onChange={(newVal: boolean): void =>\n            editor.options.setUseSelectionDirectionForCutCopyPaste(newVal)\n          }\n          style={{ marginLeft: 4 }}\n        />\n      </ControlPanelRow>\n    </ControlPanelColumn>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Colors } from \"ui\";\nimport { useLocalStorageState } from \"utilities\";\nimport { GlobalBefungeState } from \"logic\";\nimport { ExpandCollapseArrows } from \"./ExpandCollapseArrows\";\nimport { ExecutionControls } from \"./ExecutionControls\";\nimport { StateAndSpeed } from \"./StateAndSpeed\";\nimport { EditorControls } from \"./EditorControls\";\n\nexport function ControlPanel({\n  state,\n}: {\n  state: GlobalBefungeState;\n}): React.ReactElement {\n  const [columns, setColumns] = useLocalStorageState({\n    storageKey: \"controlPanelColumns\",\n    initialValue: 2,\n  });\n\n  return (\n    <Container style={{ flex: 1 }}>\n      <ExecutionControls state={state} />\n      {columns >= 2 && <StateAndSpeed state={state} />}\n      {columns >= 3 && <EditorControls state={state} />}\n      <ExpandCollapseArrows columns={columns} setColumns={setColumns} />\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  align-self: stretch;\n  display: flex;\n  flex-direction: row;\n  padding: 12px;\n  background-color: ${Colors.DARKER.toString()};\n  shadow: -2px 2px 4px rgba(0, 0, 0, 0.3);\n`;\n","import React, { ReactElement } from \"react\";\nimport styled from \"styled-components\";\nimport { Row, Colors } from \"ui\";\nimport { GlobalBefungeState } from \"logic\";\nimport { Grid } from \"./Grid\";\nimport { Stack } from \"./Stack\";\nimport { InputOutput } from \"./InputOutput\";\nimport { ControlPanel } from \"./ControlPanel\";\n\nexport function CodingSpace({\n  state,\n}: {\n  state: GlobalBefungeState;\n}): ReactElement {\n  const { limits, code, core, executor, editor } = state;\n\n  return (\n    <Container>\n      <div>\n        <Label>Code editor</Label>\n        <Grid\n          code={code}\n          limits={limits}\n          cursor={core.cursor}\n          editor={editor}\n        />\n      </div>\n      <Row style={{ marginTop: 16, width: 15 * limits.x, height: 220 }}>\n        <Column>\n          <Label>Stack</Label>\n          <Stack stack={core.stack} />\n        </Column>\n        <Column style={{ marginLeft: 16 }}>\n          <Label>Control panel</Label>\n          <ControlPanel state={state} />\n        </Column>\n        <Column style={{ marginLeft: 16, flexGrow: 1 }}>\n          <Label>Input + output</Label>\n          <InputOutput\n            output={core.output}\n            requestingInput={core.requestingInput}\n            submitInput={executor.acceptInput}\n          />\n        </Column>\n      </Row>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Column = styled.div`\n  align-self: stretch;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Label = styled.div`\n  margin-bottom: 6px;\n  font-size: 11px;\n  color: ${Colors.LIGHT.fade(0.2).toString()};\n`;\n","import React from \"react\";\n\nexport function CenteredScreenContentContainer({\n  children,\n}: {\n  children: React.ReactNode;\n}): React.ReactElement {\n  return (\n    <div\n      style={{\n        flexGrow: 1,\n        padding: 32,\n        display: \"flex\",\n        justifyContent: \"center\",\n      }}\n    >\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n        <div style={{ flexGrow: 1, minHeight: 24 }} />\n        {children}\n        <div style={{ flexGrow: 1, minHeight: 40 }} />\n      </div>\n    </div>\n  );\n}\n","import styled from \"styled-components\";\nimport { Colors } from \"ui\";\n\nexport const SquareBackground = styled.div`\n  width: 14px;\n  height: 14px;\n  font-size: 12px;\n  font-family: monospace;\n  background-color: ${Colors.LIGHT.toString()};\n  color: #000000;\n  border: 1px solid #bbbbbb;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n","import React from \"react\";\nimport { SquareBackground } from \"./SquareBackground\";\nimport styled from \"styled-components\";\n\nconst M = styled.text`\n  font-family: monospace;\n`;\n\nconst B = styled.text``;\n\nexport const befungeCommands = [\n  {\n    key: \"0\",\n\n    command: (\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          marginBottom: 8,\n        }}\n      >\n        <SquareBackground>0</SquareBackground>\n        <SquareBackground>9</SquareBackground>\n      </div>\n    ),\n    description: (\n      <div style={{ marginTop: 8 }}>\n        Push the corresponding number onto the stack\n      </div>\n    ),\n    customCommandStyle: true,\n  },\n  {\n    key: \"+\",\n    command: \"+\",\n    description: (\n      <div>\n        <B>Addition:</B> pop two values <M>a</M> then <M>b</M>, then push the\n        result of <M>a + b</M>\n      </div>\n    ),\n  },\n  {\n    key: \"-\",\n    command: \"-\",\n    description: (\n      <div>\n        <B>Subtraction:</B> pop two values <M>a</M> then <M>b</M>, then push the\n        result of <M>b - a</M>\n      </div>\n    ),\n  },\n  {\n    key: \"*\",\n    command: \"*\",\n    description: (\n      <div>\n        <B>Multiplication:</B> pop two values <M>a</M> then <M>b</M>, then push\n        the result of <M>a * b</M>\n      </div>\n    ),\n  },\n  {\n    key: \"/\",\n    command: \"/\",\n    description: (\n      <div>\n        <B>Integer division:</B> pop two values <M>a</M> then <M>b</M>, then\n        push the result of <M>b / a</M>, rounded down. If a is zero, ask the\n        user what result they want.\n      </div>\n    ),\n  },\n  {\n    key: \"%\",\n    command: \"%\",\n    description: (\n      <div>\n        <B>Modulo:</B> pop two values <M>a</M> then <M>b</M>, then push the\n        remainder of the integer division of <M>b / a</M>.\n      </div>\n    ),\n  },\n  {\n    key: \"!\",\n    command: \"!\",\n    description: (\n      <div>\n        <B>Not:</B> pop a value. If the value is <M>0</M>, push <M>1</M>;\n        otherwise, push <M>0</M>.\n      </div>\n    ),\n  },\n  {\n    key: \"`\",\n    command: \"`\",\n    description: (\n      <div>\n        <B>Comparison:</B> pop two values <M>a</M> then <M>b</M>, then push{\" \"}\n        <M>1</M> if <M>b {\">\"} a</M>, otherwise <M>0</M>.\n      </div>\n    ),\n  },\n  { key: \">\", command: \">\", description: <div>Start moving right</div> },\n  { key: \"<\", command: \"<\", description: <div>Start moving left</div> },\n  { key: \"^\", command: \"^\", description: <div>Start moving up</div> },\n  { key: \"v\", command: \"v\", description: <div>Start moving down</div> },\n  {\n    key: \"?\",\n    command: \"?\",\n    description: <div>Start moving in a random cardinal direction</div>,\n  },\n  {\n    key: \"_\",\n    command: \"_\",\n    description: (\n      <div>\n        <B>Horizontal if:</B> pop a value; set direction to right if value is{\" \"}\n        <M>0</M>, set to left otherwise\n      </div>\n    ),\n  },\n  {\n    key: \"|\",\n    command: \"|\",\n    description: (\n      <div>\n        <B>Vertical if:</B> pop a value; set direction to down if value is{\" \"}\n        <M>0</M>, set to up otherwise\n      </div>\n    ),\n  },\n  {\n    key: '\"',\n    command: '\"',\n    description: (\n      <div>\n        <B>Toggle string-mode:</B> push each character&apos;s UTF-16 value all\n        the way up to the next <M>{'\"'}</M>\n      </div>\n    ),\n  },\n  { key: \":\", command: \":\", description: <div>Duplicate top stack value</div> },\n  { key: \"\\\\\", command: \"\\\\\", description: <div>Swap top stack values</div> },\n  {\n    key: \"$\",\n    command: \"$\",\n    description: <div>Pop (remove) top stack value and discard</div>,\n  },\n  {\n    key: \".\",\n    command: \".\",\n    description: (\n      <div>\n        <B>Integer output:</B> pop top of stack and output it as an integer\n      </div>\n    ),\n  },\n  {\n    key: \",\",\n    command: \",\",\n    description: (\n      <div>\n        <B>Character output:</B> pop top of stack and output its UTF-16\n        character\n      </div>\n    ),\n  },\n  {\n    key: \"&\",\n    command: \"&\",\n    description: (\n      <div>\n        <B>Integer input:</B> request an integer from the user and push it to\n        the stack\n      </div>\n    ),\n  },\n  {\n    key: \"~\",\n    command: \"~\",\n    description: (\n      <div>\n        <B>Character input:</B> request a character from the user and push it to\n        the stack\n      </div>\n    ),\n  },\n  {\n    key: \"#\",\n    command: \"#\",\n    description: (\n      <div>\n        <B>Bridge:</B> jump over next command in the current direction of\n        movement\n      </div>\n    ),\n  },\n  {\n    key: \"g\",\n    command: \"g\",\n    description: (\n      <div>\n        <B>Get:</B> a way to retrieve data in storage. Pop two values <M>y</M>{\" \"}\n        then <M>x</M>, then push the UTF-16 value of the character at that\n        position in the program. If <M>(x, y)</M> is out of bounds, push{\" \"}\n        <M>0</M>\n      </div>\n    ),\n  },\n  {\n    key: \"p\",\n    command: \"p\",\n    description: (\n      <div>\n        <B>Put:</B> a way to store a value for later use. Pop three values{\" \"}\n        <M>y</M>, then <M>x</M>, then <M>v</M>, then change the character at the\n        position <M>(x, y)</M> in the program to the character with UTF-16 value{\" \"}\n        <M>v</M>\n      </div>\n    ),\n  },\n  { key: \"@\", command: \"@\", description: <div>End program</div> },\n  {\n    key: \" \",\n    command: \" \",\n    description: (\n      <div>\n        <B>No-op:</B> does nothing. There is a space character in this location,\n        which has UTF-16 value 32\n      </div>\n    ),\n  },\n  {\n    key: \"blank 1\",\n    command: <div style={{ height: 12 }} />,\n    customCommandStyle: true,\n  },\n];\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Colors, T } from \"ui\";\nimport { HiCursorClick } from \"react-icons/hi\";\nimport { SquareBackground } from \"./SquareBackground\";\n\nconst B = styled.text``;\n\nexport const editorCommands = [\n  {\n    key: \"A\",\n    command: \" + A\",\n    description: \"Select all\",\n  },\n  {\n    key: \"X\",\n    command: \" + X\",\n    description: \"Cut\",\n  },\n  {\n    key: \"C\",\n    command: \" + C\",\n    description: \"Copy\",\n  },\n  {\n    key: \"V\",\n    command: \" + V\",\n    description: \"Paste\",\n  },\n  {\n    key: \"Z\",\n    command: \" + Z\",\n    description: \"Undo - also reverts any execution state to this point\",\n  },\n  {\n    key: \"Z+\",\n    command: \" +  + Z\",\n    description: \"Redo - also reverts any execution state to this point\",\n  },\n  {\n    key: \"J\",\n    command: \" + J\",\n    description: \"Step\",\n  },\n  {\n    key: \"K\",\n    command: \" + K\",\n    description: \"Walk or pause\",\n  },\n  {\n    key: \"L\",\n    command: \" + L\",\n    description: \"Run or pause\",\n  },\n  {\n    key: \";\",\n    command: \" + ;\",\n    description: \"Reset\",\n  },\n  {\n    key: \"DC\",\n    command: (\n      <T monospace>\n        <HiCursorClick />\n        2\n      </T>\n    ),\n    description: \"Set or remove breakpoint\",\n  },\n  {\n    key: \"Arrows\",\n    command: \"///\",\n    description: \"Move code input cursor\",\n  },\n  {\n    key: \"Arrows+\",\n    command: (\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n        }}\n      >\n        <T monospace> +</T>\n        <T monospace>///</T>\n      </div>\n    ),\n    description: \"Extend selection\",\n  },\n  {\n    key: \"execution cursor\",\n    command: (\n      <SquareBackground\n        style={{\n          backgroundColor: Colors.LIGHT.mix(Colors.ACCENT_ORANGE, 0.4)\n            .saturate(1)\n            .toString(),\n        }}\n      />\n    ),\n    description: (\n      <div>\n        <B>Execution cursor:</B> the orange highlight marks the next command to\n        be executed\n      </div>\n    ),\n    customCommandStyle: true,\n  },\n  {\n    key: \"typing cursor\",\n    command: (\n      <SquareBackground\n        style={{\n          backgroundColor: Colors.LIGHT.mix(Colors.ACCENT_BLUE, 0.4)\n            .saturate(1)\n            .toString(),\n        }}\n      />\n    ),\n    description: (\n      <div>\n        <B>Code input cursor:</B> the blue highlight marks the square(s) you\n        edit when you type\n      </div>\n    ),\n    customCommandStyle: true,\n  },\n  {\n    key: \"both cursors\",\n    command: (\n      <SquareBackground\n        style={{\n          backgroundColor: Colors.LIGHT.mix(Colors.ACCENT_BLUE, 0.4)\n            .mix(Colors.ACCENT_ORANGE, 0.4)\n            .toString(),\n        }}\n      />\n    ),\n    description: (\n      <div>\n        <B>Both cursors:</B> the execution and code input cursors are on top of\n        each other\n      </div>\n    ),\n    customCommandStyle: true,\n  },\n  {\n    key: \"breakpoint\",\n    command: (\n      <SquareBackground\n        style={{\n          backgroundColor: Colors.LIGHT.mix(Colors.RED, 0.5)\n            .mix(Colors.ACCENT_ORANGE, 0.4)\n            .toString(),\n        }}\n      />\n    ),\n    description: (\n      <div>\n        <B>Breakpoint:</B> code execution will stop here\n      </div>\n    ),\n    customCommandStyle: true,\n  },\n  {\n    key: \"breakpoint+\",\n    command: (\n      <SquareBackground\n        style={{\n          backgroundColor: Colors.LIGHT.mix(Colors.ACCENT_ORANGE, 0.3)\n            .mix(Colors.BLUE, 0.5)\n            .toString(),\n        }}\n      />\n    ),\n    description: (\n      <div>\n        <B>Active breakpoint:</B> code execution is currently stopped here\n      </div>\n    ),\n    customCommandStyle: true,\n  },\n];\n","import { Row } from \"ui\";\nimport React from \"react\";\nimport { SquareBackground } from \"./SquareBackground\";\n\ninterface Props {\n  command: React.ReactNode;\n  description?: React.ReactElement;\n  customCommandStyle?: boolean;\n  style: React.CSSProperties;\n}\n\nexport function BefungeCommandRow({\n  command,\n  description,\n  customCommandStyle,\n  style,\n}: Props): React.ReactElement {\n  const commandComponent = customCommandStyle ? (\n    command\n  ) : (\n    <SquareBackground style={{ marginTop: 0 }}>{command}</SquareBackground>\n  );\n\n  return (\n    <Row style={{ alignItems: \"flex-start\", ...style }}>\n      {commandComponent}\n      <div style={{ marginLeft: 12, flex: 1 }}>{description}</div>\n    </Row>\n  );\n}\n","import { Row, T } from \"ui\";\nimport React from \"react\";\n\ninterface Props {\n  command: React.ReactNode;\n  description?: React.ReactNode;\n  customCommandStyle?: boolean;\n  style: React.CSSProperties;\n}\n\nexport function EditorCommandRow({\n  command,\n  description,\n  customCommandStyle,\n  style,\n}: Props): React.ReactElement {\n  const commandComponent = customCommandStyle ? (\n    command\n  ) : (\n    <T monospace>{command}</T>\n  );\n\n  return (\n    <Row style={{ ...style }}>\n      <div style={{ width: 68, justifyContent: \"center\", display: \"flex\" }}>\n        {commandComponent}\n      </div>\n      <div style={{ marginLeft: 12, flex: 1 }}>{description}</div>\n    </Row>\n  );\n}\n","import { SidebarSection, Colors } from \"ui\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { befungeCommands } from \"./befungeCommands\";\nimport { editorCommands } from \"./editorCommands\";\nimport { BefungeCommandRow } from \"./BefungeCommandRow\";\nimport { EditorCommandRow } from \"./EditorCommandRow\";\n\nexport function InfoSidebarContent(): React.ReactElement {\n  return (\n    <>\n      <Title style={{ marginTop: 0 }}>Instructions</Title>\n      <p>\n        Try typing some commands into the text editor, then press step, walk, or\n        run to execute them.\n      </p>\n      <p>\n        You can also try out some example befunge programs from the examples\n        section, or copy-paste code in from other sources.\n      </p>\n      <SidebarSection title=\"Befunge commands\" collapsible>\n        {befungeCommands.map(\n          ({ command, description, customCommandStyle, key }) => (\n            <BefungeCommandRow\n              key={key}\n              style={{ marginTop: 6 }}\n              command={command}\n              description={description}\n              customCommandStyle={customCommandStyle}\n            />\n          )\n        )}\n      </SidebarSection>\n      <SidebarSection title=\"Editor\" collapsible>\n        {editorCommands.map(\n          ({ command, description, customCommandStyle, key }) => (\n            <EditorCommandRow\n              key={key}\n              style={{ marginTop: 6 }}\n              command={command}\n              description={description}\n              customCommandStyle={customCommandStyle}\n            />\n          )\n        )}\n        <p style={{ marginTop: 12 }}>\n          The control key works in place of the command key on Windows\n          computers.\n        </p>\n        <p>Input options can be found by expanding the control panel.</p>\n      </SidebarSection>\n      <SidebarSection title=\"About Befunge\">\n        <p>\n          Befunge is a programming language invented in 1993 by Chris Pressey.\n          For more information see the Befunge pages on{\" \"}\n          <a className=\"link\" href={\"https://en.wikipedia.org/wiki/Befunge\"}>\n            Wikipedia\n          </a>{\" \"}\n          or{\" \"}\n          <a className=\"link\" href={\"https://esolangs.org/wiki/Befunge\"}>\n            Esolangs\n          </a>\n          .\n        </p>\n      </SidebarSection>\n      <SidebarSection title=\"About this editor\">\n        This befunge interpreter was written by Angus Johnson. Please let me\n        know on{\" \"}\n        <a className=\"link\" href={\"https://github.com/angussbj/befunge/issues\"}>\n          Github\n        </a>{\" \"}\n        if you find any issues.\n      </SidebarSection>\n      <div\n        style={{\n          fontSize: 10,\n          marginTop: 16,\n          marginBottom: 16,\n          display: \"flex\",\n          justifyContent: \"flex-end\",\n          color: Colors.LIGHT.fade(0.4).toString(),\n        }}\n      >\n         Angus Johnson 2021\n      </div>\n    </>\n  );\n}\n\nconst Title = styled.div`\n  margin-top: 24px;\n  margin-bottom: 12px;\n  color: ${Colors.LIGHT.toString()};\n  font-size: 18px;\n`;\n","import React from \"react\";\nimport { T } from \"ui\";\n\nexport const examples = [\n  {\n    label: \"Minimal hello world\",\n    description:\n      \"The characters are added to the stack using string-mode, then printed in reverse order.\",\n    code: '\"!dlrow ,olleH\",,,,,,,,,,,,,@',\n  },\n  {\n    label: \"UTF-16 hello world\",\n    description:\n      \"The UTF-16 values of the characters are put on the stack by doing arithmetic with single digit numbers, then printed in reverse order.\",\n    code: \" v>v>v>v>v>v>v \\n 5 5 5 4 5 5 9 \\n 6 7-7-2 7 7+8 \\n + +7+22 + +1* \\n 3*9*9*2*9*9*  \\n *:*:*:*4*9*:  \\n  * +3+*+3+ *  \\n  5 6+6*6+7 5  \\n  2 5 5 5 5 2  \\n >^>^>^>^>^>^>v\\n@,,,,,,,,,,,,,<\\n               \\n !dlrow ,olleH \\n\", // prettier-ignore\n  },\n  {\n    label: \"FizzBuzz\",\n    description:\n      \"The program asks for a numeric input, then prints all the numbers up to that input value, replacing multiples of 3 with 'Fizz', multiples of 5 with 'Buzz', and multiples of both 3 and 5 with 'FizzBuzz'\",\n    code: ' 52*:\"?timiL\",,,,,,,,&03p   v\\nv:_v#%3: _v#%5: _v#%*53:  +1<\\n>.#\"#>   #\"#>   #\"#> v> 25*,^\\n   z ,    z ,    z , :|      \\n   z ,    z ,    z , 1>@     \\n   i ,    u ,    u , +#      \\n   F ,    B ,    B , 0!      \\n   \"      \"      z , 3`      \\n   > ^    > ^    z , g       \\n                 i , >^      \\n                 F ,         \\n                 \"           \\n                 > ^         \\n',\n  },\n  {\n    label: \"Prime generator\",\n    description: (\n      <T>\n        Generates primes by checking, for each integer, if any of the primes\n        less than its square root divide it evenly. Fills most of the code grid\n        with primes.\n      </T>\n    ),\n    code: \"v                                                                               \\n7                                                                               \\n1                                                                               \\n0                                                                               \\np                                                                               \\n0                                                                               \\n2                                                                               \\n0                                                                               \\np                                                                               \\n                                                                                \\n2                                                                               \\n7                                                                               \\n0                                                                               \\np                                                                               \\n                                                                                \\n2                                                                               \\n.                                                                               \\n5                                                                               \\n5                                                                               \\n+                                                                               \\n,                                                                               \\n               >40gg%!#v_v          ++for12or34                      @>:: .55+,v\\n3              ^g03:   #<>350p460pv              >$150g0p60g0g1+:45*`| vpg02g01<\\n>730p040p >:30g40gg:*1-`|         >50g0g1+:89*7+`|             vp0g06< >      1+\\n^         ^#         +1<> 150p260p^              >50g0p        >50g3-#^_       #\\n\",\n  },\n  {\n    label: \"Emulator\",\n    description:\n      \"An emulator of a simple machine with 16 instructions, a maximum program length of 16, and 2? registers.\",\n    code: 'v aaaaaaaaaaaaaaaa Load:                                                        \\n  ip: a ^Memory^          ^^   <    v                                         < \\n< is: a a-p=0-15   v 0              <              Print: >55+%68*+,    v     ^ \\n  ar: a            >:96+`#^_:2+ &:69v                     ^,+*86<               \\n  r0: a            ^ +1p0\\\\+\"a\"_^#!`+<                           |:/+55:<        \\n  r1: a                                                   ^    $<               \\n                   Fetch:                                                       \\n>   61g\"a\"-::2+0g62p1+88+%2+0g63p62g\"a\"-7`1++88+%\"a\"+61p62g\"a\"-         #     v \\n :!#v_1-:!#v_1-:!#v_1-:!#v_1-:!#v_1-:!#v_1-:!#v_1-:!#v_1-:!#v_1-v  Execute:   > \\n    5      $      $      $      $      $      $      $      $   >      #    v   \\n^   5 0     1      2      3      4      5      6      7     >8$63g\"a\"- ^>       \\n    +                                                >\"**GNID**\",,,,,,,,^       \\n    ,                                         >65g\"a\"-1-88++88+%\"a\"+65p ^       \\n    @                                  >64g\"a\"-1-88++88+%\"a\"+64p>       ^       \\n                                >65g\"a\"-1+88+%\"a\"+65p>          ^               \\n                         >64g\"a\"-1+88+%\"a\"+64p>      ^     p46g0+2-\"a\"g36<      \\n                  >64g65g-88++88+%\"a\"+64p>    ^      p56g0+2-\"a\"g36<            \\n           >64g\"a\"-65g\"a\"-+88+%\"a\"+64p  >^     p0+2-\"a\"g36g46<                  \\n  +---------------+   >            >    ^p0+2-\"a\"g36g56<                        \\n  | 4917 Emulator |                |-\"a\"g46<                                    \\n  |Dougall Johnson|   ^p16g36<     <                                            \\n  |  12 Feb 2010  |          |-\"a\"g46<                                          \\n  +---------------+   ^   <  <     15    14    13    12    11    10     9       \\n@,,,,,,\"ERROR\"+55          <      -1_^#:-1_^#:-1_^#:-1_^#:-1_^#:-1_^#:-1_^#:<   \\n',\n  },\n] as const;\n","import React, { ReactElement } from \"react\";\nimport { Colors, IconButton, Row, T } from \"ui\";\nimport { BsBoxArrowInRight, BsFiles } from \"react-icons/bs\";\nimport { CodeEditor } from \"logic\";\n\ninterface Props {\n  label: string;\n  description?: string | ReactElement;\n  code: string;\n  editor: CodeEditor;\n  render: () => void;\n  style?: React.CSSProperties;\n}\n\nexport function Example({\n  label,\n  description,\n  editor,\n  code,\n  render,\n  style,\n}: Props): React.ReactElement {\n  return (\n    <div style={style}>\n      <Row style={{ justifyContent: \"space-between\" }}>\n        <T color={Colors.LIGHT}>{label}</T>\n        <Row>\n          <IconButton\n            onClick={(): void => {\n              navigator.clipboard.writeText(code);\n            }}\n          >\n            <BsFiles size={12} />\n          </IconButton>\n          <IconButton\n            style={{ marginLeft: -8 }}\n            onClick={(): void => {\n              editor.setCode(code);\n              render();\n            }}\n          >\n            <BsBoxArrowInRight size={14} />\n          </IconButton>\n        </Row>\n      </Row>\n      <T>{description}</T>\n    </div>\n  );\n}\n","import { SidebarTitle } from \"ui\";\nimport React from \"react\";\nimport { examples } from \"./examples\";\nimport { Example } from \"./Example\";\nimport { CodeEditor } from \"logic\";\n\nexport function ExampleSidebarContent({\n  editor,\n  render,\n}: {\n  editor: CodeEditor;\n  render: () => void;\n}): React.ReactElement {\n  return (\n    <>\n      <SidebarTitle style={{ marginTop: 0 }}>Examples</SidebarTitle>\n      {examples.map(({ ...exampleDetails }) => (\n        <Example\n          {...exampleDetails}\n          key={exampleDetails.label}\n          editor={editor}\n          render={render}\n          style={{ marginTop: 8 }}\n        />\n      ))}\n      <div style={{ marginTop: 32 }}>\n        <a className=\"link\" href=\"https://esolangs.org/wiki/Befunge#Examples\">\n          More examples\n        </a>\n      </div>\n    </>\n  );\n}\n","import React, { ReactNode } from \"react\";\nimport InfoOutlinedIcon from \"@material-ui/icons/InfoOutlined\";\nimport { IconButton, Sidebars, TextButton } from \"ui\";\nimport { useLocalStorageState } from \"utilities\";\nimport { CodeEditor } from \"logic\";\nimport { InfoSidebarContent } from \"./InfoSidebarContent\";\nimport { ExampleSidebarContent } from \"./ExampleSidebarContent\";\n\ninterface Props {\n  editor: CodeEditor;\n  render: () => void;\n  children: ReactNode;\n}\n\nexport function InfoAndExamplesSidebar({\n  editor,\n  render,\n  children,\n}: Props): React.ReactElement {\n  const [infoOpen, setInfoOpen] = useLocalStorageState({\n    storageKey: \"infoOpen\",\n    initialValue: true,\n  });\n\n  const [examplesOpen, setExamplesOpen] = useLocalStorageState({\n    storageKey: \"examplesOpen\",\n    initialValue: false,\n  });\n\n  return (\n    <Sidebars\n      rightOpen={infoOpen}\n      onSetRightOpen={setInfoOpen}\n      rightContent={<InfoSidebarContent />}\n      leftOpen={examplesOpen}\n      onSetLeftOpen={setExamplesOpen}\n      leftContent={<ExampleSidebarContent editor={editor} render={render} />}\n      page={\n        <>\n          <IconButton\n            style={topRightAbsolute8px}\n            onClick={(): void => setInfoOpen(!infoOpen)}\n          >\n            <InfoOutlinedIcon />\n          </IconButton>\n          <TextButton\n            label=\"Examples\"\n            style={topLeftAbsolute20px}\n            onClick={(): void => setExamplesOpen(!examplesOpen)}\n          />\n          {children}\n        </>\n      }\n    />\n  );\n}\n\nconst topLeftAbsolute20px = {\n  position: \"absolute\",\n  top: 20,\n  left: 20,\n} as const;\n\nconst topRightAbsolute8px = {\n  position: \"absolute\",\n  top: 8,\n  right: 8,\n} as const;\n","import React, { useCallback, useState } from \"react\";\nimport { CodingSpace } from \"./components/CodingSpace\";\nimport { Colors } from \"ui\";\nimport { useGlobalBefungeState } from \"./components/useGlobalBefungeState\";\nimport styled from \"styled-components\";\nimport { CenteredScreenContentContainer } from \"./ui/CenteredScreenContentContainer\";\nimport { InfoAndExamplesSidebar } from \"./components/InfoAndExamplesSidebars/InfoAndExamplesSidebars\";\n\nfunction App(): React.ReactElement {\n  const setRenderHelper = useState(false)[1];\n  const render = useCallback((): void => {\n    setRenderHelper((val) => !val);\n  }, []);\n\n  const befungeState = useGlobalBefungeState(render);\n\n  return (\n    <Background>\n      <InfoAndExamplesSidebar editor={befungeState.editor} render={render}>\n        <CenteredScreenContentContainer>\n          <CodingSpace state={befungeState} />\n        </CenteredScreenContentContainer>\n      </InfoAndExamplesSidebar>\n    </Background>\n  );\n}\n\nconst Background = styled.div`\n  background-color: ${Colors.DARK.toString()};\n  min-height: 100vh;\n`;\n\nexport default App;\n","import { useCallback, useRef, useEffect } from \"react\";\nimport {\n  BefungeRunner,\n  BefungeCore,\n  Code,\n  CodeEditor,\n  GlobalBefungeState,\n} from \"logic\";\nimport { Coordinate } from \"utilities\";\n\nexport function useGlobalBefungeState(\n  render: () => void,\n  width = 80,\n  height = 25\n): GlobalBefungeState {\n  const onChange = useCallback((code?: string): void => {\n    if (code) localStorage.setItem(\"code\", code);\n    render();\n  }, []);\n\n  const limits = useRef(new Coordinate(width, height)).current;\n  const code = useRef(new Code(width, height)).current;\n  const core = useRef(new BefungeCore(limits, code)).current;\n  const executor = useRef(\n    new BefungeRunner(limits, code, core, onChange)\n  ).current;\n  const editor = useRef(\n    new CodeEditor(code, limits, executor, onChange)\n  ).current;\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", editor.onKeyDown);\n    document.addEventListener(\"cut\", editor.onCut);\n    document.addEventListener(\"copy\", editor.onCopy);\n    document.addEventListener(\"paste\", editor.onPaste);\n\n    // Load code from local storage\n    const cookieCode = localStorage.getItem(\"code\");\n    if (cookieCode) code.set(JSON.parse(cookieCode));\n\n    return (): void => {\n      document.removeEventListener(\"keydown\", editor.onKeyDown);\n      document.removeEventListener(\"cut\", editor.onCut);\n      document.removeEventListener(\"copy\", editor.onCopy);\n      document.removeEventListener(\"paste\", editor.onPaste);\n    };\n  }, []);\n\n  return { limits, code, core, editor, executor };\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","export * from \"./Befunge\";\nexport * from \"./Code\";\nexport * from \"./CodeEditor\";\nexport * from \"./GlobalBefungeState\";\n","export class Coordinate {\n  constructor(public x: number, public y: number) {}\n\n  set(x: number, y: number): Coordinate {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n\n  setToCopy(other: Coordinate): Coordinate {\n    this.x = other.x;\n    this.y = other.y;\n    return this;\n  }\n\n  setX(x: number): Coordinate {\n    this.x = x;\n    return this;\n  }\n\n  setY(y: number): Coordinate {\n    this.y = y;\n    return this;\n  }\n\n  add(other: Coordinate): Coordinate {\n    this.x += other.x;\n    this.y += other.y;\n    return this;\n  }\n\n  times(k: number): Coordinate {\n    this.x *= k;\n    this.y *= k;\n    return this;\n  }\n\n  negative(): Coordinate {\n    this.x = -this.x;\n    this.y = -this.y;\n    return this;\n  }\n\n  modulo(other: Coordinate): Coordinate {\n    this.x = ((this.x % other.x) + other.x) % other.x;\n    this.y = ((this.y % other.y) + other.y) % other.y;\n    return this;\n  }\n\n  equals(other: Coordinate): boolean {\n    return this.x === other.x && this.y === other.y;\n  }\n\n  clone(): Coordinate {\n    return new Coordinate(this.x, this.y);\n  }\n\n  toString(): string {\n    return `(${this.x}, ${this.y})`;\n  }\n\n  getMajorAndMinorDirections(): MajorMinorDirections {\n    const horizontalDirection =\n      this.x >= 0\n        ? DIRECTION_VECTOR[Direction.Right]\n        : DIRECTION_VECTOR[Direction.Left];\n    const verticalDirection =\n      this.y >= 0\n        ? DIRECTION_VECTOR[Direction.Down]\n        : DIRECTION_VECTOR[Direction.Up];\n    return Math.abs(this.x) >= Math.abs(this.y)\n      ? {\n          majorVector: horizontalDirection,\n          majorMax: Math.abs(this.x),\n          minorVector: verticalDirection,\n          minorMax: Math.abs(this.y),\n        }\n      : {\n          majorVector: verticalDirection,\n          majorMax: Math.abs(this.y),\n          minorVector: horizontalDirection,\n          minorMax: Math.abs(this.x),\n        };\n  }\n}\n\nexport interface MajorMinorDirections {\n  majorVector: Coordinate;\n  majorMax: number;\n  minorVector: Coordinate;\n  minorMax: number;\n}\n\nexport enum Direction {\n  Left,\n  Right,\n  Up,\n  Down,\n}\n\nexport const DIRECTION_VECTOR = {\n  [Direction.Left]: new Coordinate(-1, 0),\n  [Direction.Right]: new Coordinate(1, 0),\n  [Direction.Up]: new Coordinate(0, -1),\n  [Direction.Down]: new Coordinate(0, 1),\n};\n\nexport type DirectionName = keyof typeof Direction;\n","export function constArray2<T>(width: number, height: number, value: T): T[][] {\n  return Array(width)\n    .fill(false)\n    .map(() => Array(height).fill(value));\n}\n","export function modulo(a: number, b: number): number {\n  return ((a % b) + b) % b;\n}\n","export function range(start: number, count: number, step = 1): number[] {\n  return count > 0\n    ? Array(count)\n        .fill(start)\n        .map((x, y) => x + step * y)\n    : [];\n}\n","import { useCallback, useState } from \"react\";\n\nexport function useLocalStorageState<T>({\n  storageKey,\n  initialValue,\n}: {\n  storageKey: string;\n  initialValue: T;\n}): [T, (newValue: T) => void] {\n  const [value, setValueState] = useState<T>((): T => {\n    const storedString = localStorage.getItem(storageKey);\n    if (storedString === null) return initialValue;\n    return JSON.parse(storedString);\n  });\n\n  const setValue = useCallback((newValue: T) => {\n    setValueState(newValue);\n    localStorage.setItem(storageKey, JSON.stringify(newValue));\n  }, []);\n\n  return [value, setValue];\n}\n","export * from \"./BefungeRunner\";\nexport * from \"./BefungeCore\";\nexport * from \"./InputRequestStatus\";\n","import autoBind from \"auto-bind\";\nimport { BefungeCore } from \"./BefungeCore\";\nimport { Code } from \"../Code\";\nimport { Coordinate } from \"utilities\";\nimport { BefungeHistoryPoint } from \"./BefungeHistoryPoint\";\n\nexport class BefungeRunner {\n  public walkingDelayIndex = 2;\n  private walkingDelay = BefungeRunner.walkingDelays[this.walkingDelayIndex];\n  private static walkingDelays = [1, 64, 256, 1024, 2048];\n  public walking = false;\n  public running = false;\n  private history: BefungeHistoryPoint[] = [];\n  private future: BefungeHistoryPoint[] = [];\n\n  constructor(\n    limits: Coordinate,\n    private code: Code,\n    private core: BefungeCore,\n    private render?: () => void\n  ) {\n    autoBind(this);\n  }\n\n  public runOrPause(): void {\n    if (this.running) this.pause();\n    else this.run();\n  }\n\n  public walkOrPause(): void {\n    if (this.walking) this.pause();\n    else this.walk();\n  }\n\n  public walk(): void {\n    function recur(b: BefungeRunner): () => void {\n      return (): void => {\n        if (b.walking && !b.core.requestingInput) {\n          b.slowStep();\n          setTimeout(recur(b), b.walkingDelay);\n        }\n      };\n    }\n\n    if (this.core.halted) return;\n    this.code.makeResetable();\n    this.walking = true;\n    this.running = false;\n    if (!this.core.requestingInput) this.stepOver();\n    else this.render?.();\n    setTimeout(recur(this), this.walkingDelay);\n  }\n\n  public run(): void {\n    function recur(b: BefungeRunner): () => void {\n      return (): void => {\n        for (let i = 0; i < 1000; i++) {\n          if (b.running && b.core.canStep()) b.quickStep();\n        }\n        if (b.running && b.core.canStep()) setTimeout(recur(b), 1);\n      };\n    }\n\n    function renderPeriodically(b: BefungeRunner): () => void {\n      return (): void => {\n        b.render?.();\n        if (b.running && b.core.canStep()) {\n          setTimeout(renderPeriodically(b), 1000);\n        }\n      };\n    }\n\n    if (this.core.halted) return;\n    this.code.makeResetable();\n    this.walking = false;\n    this.running = true;\n    if (!this.core.requestingInput) this.stepOver();\n    this.render?.();\n    renderPeriodically(this)();\n    recur(this)();\n  }\n\n  public pause(): void {\n    this.walking = false;\n    this.running = false;\n    this.render?.();\n  }\n\n  public reset(): void {\n    this.walking = false;\n    this.running = false;\n    this.code.reset(true);\n    this.core.reset();\n    this.render?.();\n  }\n\n  public step(): void {\n    if (this.core.requestingInput) return;\n    this.code.makeResetable();\n    this.stepOver();\n  }\n\n  private quickStep(): void {\n    if (this.cursorAtBreakpoint()) this.pause();\n    else this.core.step();\n  }\n\n  private slowStep(): void {\n    if (this.cursorAtBreakpoint()) this.pause();\n    else {\n      this.core.step();\n      this.render?.();\n    }\n  }\n\n  private stepOver(): void {\n    this.core.step();\n    this.render?.();\n  }\n\n  private cursorAtBreakpoint(): boolean {\n    const { x, y } = this.core.cursor;\n    return this.code.breakpoints[x][y];\n  }\n\n  public increaseWalkingDelay(): void {\n    if (this.walkingDelayIndex < 4) {\n      this.walkingDelayIndex += 1;\n      this.walkingDelay = BefungeRunner.walkingDelays[this.walkingDelayIndex];\n      this.render?.();\n    }\n  }\n\n  public decreaseWalkingDelay(): void {\n    if (this.walkingDelayIndex > 0) {\n      this.walkingDelayIndex -= 1;\n      this.walkingDelay = BefungeRunner.walkingDelays[this.walkingDelayIndex];\n      this.render?.();\n    }\n  }\n\n  public acceptInput(input: string): void {\n    this.core.acceptInput(input);\n    this.render?.();\n    if (this.running) this.run();\n    if (this.walking) this.walk();\n  }\n\n  public setHistoryPoint(): void {\n    this.history.push(this.createHistoryPoint());\n    this.future = [];\n  }\n\n  public undo(): void {\n    this.future.push(this.createHistoryPoint());\n    const point = this.history.pop();\n    this.revertToPoint(point);\n  }\n\n  public redo(): void {\n    this.history.push(this.createHistoryPoint());\n    const point = this.future.pop();\n    this.revertToPoint(point);\n  }\n\n  private createHistoryPoint(): BefungeHistoryPoint {\n    return {\n      core: this.core.copy(),\n      walking: this.walking,\n      running: this.running,\n      code: this.code.clone(),\n    };\n  }\n\n  private revertToPoint(point?: BefungeHistoryPoint): void {\n    if (!point) return;\n    this.core.set(point.core);\n    this.walking = point.walking;\n    this.running = point.running;\n    this.code.setToCopy(point.code);\n  }\n}\n","import { cloneDeep, isEqual } from \"lodash\";\nimport { constArray2 } from \"utilities\";\n\nexport class Code {\n  public code: string[][];\n  protected resetPointWithEdits?: string[][];\n  protected resetPointWithoutEdits?: string[][];\n  public breakpoints: boolean[][];\n\n  constructor(private width: number, private height: number) {\n    this.code = constArray2(width, height, \" \");\n    this.breakpoints = constArray2(width, height, false);\n  }\n\n  public clone(): Code {\n    const clone = new Code(this.width, this.height);\n    clone.setToCopy(this);\n    return clone;\n  }\n\n  public set(code: string[][]): void {\n    this.code.forEach((col, x) =>\n      col.forEach((_element, y) => {\n        if (code[x]?.[y]) this.code[x][y] = code[x][y];\n      })\n    );\n    this.resetPointWithEdits = undefined;\n    this.resetPointWithoutEdits = undefined;\n  }\n\n  public setToCopy(other: Code): void {\n    this.code = cloneDeep(other.code);\n    this.resetPointWithEdits = cloneDeep(other.resetPointWithEdits);\n    this.resetPointWithoutEdits = cloneDeep(other.resetPointWithoutEdits);\n  }\n\n  public get(x: number, y: number): string {\n    return this.code[x][y];\n  }\n\n  public userPut(x: number, y: number, val: string): void {\n    this.code[x][y] = val;\n    if (this.resetPointWithEdits) this.resetPointWithEdits[x][y] = val;\n  }\n\n  public executionPut(x: number, y: number, val: string): void {\n    this.code[x][y] = val;\n  }\n\n  public makeResetable(): void {\n    if (!this.isResetable()) {\n      this.resetPointWithEdits = cloneDeep(this.code);\n      this.resetPointWithoutEdits = cloneDeep(this.code);\n    }\n  }\n\n  public reset(withEdits: boolean): void {\n    const resetPoint = withEdits\n      ? this.resetPointWithEdits\n      : this.resetPointWithoutEdits;\n    if (resetPoint) this.code = resetPoint;\n    this.resetPointWithEdits = undefined;\n    this.resetPointWithoutEdits = undefined;\n  }\n\n  public resetRequiresClarification(): boolean {\n    return !isEqual(this.resetPointWithEdits, this.resetPointWithoutEdits);\n  }\n\n  private isResetable(): boolean {\n    return !!this.resetPointWithEdits;\n  }\n}\n","export class CodeEditorOptions {\n  public useSelectionDirectionForCutCopyPaste =\n    localStorage.getItem(\"useSelectionDirectionForCutCopyPaste\") === \"true\";\n  public changeDirectionOnDirectionCharacters =\n    localStorage.getItem(\"changeDirectionOnDirectionCharacters\") === \"true\";\n\n  public setChangeDirectionOnDirectionCharacters(newValue: boolean): void {\n    this.changeDirectionOnDirectionCharacters = newValue;\n    localStorage.setItem(\n      \"changeDirectionOnDirectionCharacters\",\n      newValue ? \"true\" : \"false\"\n    );\n  }\n\n  public setUseSelectionDirectionForCutCopyPaste(newValue: boolean): void {\n    this.useSelectionDirectionForCutCopyPaste = newValue;\n    localStorage.setItem(\n      \"useSelectionDirectionForCutCopyPaste\",\n      newValue ? \"true\" : \"false\"\n    );\n  }\n}\n","import { MouseEvent } from \"react\";\nimport {\n  Coordinate,\n  Direction,\n  DIRECTION_VECTOR,\n  DirectionName,\n  MajorMinorDirections,\n} from \"utilities\";\nimport autoBind from \"auto-bind\";\nimport { Code } from \"../Code\";\nimport { BefungeRunner } from \"../Befunge\";\nimport { CodeEditorOptions } from \"./CodeEditorOptions\";\n\ntype DeleteMode = \"delete\" | \"backspace\";\n\ninterface CodeEditorHistoryPoint {\n  selection: Coordinate;\n  selectionDelta: Coordinate;\n  direction: Direction;\n  deleteMode: DeleteMode;\n}\n\nexport class CodeEditor {\n  public selection = new Coordinate(0, 0);\n  public selectionDelta = new Coordinate(0, 0);\n  public direction = Direction.Right;\n  private deleteMode: DeleteMode = \"delete\";\n  private history: CodeEditorHistoryPoint[] = [];\n  private future: CodeEditorHistoryPoint[] = [];\n\n  public focus?: () => void;\n  public hasFocus = false;\n  public options = new CodeEditorOptions();\n\n  constructor(\n    private code: Code,\n    private limits: Coordinate,\n    private executor: BefungeRunner,\n    private externalOnChange: (code: string) => void\n  ) {\n    autoBind(this);\n  }\n\n  private onChange(): void {\n    this.externalOnChange(JSON.stringify(this.code.code));\n  }\n\n  public setFocusMethod(newFocusMethod: () => void): void {\n    this.focus = newFocusMethod;\n  }\n\n  public setCode(code: string): void {\n    this.setHistoryPoint();\n    this.executor.reset();\n    this.selection = new Coordinate(0, 0);\n    this.selectionDelta = new Coordinate(0, 0);\n    this.clearAll();\n    this.paste(code);\n    setTimeout(this.onChange, 100);\n  }\n\n  public getSelectedCharacter(): string {\n    return this.code.get(this.selection.x, this.selection.y);\n  }\n\n  public setHistoryPoint(): void {\n    this.history.push(this.createHistoryPoint());\n    this.future = [];\n    this.executor.setHistoryPoint();\n  }\n\n  public undo(): void {\n    const historyPointToGoBackTo = this.history.pop();\n    if (historyPointToGoBackTo) {\n      this.future.push(this.createHistoryPoint());\n      this.revertToPoint(historyPointToGoBackTo);\n      this.executor.undo();\n      this.onChange();\n    }\n  }\n\n  public redo(): void {\n    const futurePointToGoBackTo = this.future.pop();\n    if (futurePointToGoBackTo) {\n      this.history.push(this.createHistoryPoint());\n      this.revertToPoint(futurePointToGoBackTo);\n      this.executor.redo();\n      this.onChange();\n    }\n  }\n\n  private createHistoryPoint(): CodeEditorHistoryPoint {\n    return {\n      selection: this.selection.clone(),\n      selectionDelta: this.selectionDelta.clone(),\n      direction: this.direction,\n      deleteMode: this.deleteMode,\n    };\n  }\n\n  private revertToPoint(point?: CodeEditorHistoryPoint): void {\n    if (!point) return;\n    this.selection = point.selection;\n    this.selectionDelta = point.selectionDelta;\n    this.direction = point.direction;\n    this.deleteMode = point.deleteMode;\n  }\n\n  public onMouseDown(x: number, y: number): (event: MouseEvent) => void {\n    return (event: MouseEvent): void => {\n      if (event.buttons % 2 === 1) {\n        if (event.shiftKey) {\n          this.selectionDelta.set(x - this.selection.x, y - this.selection.y);\n        } else {\n          this.selection.set(x, y);\n          this.selectionDelta.set(0, 0);\n          this.deleteMode = \"delete\";\n          this.direction = Direction.Right;\n        }\n        this.onChange();\n      }\n    };\n  }\n\n  public onDoubleClick(x: number, y: number): () => void {\n    return (): void => {\n      this.code.breakpoints[x][y] = !this.code.breakpoints[x][y];\n      this.onChange();\n    };\n  }\n\n  public onMouseOver(x: number, y: number): (event: MouseEvent) => void {\n    return (event: MouseEvent): void => {\n      if (event.buttons % 2 === 1) {\n        this.selectionDelta.set(x - this.selection.x, y - this.selection.y);\n        this.onChange();\n      }\n    };\n  }\n\n  public onKeyDown(event: KeyboardEvent): void {\n    if (event.ctrlKey || event.metaKey) {\n      this.handleKeyboardShortcuts(event);\n    } else if (!this.hasFocus) {\n      return;\n    } else if (event.key.length === 1) {\n      this.handleEnteredCharacter(event);\n    } else if (event.key.match(/^Arrow/)) {\n      this.handleSelectionMovement(event);\n    } else if (event.key === \"Backspace\") {\n      this.handleDeletion();\n    }\n    this.onChange();\n  }\n\n  public onCut(event: ClipboardEvent): void {\n    if (!this.hasFocus) return;\n    this.setHistoryPoint();\n    this.onCopy(event);\n    this.clearSelection();\n    this.onChange();\n  }\n\n  public onCopy(event: ClipboardEvent): void {\n    if (!this.hasFocus) return;\n    this.setHistoryPoint();\n    let textToCopy = \"\";\n    this.selectionForEach({\n      cellAction: (x: number, y: number): void => {\n        textToCopy += this.code.get(x, y);\n      },\n      rowEndAction: (): void => {\n        textToCopy += \"\\n\";\n      },\n      directions: this.options.useSelectionDirectionForCutCopyPaste\n        ? this.selectionDelta.getMajorAndMinorDirections()\n        : undefined,\n    });\n    event.clipboardData?.setData(\"text/plain\", textToCopy);\n    event.preventDefault();\n  }\n\n  public onPaste(event: ClipboardEvent): void {\n    if (!this.hasFocus) return;\n    this.setHistoryPoint();\n    const text = event.clipboardData?.getData(\"Text\");\n    if (text) this.paste(text);\n    this.onChange();\n  }\n\n  private paste(text: string): void {\n    const pasteCoords = this.selection.clone();\n    const newLineCoord = this.selection.clone();\n    const { majorVector, minorVector } = this.options\n      .useSelectionDirectionForCutCopyPaste\n      ? this.selectionDelta.getMajorAndMinorDirections()\n      : this.getDefaultIterationDirections();\n    text.split(\"\").forEach((char: string) => {\n      if (char === \"\\n\") {\n        newLineCoord.add(minorVector).modulo(this.limits);\n        pasteCoords.setToCopy(newLineCoord);\n      } else {\n        this.code.userPut(pasteCoords.x, pasteCoords.y, char);\n        pasteCoords.add(majorVector).modulo(this.limits);\n      }\n    });\n  }\n\n  // TOOD: should execution related keyboard interactions be handled somewhere else?\n  private handleKeyboardShortcuts(event: KeyboardEvent): void {\n    if (event.key === \"a\") {\n      this.selection.set(0, 0);\n      this.selectionDelta.setToCopy(this.limits).add(new Coordinate(-1, -1));\n      this.focus?.();\n    } else if (event.key === \"z\" && !event.shiftKey) {\n      this.undo();\n      this.focus?.();\n    } else if ((event.key === \"z\" && event.shiftKey) || event.key === \"y\") {\n      this.redo();\n      this.focus?.();\n    } else if (event.key === \"j\") {\n      this.executor.step();\n    } else if (event.key === \"k\") {\n      this.executor.walkOrPause();\n    } else if (event.key === \"l\") {\n      this.executor.runOrPause();\n    } else if (event.key === \";\") {\n      this.executor.reset();\n    } else if (event.key.match(/^Arrow/)) {\n      if (this.hasFocus)\n        this.direction = Direction[event.key.slice(5) as DirectionName];\n    } else {\n      return;\n    }\n    event.preventDefault();\n  }\n\n  private handleEnteredCharacter(event: KeyboardEvent): void {\n    this.setHistoryPoint();\n    this.fillSelection(event.key);\n    this.changeTypingDirectionIfNeeded(event.key);\n    this.stepSelection(DIRECTION_VECTOR[this.direction]);\n    this.deleteMode = \"backspace\";\n    event.preventDefault();\n  }\n\n  private handleSelectionMovement(event: KeyboardEvent): void {\n    const movementDirection = Direction[event.key.slice(5) as DirectionName];\n    if (event.shiftKey) {\n      this.selectionDelta.add(DIRECTION_VECTOR[movementDirection]);\n    } else {\n      this.stepSelection(DIRECTION_VECTOR[movementDirection]);\n      this.selectionDelta.set(0, 0);\n      event.preventDefault();\n    }\n    this.deleteMode = \"delete\";\n  }\n\n  private handleDeletion(): void {\n    this.setHistoryPoint();\n    if (this.deleteMode === \"backspace\") {\n      this.stepSelection(DIRECTION_VECTOR[this.direction].clone().negative());\n      this.clearSelection();\n    } else if (this.deleteMode === \"delete\") {\n      this.clearSelection();\n    }\n  }\n\n  private stepSelection(directionVector: Coordinate): void {\n    this.selection.add(directionVector).modulo(this.limits);\n  }\n\n  private clearSelection(): void {\n    this.fillSelection(\" \");\n  }\n\n  private clearAll(): void {\n    this.forEach({\n      cellAction: (x: number, y: number): void => {\n        this.code.userPut(x, y, \" \");\n      },\n    });\n  }\n\n  private fillSelection(char: string): void {\n    this.selectionForEach({\n      cellAction: (x: number, y: number): void => {\n        this.code.userPut(x, y, char);\n      },\n    });\n  }\n\n  private selectionForEach({\n    cellAction,\n    rowEndAction,\n    directions,\n  }: {\n    cellAction: (x: number, y: number) => void;\n    rowEndAction?: () => void;\n    directions?: MajorMinorDirections;\n  }): void {\n    const { start, majorVector, majorMax, minorVector, minorMax } = directions\n      ? { start: this.selection, ...directions }\n      : this.getDefaultIterationDirections();\n    const iterationCoord = start.clone();\n    for (let minor = 0; minor <= minorMax; minor++) {\n      iterationCoord.setToCopy(start);\n      iterationCoord.add(minorVector.clone().times(minor)).modulo(this.limits);\n      for (let major = 0; major <= majorMax; major++) {\n        cellAction(iterationCoord.x, iterationCoord.y);\n        iterationCoord.add(majorVector).modulo(this.limits);\n      }\n      rowEndAction?.();\n    }\n  }\n\n  private forEach({\n    cellAction,\n    rowEndAction,\n  }: {\n    cellAction: (x: number, y: number) => void;\n    rowEndAction?: () => void;\n  }): void {\n    for (let x = 0; x < this.limits.x; x++) {\n      for (let y = 0; y < this.limits.y; y++) {\n        cellAction(x, y);\n      }\n      rowEndAction?.();\n    }\n  }\n\n  private getDefaultIterationDirections(): {\n    start: Coordinate;\n  } & MajorMinorDirections {\n    const x0 = Math.min(\n      this.selection.x,\n      this.selection.x + this.selectionDelta.x\n    );\n    const y0 = Math.min(\n      this.selection.y,\n      this.selection.y + this.selectionDelta.y\n    );\n    return {\n      start: new Coordinate(x0, y0),\n      majorVector: DIRECTION_VECTOR[Direction.Right],\n      majorMax: Math.abs(this.selectionDelta.x),\n      minorVector: DIRECTION_VECTOR[Direction.Down],\n      minorMax: Math.abs(this.selectionDelta.y),\n    };\n  }\n\n  private changeTypingDirectionIfNeeded(character: string): void {\n    if (this.options.changeDirectionOnDirectionCharacters) {\n      if (character === \"<\") this.direction = Direction.Left;\n      if (character === \">\") this.direction = Direction.Right;\n      if (character === \"^\") this.direction = Direction.Up;\n      if (character === \"v\") this.direction = Direction.Down;\n    }\n  }\n}\n","export const COMMAND_CHARS = [\n  \"0\",\n  \"1\",\n  \"2\",\n  \"3\",\n  \"4\",\n  \"5\",\n  \"6\",\n  \"7\",\n  \"8\",\n  \"9\",\n  \"+\",\n  \"-\",\n  \"/\",\n  \"*\",\n  \"%\",\n  \"!\",\n  \"`\",\n  \">\",\n  \"<\",\n  \"^\",\n  \"v\",\n  \"?\",\n  \"_\",\n  \"|\",\n  '\"',\n  \":\",\n  \"\\\\\",\n  \"$\",\n  \"#\",\n  \"g\",\n  \"p\",\n  \"@\",\n  \".\",\n  \",\",\n  \"&\",\n  \"~\",\n  \" \",\n] as const;\n\nexport type CommandChar = typeof COMMAND_CHARS[number];\n","import autoBind from \"auto-bind\";\nimport { COMMAND_CHARS, CommandChar } from \"./CommandChar\";\nimport { Code } from \"../Code\";\nimport { cloneDeep } from \"lodash\";\nimport { Coordinate, Direction, DIRECTION_VECTOR } from \"utilities\";\nimport { BefungeCoreData } from \"./BefungeCoreData\";\nimport { InputRequestStatus } from \"./InputRequestStatus\";\n\nexport class BefungeCore {\n  public cursor: Coordinate = new Coordinate(0, 0);\n  public direction = Direction.Right;\n  public stack: number[] = [];\n  public output = \"\";\n  public stringMode = false;\n  public requestingInput: InputRequestStatus = false;\n  public halted = false;\n\n  constructor(private limits: Coordinate, private code: Code) {\n    autoBind(this);\n  }\n\n  public copy(): BefungeCoreData {\n    return {\n      cursor: this.cursor.clone(),\n      direction: this.direction,\n      stack: cloneDeep(this.stack),\n      output: this.output,\n      stringMode: this.stringMode,\n      halted: this.halted,\n    };\n  }\n\n  public set(point?: BefungeCoreData): void {\n    if (!point) return;\n    this.cursor.setToCopy(point.cursor);\n    this.direction = point.direction;\n    this.stack = point.stack;\n    this.output = point.output;\n    this.stringMode = point.stringMode;\n    this.halted = point.halted;\n  }\n\n  public reset(): void {\n    this.cursor = new Coordinate(0, 0);\n    this.direction = Direction.Right;\n    this.stack = [];\n    this.output = \"\";\n    this.stringMode = false;\n    this.requestingInput = false;\n    this.halted = false;\n  }\n\n  public moveCursor(): void {\n    this.cursor.add(DIRECTION_VECTOR[this.direction]);\n    this.cursor.modulo(this.limits);\n  }\n\n  public acceptInput(input: string): void {\n    if (input.length === 0) return;\n    if (\n      this.requestingInput === \"number\" ||\n      this.requestingInput === \"divideBy0\"\n    ) {\n      this.stack.push(parseInt(input, 10));\n    } else if (this.requestingInput === \"character\") {\n      this.stack.push(input.charCodeAt(0));\n    }\n    this.requestingInput = false;\n  }\n\n  public canStep(): boolean {\n    return !this.halted && !this.requestingInput;\n  }\n\n  public step(): void {\n    if (!this.halted) {\n      this.execute(this.getCursorCharacter());\n      this.moveCursor();\n    }\n  }\n\n  public getCursorCharacter(): string {\n    return this.code.get(this.cursor.x, this.cursor.y);\n  }\n\n  public execute(command: string): void {\n    if (this.stringMode && command !== '\"')\n      this.stack.push(command.charCodeAt(0));\n    else if (this.isValidCommand(command)) this[command]();\n    else this.throwUnrecognisedCommand(command, this.cursor);\n  }\n\n  private isValidCommand(command: string): command is CommandChar {\n    return COMMAND_CHARS.includes(command as CommandChar);\n  }\n\n  private throwUnrecognisedCommand(command: string, cursor: Coordinate): void {\n    this.output += `\\nError: Unrecognised command \"${command}\" at ${cursor.toString()}`;\n    this.halted = true;\n  }\n\n  // Instructions\n  private [\"0\"](): void {\n    this.stack.push(0);\n  }\n\n  private [\"1\"](): void {\n    this.stack.push(1);\n  }\n\n  private [\"2\"](): void {\n    this.stack.push(2);\n  }\n\n  private [\"3\"](): void {\n    this.stack.push(3);\n  }\n\n  private [\"4\"](): void {\n    this.stack.push(4);\n  }\n\n  private [\"5\"](): void {\n    this.stack.push(5);\n  }\n\n  private [\"6\"](): void {\n    this.stack.push(6);\n  }\n\n  private [\"7\"](): void {\n    this.stack.push(7);\n  }\n\n  private [\"8\"](): void {\n    this.stack.push(8);\n  }\n\n  private [\"9\"](): void {\n    this.stack.push(9);\n  }\n\n  private [\"+\"](): void {\n    this.stack.push((this.stack.pop() ?? 0) + (this.stack.pop() ?? 0));\n  }\n\n  private [\"-\"](): void {\n    this.stack.push(-(this.stack.pop() ?? 0) + (this.stack.pop() ?? 0));\n  }\n\n  private [\"/\"](): void {\n    const a = this.stack.pop() ?? 0;\n    const b = this.stack.pop() ?? 1;\n    if (a === 0) this.requestingInput = \"divideBy0\";\n    else this.stack.push(Math.floor(b / a));\n  }\n\n  private [\"*\"](): void {\n    this.stack.push((this.stack.pop() ?? 1) * (this.stack.pop() ?? 1));\n  }\n\n  private [\"%\"](): void {\n    const a = this.stack.pop() ?? 1;\n    const b = this.stack.pop() ?? 1;\n    this.stack.push(b % a);\n  }\n\n  private [\"!\"](): void {\n    this.stack.push(Number(!this.stack.pop()));\n  }\n\n  private [\"`\"](): void {\n    const a = this.stack.pop() ?? 0;\n    const b = this.stack.pop() ?? 0;\n    this.stack.push(Number(a < b));\n  }\n\n  private [\">\"](): void {\n    this.direction = Direction.Right;\n  }\n\n  private [\"<\"](): void {\n    this.direction = Direction.Left;\n  }\n\n  private [\"^\"](): void {\n    this.direction = Direction.Up;\n  }\n\n  private [\"v\"](): void {\n    this.direction = Direction.Down;\n  }\n\n  private [\"?\"](): void {\n    this.direction = Math.floor(Math.random() * 4);\n  }\n\n  private [\"_\"](): void {\n    this.direction = this.stack.pop() ? Direction.Left : Direction.Right;\n  }\n\n  private [\"|\"](): void {\n    this.direction = this.stack.pop() ? Direction.Up : Direction.Down;\n  }\n\n  private ['\"'](): void {\n    this.stringMode = !this.stringMode;\n  }\n\n  private [\":\"](): void {\n    this.stack.push(this.stack[this.stack.length - 1]);\n  }\n\n  private [\"\\\\\"](): void {\n    const a = this.stack.pop();\n    const b = this.stack.pop();\n    if (a !== undefined) this.stack.push(a);\n    if (b !== undefined) this.stack.push(b);\n  }\n\n  private [\"$\"](): void {\n    this.stack.pop();\n  }\n\n  private [\"#\"](): void {\n    this.moveCursor();\n  }\n\n  private [\"g\"](): void {\n    const y = this.stack.pop() ?? 0;\n    const x = this.stack.pop() ?? 0;\n    const coord = new Coordinate(x, y);\n    if (coord.clone().modulo(this.limits).equals(coord))\n      this.stack.push(this.code.get(x, y).charCodeAt(0));\n    else this.stack.push(0);\n  }\n\n  private [\"p\"](): void {\n    const y = this.stack.pop() ?? 0;\n    const x = this.stack.pop() ?? 0;\n    this.code.executionPut(x, y, String.fromCharCode(this.stack.pop() ?? 32)); // 32 is [space]\n  }\n\n  private [\".\"](): void {\n    this.output += (this.stack.pop() ?? 0).toString(10);\n  }\n\n  private [\",\"](): void {\n    const a = this.stack.pop();\n    if (a !== undefined) this.output += String.fromCharCode(a);\n  }\n\n  private [\"&\"](): void {\n    this.requestingInput = \"number\";\n  }\n\n  private [\"~\"](): void {\n    this.requestingInput = \"character\";\n  }\n\n  private [\"@\"](): void {\n    this.halted = true;\n  }\n\n  private [\" \"](): void {} // eslint-disable-line @typescript-eslint/no-empty-function\n}\n"],"sourceRoot":""}