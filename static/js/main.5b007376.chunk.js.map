{"version":3,"sources":["utilities/Coordinate.ts","utilities/range.ts","utilities/sorted.ts","domain/Befunge/Befunge.ts","domain/Code.ts","utilities/constArray2.ts","domain/CodeEditor.ts","ui/Button.tsx","ui/Colors.ts","ui/Row.tsx","components/Grid/Square.tsx","components/Grid/Grid.tsx","utilities/modulo.ts","components/Stack.tsx","components/Output.tsx","components/CodingSpace.tsx","components/useBefunge.ts","App.tsx","index.tsx"],"names":["Coordinate","x","y","this","other","range","start","count","step","Array","fill","map","sorted","arr","copy","sort","a","b","Direction","Code","width","height","code","resetPointWithEdits","resetPointWithoutEdits","value","constArray2","clone","setToCopy","cloneDeep","val","isResetable","withEdits","resetPoint","undefined","isEqual","DIRECTION_VECTOR","Left","Right","Up","Down","Befunge","render","cursor","direction","stack","output","stringMode","halted","limits","walking","running","history","future","autoBind","push","createHistoryPoint","point","pop","revertToPoint","makeResetable","recur","slowStep","setTimeout","i","quickStep","reset","execute","get","moveCursor","add","modulo","command","charCodeAt","isValidCommand","throwUnrecognisedCommand","toString","halt","Math","floor","Number","random","length","executionPut","String","fromCharCode","DIRECTIONS","CodeEditor","executor","selection","selectionDelta","deleteMode","setHistoryPoint","undo","redo","event","shiftKey","set","buttons","ctrlKey","metaKey","handleKeyboardShortcuts","key","match","handleDeletion","handleSelectionMovement","handleEnteredCharacter","onCopy","clearSelection","textToCopy","selectionForEach","cellAction","rowEndAction","clipboardData","setData","preventDefault","text","getData","pasteCoords","split","forEach","char","userPut","setX","console","log","fillSelection","stepSelection","slice","negative","x0","x1","y0","y1","iterationCoord","Button","label","onClick","rest","variant","size","disableElevation","Colors","DARK","Color","LIGHT","GREY","WRITING_CURSOR","EXECUTING_CURSOR","ACCENT","Row","styled","div","BOTH_CURSORS","Square","selected","cursored","onMouseDown","onMouseOver","color","Background","Grid","e","editor","isSelectedX","useCallback","getSelectionCheckFunction","isSelectedY","style","overflow","marginRight","marginBottom","coordinate","delta","limit","sum","modSum","Stack","alignSelf","backgroundColor","padding","scrollbarWidth","reverse","index","Output","flexBasis","flexGrow","flexShrink","minWidth","CodingSpace","setRenderHelper","useState","useRef","current","useEffect","document","addEventListener","onKeyDown","onCut","onPaste","removeEventListener","befunge","useBefunge","Container","marginTop","ButtonColumn","marginLeft","walk","run","pause","App","display","minHeight","justifyContent","alignItems","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5b007376.chunk.js","sourcesContent":["export class Coordinate {\n  constructor(public x: number, public y: number) {}\n\n  set(x: number, y: number): Coordinate {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n\n  setToCopy(other: Coordinate): Coordinate {\n    this.x = other.x;\n    this.y = other.y;\n    return this;\n  }\n\n  setX(x: number): Coordinate {\n    this.x = x;\n    return this;\n  }\n\n  setY(y: number): Coordinate {\n    this.y = y;\n    return this;\n  }\n\n  add(other: Coordinate): Coordinate {\n    this.x += other.x;\n    this.y += other.y;\n    return this;\n  }\n\n  negative(): Coordinate {\n    this.x = -this.x;\n    this.y = -this.y;\n    return this;\n  }\n\n  modulo(other: Coordinate): Coordinate {\n    this.x = ((this.x % other.x) + other.x) % other.x;\n    this.y = ((this.y % other.y) + other.y) % other.y;\n    return this;\n  }\n\n  clone(): Coordinate {\n    return new Coordinate(this.x, this.y);\n  }\n\n  toString(): string {\n    return `(${this.x}, ${this.y})`;\n  }\n}\n","export function range(start: number, count: number, step = 1): number[] {\n  return count > 0\n    ? Array(count)\n        .fill(start)\n        .map((x, y) => x + step * y)\n    : [];\n}\n","export function sorted(arr: number[]): number[] {\n  const copy = [...arr];\n  copy.sort((a, b) => a - b);\n  return copy;\n}\n","import autoBind from \"auto-bind\";\nimport { Coordinate } from \"../../utilities\";\nimport { CommandChar } from \"./CommandChar\";\nimport { Code } from \"../Code\";\nimport { cloneDeep } from \"lodash\";\n\nenum Direction {\n  Left,\n  Right,\n  Up,\n  Down,\n}\nconst DIRECTION_VECTOR = {\n  [Direction.Left]: new Coordinate(-1, 0),\n  [Direction.Right]: new Coordinate(1, 0),\n  [Direction.Up]: new Coordinate(0, -1),\n  [Direction.Down]: new Coordinate(0, 1),\n};\n\ninterface BefungeHistoryPoint {\n  cursor: Coordinate;\n  direction: Direction;\n  stack: number[];\n  output: string;\n  stringMode: boolean;\n  halted: boolean;\n  code: Code;\n  walking: boolean;\n  running: boolean;\n}\n\nexport class Befunge {\n  public cursor = new Coordinate(0, 0);\n  public direction = Direction.Right;\n  public stack: number[] = [];\n  public output = \"\";\n  public stringMode = false;\n  public halted = false;\n  public limits: Coordinate;\n  public code: Code;\n  private walking = false;\n  private running = false;\n  private history: BefungeHistoryPoint[] = [];\n  private future: BefungeHistoryPoint[] = [];\n\n  constructor(width: number, height: number, private render: () => void) {\n    this.limits = new Coordinate(width, height);\n    this.code = new Code(width, height);\n    autoBind(this);\n  }\n\n  public setHistoryPoint(): void {\n    this.history.push(this.createHistoryPoint());\n    this.future = [];\n  }\n\n  public undo(): void {\n    this.future.push(this.createHistoryPoint());\n    const point = this.history.pop();\n    this.revertToPoint(point);\n  }\n\n  public redo(): void {\n    this.history.push(this.createHistoryPoint());\n    const point = this.future.pop();\n    this.revertToPoint(point);\n  }\n\n  private createHistoryPoint(): BefungeHistoryPoint {\n    return {\n      cursor: this.cursor.clone(),\n      direction: this.direction,\n      stack: cloneDeep(this.stack),\n      output: this.output,\n      stringMode: this.stringMode,\n      halted: this.halted,\n      code: this.code.clone(),\n      walking: this.walking,\n      running: this.running,\n    };\n  }\n\n  private revertToPoint(point?: BefungeHistoryPoint): void {\n    if (!point) return;\n    this.cursor.setToCopy(point.cursor);\n    this.direction = point.direction;\n    this.stack = cloneDeep(point.stack);\n    this.output = point.output;\n    this.stringMode = point.stringMode;\n    this.halted = point.halted;\n    this.code.setToCopy(point.code);\n    this.walking = point.walking;\n    this.running = point.running;\n  }\n\n  public walk(): void {\n    function recur(b: Befunge): () => void {\n      return (): void => {\n        if (b.walking) {\n          b.slowStep();\n          setTimeout(recur(b), 1);\n        }\n      };\n    }\n\n    this.code.makeResetable();\n    this.walking = true;\n    this.running = false;\n    recur(this)();\n  }\n\n  public run(): void {\n    function recur(b: Befunge): () => void {\n      return (): void => {\n        for (let i = 0; i < 100; i++) {\n          if (b.running) b.quickStep();\n        }\n        if (b.running) setTimeout(recur(b), 1);\n        else b.render();\n      };\n    }\n\n    this.code.makeResetable();\n    this.walking = false;\n    this.running = true;\n    recur(this)();\n  }\n\n  public pause(): void {\n    this.walking = false;\n    this.running = false;\n  }\n\n  // TODO: how do we reset any changes made to the playing field by `p` commands?\n  public reset(): void {\n    this.cursor = new Coordinate(0, 0);\n    this.stack = [];\n    this.output = \"\";\n    this.halted = false;\n    this.stringMode = false;\n    this.walking = false;\n    this.code.reset(true);\n    this.render();\n  }\n\n  public step(): void {\n    this.code.makeResetable();\n    this.slowStep();\n  }\n\n  private quickStep(): void {\n    this.execute(this.code.get(this.cursor.x, this.cursor.y));\n    this.moveCursor();\n  }\n\n  private slowStep(): void {\n    this.execute(this.code.get(this.cursor.x, this.cursor.y));\n    this.moveCursor();\n    this.render();\n  }\n\n  public moveCursor(): void {\n    this.cursor.add(DIRECTION_VECTOR[this.direction]);\n    this.cursor.modulo(this.limits);\n  }\n\n  public execute(command: string): void {\n    if (this.stringMode) this.stack.push(command.charCodeAt(0));\n    if (this.isValidCommand(command)) this[command]();\n    else this.throwUnrecognisedCommand(command, this.cursor);\n  }\n\n  public isValidCommand(command: string): command is CommandChar {\n    return command in this;\n  }\n\n  private throwUnrecognisedCommand(command: string, cursor: Coordinate): void {\n    this.output += `\\nError: Unrecognised command \"${command}\" at ${cursor.toString()}`;\n    this.halt();\n  }\n\n  private halt(): void {\n    this.halted = true;\n    this.walking = false;\n    this.running = false;\n  }\n\n  // Instructions\n  private [\"0\"](): void {\n    this.stack.push(0);\n  }\n  private [\"1\"](): void {\n    this.stack.push(1);\n  }\n  private [\"2\"](): void {\n    this.stack.push(2);\n  }\n  private [\"3\"](): void {\n    this.stack.push(3);\n  }\n  private [\"4\"](): void {\n    this.stack.push(4);\n  }\n  private [\"5\"](): void {\n    this.stack.push(5);\n  }\n  private [\"6\"](): void {\n    this.stack.push(6);\n  }\n  private [\"7\"](): void {\n    this.stack.push(7);\n  }\n  private [\"8\"](): void {\n    this.stack.push(8);\n  }\n  private [\"9\"](): void {\n    this.stack.push(9);\n  }\n  private [\"+\"](): void {\n    this.stack.push((this.stack.pop() ?? 0) + (this.stack.pop() ?? 0));\n  }\n  private [\"-\"](): void {\n    this.stack.push(-(this.stack.pop() ?? 0) + (this.stack.pop() ?? 0));\n  }\n  private [\"/\"](): void {\n    this.stack.push(\n      Math.floor((1 / (this.stack.pop() ?? 1)) * (this.stack.pop() || 1)) // handle division by 0?\n    );\n  }\n  private [\"*\"](): void {\n    this.stack.push((this.stack.pop() ?? 1) * (this.stack.pop() ?? 1));\n  }\n  private [\"%\"](): void {\n    const a = this.stack.pop() ?? 1;\n    const b = this.stack.pop() ?? 1;\n    this.stack.push(b % a);\n  }\n  private [\"!\"](): void {\n    this.stack.push(Number(!this.stack.pop()));\n  }\n  private [\"`\"](): void {\n    const a = this.stack.pop() ?? 0;\n    const b = this.stack.pop() ?? 0;\n    this.stack.push(Number(a < b));\n  }\n  private [\">\"](): void {\n    this.direction = Direction.Right;\n  }\n  private [\"<\"](): void {\n    this.direction = Direction.Left;\n  }\n  private [\"^\"](): void {\n    this.direction = Direction.Up;\n  }\n  private [\"v\"](): void {\n    this.direction = Direction.Down;\n  }\n  private [\"?\"](): void {\n    this.direction = Math.floor(Math.random() * 4);\n  }\n  private [\"_\"](): void {\n    this.direction = this.stack.pop() ? Direction.Left : Direction.Right;\n  }\n  private [\"|\"](): void {\n    this.direction = this.stack.pop() ? Direction.Up : Direction.Down;\n  }\n  private ['\"'](): void {\n    this.stringMode = !this.stringMode;\n  }\n  private [\":\"](): void {\n    this.stack.push(this.stack[this.stack.length - 1]);\n  }\n  private [\"\\\\\"](): void {\n    const a = this.stack.pop();\n    const b = this.stack.pop();\n    if (a !== undefined) this.stack.push(a);\n    if (b !== undefined) this.stack.push(b);\n  }\n  private [\"$\"](): void {\n    this.stack.pop();\n  }\n  private [\"#\"](): void {\n    this.moveCursor();\n  }\n  private [\"g\"](): void {\n    this.stack.push(\n      this.code.get(this.stack.pop() ?? 0, this.stack.pop() ?? 0).charCodeAt(0)\n    );\n  }\n  private [\"p\"](): void {\n    this.code.executionPut(\n      this.stack.pop() ?? 0,\n      this.stack.pop() ?? 0,\n      String.fromCharCode(this.stack.pop() ?? 32) // 32 is [space]\n    );\n  }\n  private [\".\"](): void {\n    this.output += (this.stack.pop() ?? 0).toString(10);\n  }\n  private [\",\"](): void {\n    const a = this.stack.pop();\n    if (a !== undefined) this.output += String.fromCharCode(a);\n  }\n  // TODO: input/output methods: ., ,, &, and ~\n  private [\"@\"](): void {\n    this.halt();\n  }\n  private [\" \"](): void {} // eslint-disable-line @typescript-eslint/no-empty-function\n}\n","import { cloneDeep, isEqual } from \"lodash\";\nimport { constArray2 } from \"../utilities\";\n\nexport class Code {\n  public code: string[][];\n  protected resetPointWithEdits?: string[][];\n  protected resetPointWithoutEdits?: string[][];\n\n  constructor(private width: number, private height: number) {\n    this.code = constArray2(width, height, \" \");\n  }\n\n  public clone(): Code {\n    const clone = new Code(this.width, this.height);\n    clone.setToCopy(this);\n    return clone;\n  }\n\n  public setToCopy(other: Code): void {\n    this.code = cloneDeep(other.code);\n    this.resetPointWithEdits = cloneDeep(other.resetPointWithEdits);\n    this.resetPointWithoutEdits = cloneDeep(other.resetPointWithoutEdits);\n  }\n\n  public get(x: number, y: number): string {\n    return this.code[x][y];\n  }\n\n  public userPut(x: number, y: number, val: string): void {\n    this.code[x][y] = val;\n    if (this.resetPointWithEdits) this.resetPointWithEdits[x][y] = val;\n  }\n\n  public executionPut(x: number, y: number, val: string): void {\n    this.code[x][y] = val;\n  }\n\n  public makeResetable(): void {\n    if (!this.isResetable()) {\n      this.resetPointWithEdits = cloneDeep(this.code);\n      this.resetPointWithoutEdits = cloneDeep(this.code);\n    }\n  }\n\n  public reset(withEdits: boolean): void {\n    const resetPoint = withEdits\n      ? this.resetPointWithEdits\n      : this.resetPointWithoutEdits;\n    if (resetPoint) this.code = resetPoint;\n    this.resetPointWithEdits = undefined;\n    this.resetPointWithoutEdits = undefined;\n  }\n\n  public resetRequiresClarification(): boolean {\n    return !isEqual(this.resetPointWithEdits, this.resetPointWithoutEdits);\n  }\n\n  private isResetable(): boolean {\n    return !!this.resetPointWithEdits;\n  }\n}\n","export function constArray2<T>(width: number, height: number, value: T): T[][] {\n  return Array(width)\n    .fill(false)\n    .map(() => Array(height).fill(value));\n}\n","import { MouseEvent } from \"react\";\nimport { Coordinate, sorted } from \"../utilities\";\nimport autoBind from \"auto-bind\";\nimport { Code } from \"./Code\";\nimport { Befunge } from \"./Befunge\";\n\nconst DIRECTIONS = {\n  Left: new Coordinate(-1, 0),\n  Right: new Coordinate(1, 0),\n  Up: new Coordinate(0, -1),\n  Down: new Coordinate(0, 1),\n};\n\ntype DirectionName = keyof typeof DIRECTIONS;\n\ntype DeleteMode = \"delete\" | \"backspace\";\n\ninterface CodeEditorHistoryPoint {\n  selection: Coordinate;\n  selectionDelta: Coordinate;\n  direction: Coordinate;\n  deleteMode: DeleteMode;\n}\n\nexport class CodeEditor {\n  public selection = new Coordinate(0, 0);\n  public selectionDelta = new Coordinate(0, 0);\n  public direction = DIRECTIONS.Right.clone();\n  private deleteMode: DeleteMode = \"delete\";\n  private history: CodeEditorHistoryPoint[] = [];\n  private future: CodeEditorHistoryPoint[] = [];\n  public code: Code;\n  public limits: Coordinate;\n\n  constructor(private executor: Befunge, private render: () => void) {\n    this.code = executor.code;\n    this.limits = executor.limits;\n    autoBind(this);\n  }\n\n  public setHistoryPoint(): void {\n    this.history.push(this.createHistoryPoint());\n    this.future = [];\n    this.executor.setHistoryPoint();\n  }\n\n  public undo(): void {\n    this.future.push(this.createHistoryPoint());\n    this.revertToPoint(this.history.pop());\n    this.executor.undo();\n    this.render();\n  }\n\n  public redo(): void {\n    this.history.push(this.createHistoryPoint());\n    this.revertToPoint(this.future.pop());\n    this.executor.redo();\n    this.render();\n  }\n\n  private createHistoryPoint(): CodeEditorHistoryPoint {\n    return {\n      selection: this.selection.clone(),\n      selectionDelta: this.selectionDelta.clone(),\n      direction: this.direction.clone(),\n      deleteMode: this.deleteMode,\n    };\n  }\n\n  private revertToPoint(point?: CodeEditorHistoryPoint): void {\n    if (!point) return;\n    this.selection = point.selection;\n    this.selectionDelta = point.selectionDelta;\n    this.direction = point.direction;\n    this.deleteMode = point.deleteMode;\n  }\n\n  public onMouseDown(x: number, y: number): (event: MouseEvent) => void {\n    return (event: MouseEvent): void => {\n      if (event.shiftKey) {\n        this.selectionDelta.set(x - this.selection.x, y - this.selection.y);\n      } else {\n        this.selection.set(x, y);\n        this.selectionDelta.set(0, 0);\n        this.deleteMode = \"delete\";\n        this.direction.setToCopy(DIRECTIONS.Right);\n      }\n      this.render();\n    };\n  }\n\n  public onMouseOver(x: number, y: number): (event: MouseEvent) => void {\n    return (event: MouseEvent): void => {\n      if (event.buttons % 2 === 1) {\n        this.selectionDelta.set(x - this.selection.x, y - this.selection.y);\n        this.render();\n      }\n    };\n  }\n\n  public onKeyDown(event: KeyboardEvent): void {\n    if (event.ctrlKey || event.metaKey) {\n      this.handleKeyboardShortcuts(event);\n    } else if (event.key.length === 1 && !event.ctrlKey && !event.metaKey) {\n      this.handleEnteredCharacter(event);\n    } else if (event.key.match(/^Arrow/) && !event.ctrlKey && !event.metaKey) {\n      this.handleSelectionMovement(event);\n    } else if (event.key === \"Backspace\") {\n      this.handleDeletion();\n    }\n    this.render();\n  }\n\n  public onCut(event: ClipboardEvent): void {\n    this.setHistoryPoint();\n    this.onCopy(event);\n    this.clearSelection();\n  }\n\n  public onCopy(event: ClipboardEvent): void {\n    this.setHistoryPoint();\n    let textToCopy = \"\";\n    this.selectionForEach({\n      cellAction: (x: number, y: number): void => {\n        textToCopy += this.code.get(x, y);\n      },\n      rowEndAction: (): void => {\n        textToCopy += \"\\n\";\n      },\n    });\n    event.clipboardData?.setData(\"text/plain\", textToCopy);\n    event.preventDefault();\n  }\n\n  public onPaste(event: ClipboardEvent): void {\n    this.setHistoryPoint();\n    const text = event.clipboardData?.getData(\"Text\");\n    const pasteCoords = new Coordinate(this.selection.x, this.selection.y);\n    text?.split(\"\").forEach((char: string) => {\n      if (char === \"\\n\") {\n        pasteCoords\n          .set(this.selection.x, pasteCoords.y + 1)\n          .modulo(this.limits);\n      } else {\n        this.code.userPut(pasteCoords.x, pasteCoords.y, char);\n        pasteCoords.setX(pasteCoords.x + 1).modulo(this.limits);\n      }\n    });\n    this.render();\n  }\n\n  private handleKeyboardShortcuts(event: KeyboardEvent): void {\n    if (event.key === \"a\") {\n      this.selection.set(0, 0);\n      this.selectionDelta.setToCopy(this.limits).add(new Coordinate(-1, -1));\n    } else if (event.key === \"z\" && !event.shiftKey) {\n      this.undo();\n    } else if ((event.key === \"z\" && event.shiftKey) || event.key === \"y\") {\n      console.log(\"hi\", this.history.length, this.future.length);\n      this.redo();\n    } else {\n      return;\n    }\n    event.preventDefault();\n  }\n\n  private handleEnteredCharacter(event: KeyboardEvent): void {\n    this.setHistoryPoint();\n    this.fillSelection(event.key);\n    this.stepSelection(this.direction);\n    this.deleteMode = \"backspace\";\n    event.preventDefault();\n  }\n\n  private handleSelectionMovement(event: KeyboardEvent): void {\n    if (event.shiftKey) {\n      this.selectionDelta.add(DIRECTIONS[event.key.slice(5) as DirectionName]);\n    } else {\n      this.direction.setToCopy(DIRECTIONS[event.key.slice(5) as DirectionName]);\n      this.stepSelection(this.direction);\n      this.selectionDelta.set(0, 0);\n      event.preventDefault();\n    }\n    this.deleteMode = \"delete\";\n  }\n\n  private handleDeletion(): void {\n    this.setHistoryPoint();\n    if (this.deleteMode === \"backspace\") {\n      this.stepSelection(this.direction.clone().negative());\n      this.code.userPut(this.selection.x, this.selection.y, \" \");\n    } else if (this.deleteMode === \"delete\") {\n      this.clearSelection();\n    }\n  }\n\n  private stepSelection(direction: Coordinate): void {\n    this.selection.add(direction).modulo(this.limits);\n  }\n\n  private clearSelection(): void {\n    this.fillSelection(\" \");\n  }\n\n  private fillSelection(char: string): void {\n    this.selectionForEach({\n      cellAction: (x: number, y: number): void => {\n        this.code.userPut(x, y, char);\n      },\n    });\n  }\n\n  private selectionForEach({\n    cellAction,\n    rowEndAction,\n  }: {\n    cellAction: (x: number, y: number) => void;\n    rowEndAction?: () => void;\n  }): void {\n    const [x0, x1] = sorted([\n      this.selection.x,\n      this.selection.x + this.selectionDelta.x,\n    ]);\n    const [y0, y1] = sorted([\n      this.selection.y,\n      this.selection.y + this.selectionDelta.y,\n    ]);\n    const iterationCoord = new Coordinate(0, 0);\n    for (let y = y0; y <= y1; y++) {\n      for (let x = x0; x <= x1; x++) {\n        iterationCoord.set(x, y).modulo(this.limits);\n        cellAction(iterationCoord.x, iterationCoord.y);\n      }\n      rowEndAction?.();\n    }\n  }\n}\n","import React, { FC } from \"react\";\nimport MaterialButton from \"@material-ui/core/Button\";\n\ninterface Props {\n  label: string | FC<{ color?: string }>;\n  onClick: () => void;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n}\n\nexport function Button({ label, onClick, ...rest }: Props): React.ReactElement {\n  return (\n    <MaterialButton\n      variant=\"contained\"\n      size=\"small\"\n      disableElevation\n      onClick={onClick}\n      {...rest}\n    >\n      {label}\n    </MaterialButton>\n  );\n}\n","import Color from \"color\";\n\nexport const Colors = {\n  DARK: Color(\"#283134\"),\n  LIGHT: Color(\"#f7f9f9\"),\n  GREY: Color(\"#CCCCCC\"),\n  WRITING_CURSOR: Color(\"#CCEAFF\"),\n  EXECUTING_CURSOR: Color(\"#FFE0CC\"),\n  ACCENT: Color(\"#09b2eb\"),\n};\n","import styled from \"styled-components\";\n\nexport const Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n","import React, { MouseEvent } from \"react\";\nimport styled from \"styled-components\";\nimport { Colors } from \"../../ui/Colors\";\n\nconst LIGHT = Colors.LIGHT.toString();\nconst BOTH_CURSORS = Colors.GREY.toString();\nconst WRITING_CURSOR = Colors.WRITING_CURSOR.toString();\nconst EXECUTING_CURSOR = Colors.EXECUTING_CURSOR.toString();\n\nexport function Square({\n  val,\n  selected,\n  cursored,\n  onMouseDown,\n  onMouseOver,\n}: {\n  val: string;\n  selected: boolean;\n  cursored: boolean;\n  onMouseDown: (e: MouseEvent) => void;\n  onMouseOver: (e: MouseEvent) => void;\n}): React.ReactElement {\n  const color = !(selected || cursored)\n    ? LIGHT\n    : selected && cursored\n    ? BOTH_CURSORS\n    : selected\n    ? WRITING_CURSOR\n    : EXECUTING_CURSOR;\n\n  return (\n    <Background\n      color={color}\n      onMouseDown={onMouseDown}\n      onMouseOver={onMouseOver}\n    >\n      {val}\n    </Background>\n  );\n}\n\nconst Background = styled.div<{ color: string }>`\n  width: 14px;\n  height: 14px;\n  font-size: 12px;\n  background-color: ${({ color }): string => color};\n  border-right: 1px solid #bbbbbb;\n  border-bottom: 1px solid #bbbbbb;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n`;\n","import React, { useCallback } from \"react\";\nimport { Row } from \"../../ui\";\nimport { Square } from \"./Square\";\nimport { Coordinate, modulo, range } from \"../../utilities\";\nimport { CodeEditor } from \"../../domain/CodeEditor\";\n\nexport function Grid({\n  code,\n  cursor,\n  editor: e,\n}: {\n  code: string[][];\n  cursor: Coordinate;\n  editor: CodeEditor;\n}): React.ReactElement {\n  const isSelectedX = useCallback(\n    getSelectionCheckFunction(e.selection.x, e.selectionDelta.x, e.limits.x),\n    [e.selection.x, e.selectionDelta.x, e.limits.x]\n  );\n\n  const isSelectedY = useCallback(\n    getSelectionCheckFunction(e.selection.y, e.selectionDelta.y, e.limits.y),\n    [e.selection.y, e.selectionDelta.y, e.limits.y]\n  );\n\n  return (\n    <div style={{ overflow: \"hidden\" }}>\n      <div style={{ marginRight: -1, marginBottom: -1 }}>\n        {range(0, e.limits.y).map((y) => (\n          <Row key={y}>\n            {range(0, e.limits.x).map((x) => (\n              <Square\n                val={code[x][y]}\n                selected={isSelectedX(x) && isSelectedY(y)}\n                cursored={x === cursor.x && y === cursor.y}\n                onMouseDown={e.onMouseDown(x, y)}\n                onMouseOver={e.onMouseOver(x, y)}\n                key={`${x},${y}`}\n              />\n            ))}\n          </Row>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction getSelectionCheckFunction(\n  coordinate: number,\n  delta: number,\n  limit: number\n): (a: number) => boolean {\n  if (delta === 0) return (a: number): boolean => a === coordinate;\n  const sum = coordinate + delta;\n  const modSum = modulo(coordinate + delta, limit);\n  if (delta < 0) {\n    if (modSum === sum)\n      return (a: number): boolean => coordinate + delta <= a && a <= coordinate;\n    else return (a: number): boolean => a <= coordinate || a >= modSum;\n  } else {\n    if (modSum === sum)\n      return (a: number): boolean => coordinate <= a && a <= coordinate + delta;\n    else return (a: number): boolean => a <= modSum || a >= coordinate;\n  }\n}\n","export function modulo(a: number, b: number): number {\n  return ((a % b) + b) % b;\n}\n","import React from \"react\";\nimport { Colors } from \"../ui/Colors\";\n\ninterface Props {\n  stack: number[];\n  style?: React.CSSProperties;\n}\n\nexport function Stack({ stack, style }: Props): React.ReactElement {\n  return (\n    <div\n      style={{\n        width: 120,\n        alignSelf: \"stretch\",\n        backgroundColor: Colors.LIGHT.toString(),\n        padding: 8,\n        overflow: \"scroll\",\n        scrollbarWidth: \"none\",\n        ...style,\n      }}\n    >\n      {stack\n        .slice()\n        .reverse()\n        .map((value, index) => (\n          <div key={index}>{value}</div>\n        ))}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Colors } from \"../ui\";\n\ninterface Props {\n  output: string;\n  style?: React.CSSProperties;\n}\n\nexport function Output({ output, style }: Props): React.ReactElement {\n  return (\n    <div\n      style={{\n        flexBasis: 0,\n        flexGrow: 1,\n        flexShrink: 1,\n        minWidth: 0,\n        alignSelf: \"stretch\",\n        backgroundColor: Colors.LIGHT.toString(),\n        padding: 8,\n        overflow: \"scroll\",\n        scrollbarWidth: \"none\",\n        ...style,\n      }}\n    >\n      {output}\n    </div>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { useBefunge } from \"./useBefunge\";\nimport { Grid } from \"./Grid\";\nimport { Stack } from \"./Stack\";\nimport { Output } from \"./Output\";\nimport { Row, Button } from \"../ui\";\n\nexport function CodingSpace(): React.ReactElement {\n  const width = 80;\n  const height = 25;\n  const { editor: e, befunge: b } = useBefunge(width, height);\n\n  return (\n    <Container>\n      <Grid code={b.code.code} cursor={b.cursor} editor={e} />\n      <Row style={{ marginTop: 16, width: 15 * width, height: 200 }}>\n        <Stack stack={b.stack} />\n        <ButtonColumn style={{ marginLeft: 16 }}>\n          <Button label={\"Step\"} onClick={b.step} />\n          <Button label={\"Walk\"} onClick={b.walk} style={{ marginTop: 8 }} />\n          <Button label={\"Run\"} onClick={b.run} style={{ marginTop: 8 }} />\n          <Button label={\"Pause\"} onClick={b.pause} style={{ marginTop: 8 }} />\n          <Button label={\"Reset\"} onClick={b.reset} style={{ marginTop: 8 }} />\n        </ButtonColumn>\n        <Output output={b.output} style={{ marginLeft: 16 }} />\n      </Row>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ButtonColumn = styled.div`\n  align-self: stretch;\n  justify-content: space-between;\n  display: flex;\n  flex-direction: column;\n`;\n","import { useCallback, useRef, useState, useEffect } from \"react\";\nimport { Befunge, CodeEditor } from \"../domain\";\n\nexport function useBefunge(\n  width: number,\n  height: number\n): {\n  editor: CodeEditor;\n  befunge: Befunge;\n} {\n  const setRenderHelper = useState(0)[1];\n  const render = useCallback(() => {\n    setRenderHelper(Math.random());\n  }, []);\n\n  const b = useRef(new Befunge(width, height, render)).current;\n  const e = useRef(new CodeEditor(b, render)).current;\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", e.onKeyDown);\n    document.addEventListener(\"cut\", e.onCut);\n    document.addEventListener(\"copy\", e.onCopy);\n    document.addEventListener(\"paste\", e.onPaste);\n    return (): void => {\n      document.removeEventListener(\"keydown\", e.onKeyDown);\n      document.removeEventListener(\"cut\", e.onCut);\n      document.removeEventListener(\"copy\", e.onCopy);\n      document.removeEventListener(\"paste\", e.onPaste);\n    };\n  }, []);\n\n  return {\n    editor: e,\n    befunge: b,\n  };\n}\n","import React from \"react\";\nimport { CodingSpace } from \"./components/CodingSpace\";\nimport { Colors } from \"./ui/Colors\";\n\nfunction App(): React.ReactElement {\n  return (\n    <div\n      style={{\n        backgroundColor: Colors.DARK.toString(),\n        display: \"flex\",\n        minHeight: \"100vh\",\n        padding: 24,\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <CodingSpace />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}